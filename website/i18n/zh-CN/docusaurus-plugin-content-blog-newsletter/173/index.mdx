---
slug: /173
title: "This Week In React #173: Million, Storybook, visionOS, Expo, Conform, Next.js, Remix, Astro, Apollo, useFormStatus, Framer Motion, Ariakit, Reanimated, TypeScript, JQuery, Express, Interop..."
authors: [slorber, bndkt]
date: 02-07-2024
---

大家好！

本周我们有许多优质的React文章和一些有趣的发布。React似乎不断受到批评，但总体而言，这些论点总是老生常谈，许多观点显得过时，且从未承认React比其他解决方案更出色的地方。

React Native领域正被Vision Pro的正式发布所席卷！

我们本周尝试了新形式，首次推出了[专为React Native设计的Twitter讨论串](https://twitter.com/bndkt/status/1755203992039424377)。欢迎告诉我们您的看法。

下周简报将暂停一期，我们将于2月21日回归👋。

另外想请大家帮个小忙：能否回复这封邮件，简单说声"你好"或留下评论？这有助于提升我们的邮件送达率。感谢！

<!-- truncate -->

**💡 [在Twitter查看本期简报](https://slo.im/thread) - 视觉版式 🎨**

---

import Support from "../_support.mdx";

<Support />

---

## 💸 赞助商 {#sponsor1}

[![支持内联可视化编辑的Next.js CMS（App路由）](/emails/issues/173/reactbricks.jpg)](https://reactbricks.com?utm_source=twir&utm_campaign=twir_2024&utm_medium=email)

**[支持内联可视化编辑的Next.js CMS（App路由）](https://reactbricks.com?utm_source=twir&utm_campaign=twir_2024&utm_medium=email)**

通过CLI[**1分钟快速创建项目**](https://reactbricks.com/sign-up?utm_source=twir&utm_campaign=twir_2024&utm_medium=email)，将自定义可视化区块定义为React组件，使用任意CSS框架实现像素级品牌呈现。快来尝试支持Server Components的新版Next.js启动模板！

内容编辑者可以像使用文字处理器般直观组合内容区块，完全不影响设计效果。

React Bricks具备企业级功能：数字资产管理、高级SEO、实时协作、定时发布、多语言支持、外部API集成、审批工作流、多环境部署、变更历史等。

已获The Weather Channel、Deel.com、法国邮政银行等企业客户及全球9000+用户信赖。  
[**立即体验！**](https://reactbricks.com/sign-up?utm_source=twir&utm_campaign=twir_2024&utm_medium=email)

---

## ⚛️ React动态 {#react}

[![Million 3.0](/emails/issues/173/million.jpg)](https://million.dev/blog/million-3)

**[Million 3.0](https://million.dev/blog/million-3)**

Million是React的优化编译器。这个重大版本更新彻底重构了代码，修复了先前版本的缺陷，处理了更多边界情况，带来全新的优化hydration系统并提升稳定性。

据其🐦[发布预告](https://twitter.com/aidenybai/status/1753456530652107072)显示，Million计划帮助开发者长期调试和维护网页性能，路线图中还包含性能检测工具。

---

- 💸 [工程师产品指南 - PostHog的通讯，帮助工程师提升产品技能。](https://newsletter.posthog.com/?utm_source=twir&utm_campaign=twir)
- 👀 [React Types PR - JSDoc注释](https://github.com/DefinitelyTyped/DefinitelyTyped/pull/68409): Matt Pocock正在改进React与TypeScript配合使用的开发者体验。
- 📜 [避免使用React的`useFormStatus`](https://allanlasser.com/posts/2024-01-26-avoid-using-reacts-useformstatus): 一篇有趣的文章指出了这个新React钩子的缺陷。它要求必须在`<form>`元素下使用，但将提交`<button>`放在表单外是完全有效的HTML。建议使用异步过渡作为替代方案。
- 📜 [Framer Motion中的方向感知动画](https://sinja.io/blog/direction-aware-animations-in-framer-motion): 一篇互动性强的文章，展示了如何为列表/详情视图和轮播幻灯片设置正确的进入/退出动画方向。
- 📜 [开源Remix官网](https://remix.run/blog/oss-remix-dot-run): Remix团队认为开源其网站利大于弊。你现在可以研究他们主页滚动效果的实现方式，或他们如何SSR文档页面。
- 📜 [使用GitHub Actions将Next.js应用Docker化](https://mxd.codes/articles/ci-cd-for-nextjs-with-github-actions): 使用Vercel提供的默认Dockerfile构建，配置适当的环境变量，并发布到容器注册表。
- 📜 [移除React只是代码库在示弱](https://begin.com/blog/posts/2024-01-26-removing-react-is-just-weakness-leaving-your-codebase): 一个有趣但我难以认同的批评😅在我看来React并不常变化，现有代码无需重写，而CSS-in-JS的运行时库问题我们早就知道...
- 📜 [感觉React最近有点被针对](https://piccalil.li/blog/react-is-getting-a-bit-of-a-kicking-recently/): 对上述批评的更 nuanced 回应。React并不完美，但也不会消失，而且web平台目前并未提供我们所需的所有工具。
- 📜 [如何从Next.js路由处理器流式传输文件](https://www.ericburel.tech/blog/nextjs-stream-files): 展示如何在不加载到内存的情况下提供动态生成的文件。可能需要将Node.js流转换为web流。
- 📜 [如何在React中检测页面任意位置的点击](https://spacejelly.dev/posts/how-to-detect-clicks-anywhere-on-a-page-in-react): 今日学习event.composedPath() API。
- 📜 [流式传输如何帮助构建更快的web应用](https://vercel.com/blog/how-streaming-helps-build-faster-web-applications)
- 📜 [开发DevCycle的Next.js SDK的经验教训](https://blog.devcycle.com/feature-flagging-with-next-js-lessons-learned-from-developing-devcycles-sdk/): 他们的功能标记SDK需要支持服务端/客户端组件、流式传输和Suspense。
- 📜 [如何在Remix中使用Unpic生成响应式图片](https://unpic.pics/blog/responsive-images-on-remix/)
- 📜 [使用Storybook和Chromatic增强React应用的可扩展性](https://dainemawer.com/articles/enhance-your-react-apps-scalability-using-storybook-and-chromatic)
- 📜 [重构故事 - 支付系统](https://commerce.nearform.com/blog/2024/tale-of-a-refactor/)
- 📜 [我们如何通过Next.js App Router在4个月内将搜索流量提升20倍](https://hardcover.app/blog/next-js-app-router-seo)
- 📜 [如何为基于Astro的博客生成Open Graph图片](https://techsquidtv.com/blog/generating-open-graph-images-for-astro/)
- 📜 [使用Next.js App Router和MDX构建博客](https://www.alexchantastic.com/building-a-blog-with-next-and-mdx)
- 📜 [React Intersection Observer实用指南](https://www.builder.io/blog/react-intersection-observer)
- 📦 [Storybook 8 Beta - 支持RSC、SWC编译器、Vitest、重大性能与兼容性改进、实时视觉测试...](https://storybook.js.org/blog/storybook-8-beta/)
- 📦 [Conform 1.0 - 用于Remix和Next.js的类型安全渐进增强表单验证库](https://github.com/edmundhung/conform/releases/tag/v1.0.0)
- 📦 [Safe NextJS Navigation - NextJS App Router的类型安全导航](https://github.com/lukemorales/next-safe-navigation)
- 📦 [Astro 4.3 - 国际化域名、HTML输出控制、ComponentProps工具类型...](https://astro.build/blog/astro-430/)
- 📦 [Apollo Client 3.9 - Suspense数据获取、查询预加载、内存优化、useQueryRefHandlers钩子...](https://www.apollographql.com/blog/whats-new-in-apollo-client-3-9)
- 📦 [Remix 2.6.0 - Vite插件的Cloudflare支持(不稳定)](https://github.com/remix-run/remix/blob/main/CHANGELOG.md)
- 📦 [Sonner 1.4 - Toast组件](https://github.com/emilkowalski/sonner/releases/tag/v1.4.0)
- 📦 [Ariakit 0.4 - 更好地支持CSS动画和过渡](https://ariakit.org/changelog#040)
- 📦 [React-resizable-panels 2.0 - 支持多面板调整大小](https://github.com/bvaughn/react-resizable-panels/releases/tag/2.0.0)
- 🎥 [Lee Robinson - Next.js App Router认证(会话、Cookies、JWTs)](https://www.youtube.com/watch?v=DJvM2lSPn6w)
- 🎥 [Jack Herrington - 五个会杀死应用的React反模式](https://www.youtube.com/watch?v=ZkQPxP4wlE8)
- 🎙️ [Dan Abramov谈React、RSCs和未来](https://podrocket.logrocket.com/dan-abramov-react-rscs-future)

<SubscribeFormEmbed placement="middle" />

---

## 💸 赞助商 {#sponsor2}

[![最全面的用户管理平台](/emails/issues/172/clerk.jpg)](https://clerk.com/?utm_source=sponsorship&utm_medium=newsletter&utm_campaign=thisweekinreact&utm_term=02-7-24)

**[最全面的用户管理平台](https://clerk.com/?utm_source=sponsorship&utm_medium=newsletter&utm_campaign=thisweekinreact&utm_term=02-7-24)**

Clerk简化了React应用的身份验证和用户管理流程，为现代Web开发提供快速部署方案。

体验Clerk的核心优势：

- 💅 开箱即用的UI组件库：登录/注册页、用户资料页、组织管理页。支持任意CSS库定制，可部署在自有域名
- 📦 多框架SDK支持：React、React Native、Next.js、Redwood、Remix等
- ⚡ 无缝集成Firebase、Supabase、Convex等BaaS服务商
- 🎁 完整功能套件：用户管理系统、社交账号登录、魔法链接、多因素认证等

立即查阅Clerk的[快速入门指南](https://clerk.com/docs/quickstarts/overview?utm_source=sponsorship&utm_medium=newsletter&utm_campaign=thisweekinreact&utm_term=02-07-24)，快速启动项目🚀

---

## 📱 React-Native动态 {#react-native}

本版块现由[Benedikt](https://twitter.com/bndkt)联合策划，我们同步开通了[React Native专属推特话题](https://twitter.com/bndkt/status/1755203992039424377)！欢迎点赞转发支持😍

[![React Native正式支持Apple Vision Pro](/emails/issues/173/visionos.jpg)](https://www.callstack.com/blog/announcing-react-native-for-apple-vision-pro)

**[React Native正式支持Apple Vision Pro](https://www.callstack.com/blog/announcing-react-native-for-apple-vision-pro)**

上周Apple发布Vision Pro后，React Native社区迅速响应这一全新平台。目前有两种技术路径实现支持（🐦[对比分析](https://twitter.com/o_kwasniewski/status/1754520654219493408)）：

- 兼容模式：类似iOS应用在macOS的运行方式，开发者只需在App Store Connect勾选选项即可让现有应用运行于visionOS。🐦[Evan Bacon演示了10分钟内完成Expo应用在Vision Pro的配置、构建和安装](https://twitter.com/Baconbrix/status/1753927218697208102)。但此模式无法调用visionOS特有的"空间计算"能力，仅作为iPad应用的平面投射。

- 原生适配：要充分发挥新硬件特性，需深度适配原生能力。这正是由Oskar Kwaśniewski主导、Callstack团队推动的visionOS平台开发方向。

虽然尚处早期阶段，但React Native对新平台的快速响应令人振奋！首款React Native visionOS应用[Spacial Noise](https://apps.apple.com/us/app/spatial-noise/id6477335349)已登陆App Store。

---

- 💸 [Moropo - 与Expo EAS无缝集成的移动端测试基础设施](https://www.moropo.com?utm_source=newsletter&utm_medium=emails&utm_campaign=twir-20240207)
- 👀 [RFC - React Native框架生态](https://github.com/react-native-community/discussions-and-proposals/pull/759): 你是否曾困惑React Native、Expo和其他社区工具的边界在哪里？界限正在模糊，这份RFC通过引入"React Native框架"概念来厘清关系。
- 👀 [CSS4色彩函数](https://github.com/facebook/react-native/pull/42831)与[DisplayP3广色域](https://github.com/facebook/react-native/pull/42830): React Native即将支持更多色彩选项（如广色域）。
- 🐦 [Expo在新博客中自研自用Expo web和Expo Router](https://twitter.com/Baconbrix/status/1755026874047123843)
- 🐦 [Shopify持续押注React Native](https://x.com/mustafa01ali/status/1753477532668600653?s=20)
- 📖 [Expo文档 - 为电视设备构建Expo应用](https://x.com/expo/status/1754208200935518292?s=20): "React Native全平台覆盖"正逐步成为现实。通过Expo配置插件，现已直接支持Apple TV和Android TV实验性开发。这个激动人心的进展必将延续到macOS、visionOS等平台...
- 📖 [Expo改进的Metro打包器文档](https://docs.expo.dev/guides/customizing-metro/): 详解代码分割、摇树优化和压缩混淆原理，以及Metro如何应用于Web打包。
- 📜 [开发者必知的环境变量使用指南](https://expo.dev/blog/what-are-environment-variables): 正确处理RN环境变量至关重要，否则可能导致密钥泄露到客户端。
- 📜 [使用@expo/fingerprint生成原生运行时指纹](https://expo.dev/blog/fingerprint-your-native-runtime): 判断JS包更新是否需要重新构建原生应用是个复杂问题。Expo SDK 50推出的Fingerprint功能通过生成代表RN应用"原生接口面"的哈希值来解决这个问题。
- 📜 [使用EAS Update的6大理由](https://expo.dev/blog/6-reasons-to-use-eas-update): 你知道"重新发布"功能吗？在升级出错时，可以快速回滚到之前可用的版本！
- 📜 [如何使用Expo配置插件为文件添加新目标平台？](https://www.reactnativecrossroads.com/posts/config-plugin-expo-add-target)
- 📦 [React Native Storybook 7 - 支持CSF 3格式、TypeScript、Markdown、自动加载故事、控件自动生成](https://storybook.js.org/blog/react-native-storybook-7/)
- 📦 [React Native Test App 3.1 - 支持无桥接模式](https://github.com/microsoft/react-native-test-app/releases/tag/3.1.0)
- 🎥 [William Candillon - 2024年的JavaScript动画技术](https://www.youtube.com/watch?v=AHh3Bt7JpRs): 新版Reanimated将支持JavaScript生成器。William用while(true)循环中的yield重写了3个自定义动画示例。
- 🎥 [Simon Grimm - React Native的黄金时代已至](https://www.youtube.com/watch?v=COH_XhlMyZ4)
- 🎙️ [RNR第287期 - 特邀嘉宾Charlie Cheever](https://reactnativeradio.com/episodes/rnr-287-special-guest-charlie-cheever): 虽然我始终认为Expo是React Native的上层封装，但你知道Charlie Cheever和James Ide在React Native诞生前就开始开发Expo了吗？
- 🎙️ [火箭飞船第28期 - Expo Router与通用React Native应用开发（Evan Bacon）](https://share.transistor.fm/s/e9f2b98e)
- 🎙️ [React Native秀第34期 - 2023年React Native现状调查结果](https://www.callstack.com/podcasts/state-of-react-native-2023)

---

## 🔀 其他动态 {#other}

- 👀 [Interop 2024 仪表盘 - 今年浏览器将优先实现哪些功能](https://wpt.fyi/interop-2024)
- 👀 [Express Forward - Express v5、v6、v7 的发展规划](https://github.com/expressjs/discussions/issues/160)
- 📜 [无服务架构的下一站：有状态化](https://sunilpai.dev/posts/the-future-of-serverless/)
- 📜 [TotalTypeScript - 慎用方法简写语法](https://www.totaltypescript.com/method-shorthand-syntax-considered-harmful)
- 📜 [TotalTypeScript - 当 'as never' 成为唯一解决方案时](https://www.totaltypescript.com/as-never)
- 📜 [为自动化游戏榨取JavaScript的最后一丝性能](https://ruoyusun.com/2024/01/23/cividle-optimization.html)
- 📜 [2024年网站图标最佳实践：满足多数场景的六种文件方案](https://evilmartians.com/chronicles/how-to-favicon-in-2021-six-files-that-fit-most-needs)
- 📜 [在验证器中使用品牌类型](https://stack.convex.dev/using-branded-types-in-validators)
- 📦 [Turborepo 1.12 发布](https://turbo.build/blog/turbo-1-12-0)
- 📦 [jQuery 4.0.0 beta 版](https://blog.jquery.com/2024/02/06/jquery-4-0-0-beta/)

---

## 🤭 轻松一刻 {#fun}

[![alt](/emails/issues/173/meme.jpg)](https://twitter.com/wesbos/status/1754347448623890719)

下期见！👋