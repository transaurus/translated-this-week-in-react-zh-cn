---
slug: /173
title: "This Week In React #173: Million, Storybook, visionOS, Expo, Conform, Next.js, Remix, Astro, Apollo, useFormStatus, Framer Motion, Ariakit, Reanimated, TypeScript, JQuery, Express, Interop..."
authors: [slorber, bndkt]
date: 02-07-2024
---

大家好！

本周我们有许多优质的React文章和一些有趣的发布。虽然React似乎不断受到批评，但总体而言，这些论点总是老生常谈，其中许多看起来有些过时，且从未承认React比其他解决方案做得更好的地方。

React Native领域正被Vision Pro的正式发布所席卷！

本周我们尝试了新形式，首次推出了[专注于React Native的Twitter话题串](https://twitter.com/bndkt/status/1755203992039424377)。欢迎告诉我们您的看法。

下周简报将暂停一期。我们将在2月21日回归👋。

另外想请您帮个小忙：能否回复这封邮件，简单发送"你好"或留言？这有助于提升我们的邮件送达率。感谢！

<!-- truncate -->

**💡 [在Twitter查看本期简报](https://slo.im/thread) - 可视化格式 🎨**

---

import Support from "../_support.mdx";

<Support />

---

## 💸 赞助商 {#sponsor1}

[![支持App路由的Next.js可视化内联编辑CMS](/emails/issues/173/reactbricks.jpg)](https://reactbricks.com?utm_source=twir&utm_campaign=twir_2024&utm_medium=email)

**[支持App路由的Next.js可视化内联编辑CMS](https://reactbricks.com?utm_source=twir&utm_campaign=twir_2024&utm_medium=email)**

[**一分钟快速创建项目**](https://reactbricks.com/sign-up?utm_source=twir&utm_campaign=twir_2024&utm_medium=email)，通过CLI工具定义可拖拽的React可视化区块组件，使用任意CSS框架实现像素级品牌呈现。尝试支持Server Components的新版Next.js启动模板！

内容编辑者可以像使用文字处理器一样直观地组合页面内容区块，同时不破坏设计规范。

React Bricks具备企业级功能：数字资产管理、高级SEO、实时协作、定时发布、多语言支持、外部API集成、审批工作流、多环境部署、变更历史记录等。

已获The Weather Channel、Deel.com、法国邮政银行等企业客户及全球9000+用户信赖。  
[**立即体验！**](https://reactbricks.com/sign-up?utm_source=twir&utm_campaign=twir_2024&utm_medium=email)

---

## ⚛️ React {#react}

[![Million 3.0](/emails/issues/173/million.jpg)](https://million.dev/blog/million-3)

**[Million 3.0](https://million.dev/blog/million-3)**

Million是React的优化编译器。这个全新大版本完全重写，修复了先前版本的缺陷，处理更多边界情况，带来优化的hydration系统并提升稳定性。

据其🐦[发布预告](https://twitter.com/aidenybai/status/1753456530652107072)显示，Million计划帮助开发者长期维护优异的网页性能，路线图中包含百万级代码检测工具。

---

- 💸 [工程师产品指南 - PostHog的通讯帮助工程师提升产品技能](https://newsletter.posthog.com/?utm_source=twir&utm_campaign=twir)
- 👀 [React Types PR - JSDoc注释](https://github.com/DefinitelyTyped/DefinitelyTyped/pull/68409): Matt Pocock正在改进React与TypeScript配合使用的开发者体验。
- 📜 [避免使用React的`useFormStatus`](https://allanlasser.com/posts/2024-01-26-avoid-using-reacts-useformstatus): 一篇揭示这个新React钩子缺陷的文章。它要求必须在`<form>`元素内使用，但将提交`<button>`放在表单外是完全有效的HTML。建议改用异步过渡作为替代方案。
- 📜 [Framer Motion中的方向感知动画](https://sinja.io/blog/direction-aware-animations-in-framer-motion): 一篇互动性强的文章，展示如何为列表/详情视图和轮播幻灯片设置正确方向的进入/退出动画。
- 📜 [开源Remix官网](https://remix.run/blog/oss-remix-dot-run): Remix团队认为开源其网站利大于弊。现在你可以研究他们首页滚动效果的实现方式，或文档页面的服务端渲染逻辑。
- 📜 [使用GitHub Actions将Next.js应用容器化](https://mxd.codes/articles/ci-cd-for-nextjs-with-github-actions): 用Vercel提供的默认Dockerfile配合适当环境变量构建，并发布到容器注册表。
- 📜 [移除React只是代码库在示弱](https://begin.com/blog/posts/2024-01-26-removing-react-is-just-weakness-leaving-your-codebase): 一篇难以苟同的有趣批评😅 在我看来React并不常变更，现有代码无需重写，而CSS-in-JS的运行时问题我们早已知晓... 如今React开发者反而比以往更依赖Web基础能力。
- 📜 [React最近似乎备受指责](https://piccalil.li/blog/react-is-getting-a-bit-of-a-kicking-recently/): 对上述批评更细致的回应。React虽不完美但地位稳固，且当前Web平台尚未提供我们所需的全部工具。
- 📜 [如何从Next.js路由处理器流式传输文件](https://www.ericburel.tech/blog/nextjs-stream-files): 展示如何不加载到内存直接提供动态生成的文件，可能需要将Node.js流转换为Web流。
- 📜 [如何在React中检测页面任意位置的点击](https://spacejelly.dev/posts/how-to-detect-clicks-anywhere-on-a-page-in-react): 新学到的event.composedPath() API。
- 📜 [流式传输如何助力构建更快的Web应用](https://vercel.com/blog/how-streaming-helps-build-faster-web-applications)
- 📜 [开发DevCycle的Next.js SDK的经验教训](https://blog.devcycle.com/feature-flagging-with-next-js-lessons-learned-from-developing-devcycles-sdk/): 他们的功能开关SDK需要支持服务端/客户端组件、流式传输和Suspense。
- 📜 [如何在Remix中使用Unpic生成响应式图片](https://unpic.pics/blog/responsive-images-on-remix/)
- 📜 [用Storybook和Chromatic提升React应用的可扩展性](https://dainemawer.com/articles/enhance-your-react-apps-scalability-using-storybook-and-chromatic)
- 📜 [重构故事 - 支付系统](https://commerce.nearform.com/blog/2024/tale-of-a-refactor/)
- 📜 [我们如何通过Next.js App Router在4个月内将搜索流量提升20倍](https://hardcover.app/blog/next-js-app-router-seo)
- 📜 [如何为基于Astro的博客生成Open Graph图片](https://techsquidtv.com/blog/generating-open-graph-images-for-astro/)
- 📜 [用Next.js App Router和MDX搭建博客](https://www.alexchantastic.com/building-a-blog-with-next-and-mdx)
- 📜 [React Intersection Observer实用指南](https://www.builder.io/blog/react-intersection-observer)
- 📦 [Storybook 8 Beta - 支持RSC、SWC编译器、Vitest、重大性能与兼容性改进、实时可视化测试...](https://storybook.js.org/blog/storybook-8-beta/)
- 📦 [Conform 1.0 - 为Remix和Next.js设计的类型安全渐进增强表单验证库](https://github.com/edmundhung/conform/releases/tag/v1.0.0)
- 📦 [Safe NextJS Navigation - NextJS App Router的类型安全导航](https://github.com/lukemorales/next-safe-navigation)
- 📦 [Astro 4.3 - 国际化域名、HTML输出控制、ComponentProps工具类型...](https://astro.build/blog/astro-430/)
- 📦 [Apollo Client 3.9 - Suspense数据获取、查询预加载、内存优化、useQueryRefHandlers钩子...](https://www.apollographql.com/blog/whats-new-in-apollo-client-3-9)
- 📦 [Remix 2.6.0 - Vite插件支持Cloudflare(实验性)](https://github.com/remix-run/remix/blob/main/CHANGELOG.md)
- 📦 [Sonner 1.4 - Toast组件](https://github.com/emilkowalski/sonner/releases/tag/v1.4.0)
- 📦 [Ariakit 0.4 - 更好支持CSS动画和过渡](https://ariakit.org/changelog#040)
- 📦 [React-resizable-panels 2.0 - 支持多面板调整大小](https://github.com/bvaughn/react-resizable-panels/releases/tag/2.0.0)
- 🎥 [Lee Robinson - Next.js App Router身份验证(会话、Cookies、JWT)](https://www.youtube.com/watch?v=DJvM2lSPn6w)
- 🎥 [Jack Herrington - 五个毁灭应用级的React反模式](https://www.youtube.com/watch?v=ZkQPxP4wlE8)
- 🎙️ [Dan Abramov谈React、RSC和未来](https://podrocket.logrocket.com/dan-abramov-react-rscs-future)

<SubscribeFormEmbed placement="middle" />

---

## 💸 赞助商 {#sponsor2}

[![最全面的用户管理平台](/emails/issues/172/clerk.jpg)](https://clerk.com/?utm_source=sponsorship&utm_medium=newsletter&utm_campaign=thisweekinreact&utm_term=02-7-24)

**[最全面的用户管理平台](https://clerk.com/?utm_source=sponsorship&utm_medium=newsletter&utm_campaign=thisweekinreact&utm_term=02-7-24)**

Clerk为React应用提供简化的身份验证和用户管理解决方案，助力快速构建现代Web应用。

体验Clerk的核心优势：

- 💅 开箱即用的UI组件：登录、注册、用户资料和组织管理。支持任意CSS库定制，可部署在自有域名
- 📦 多框架SDK支持：React、React Native、Next.js、Redwood、Remix等
- ⚡ 无缝集成Firebase、Supabase、Convex等后端即服务提供商
- 🎁 内置功能：用户管理、社交登录、魔法链接、多因素认证等

立即探索Clerk的[快速入门指南](https://clerk.com/docs/quickstarts/overview?utm_source=sponsorship&utm_medium=newsletter&utm_campaign=thisweekinreact&utm_term=02-07-24)，快速启动项目🚀

---

## 📱 React-Native动态 {#react-native}

本版块现由[Benedikt](https://twitter.com/bndkt)联合主笔，我们同步开通了[React Native推特话题](https://twitter.com/bndkt/status/1755203992039424377)！欢迎点赞转发支持😍

[![宣布React Native支持Apple Vision Pro](/emails/issues/173/visionos.jpg)](https://www.callstack.com/blog/announcing-react-native-for-apple-vision-pro)

**[宣布React Native支持Apple Vision Pro](https://www.callstack.com/blog/announcing-react-native-for-apple-vision-pro)**

上周Apple发布Vision Pro后，React Native社区正积极为这个新平台构建体验。目前有两种技术路径（🐦 [对比分析](https://twitter.com/o_kwasniewski/status/1754520654219493408)）：

- 兼容模式：类似iOS应用在macOS的运行方式，通过App Store Connect勾选选项即可让现有应用运行于visionOS。🐦 [Evan Bacon演示了10分钟内完成Expo应用的配置、构建和安装](https://twitter.com/Baconbrix/status/1753927218697208102)。但此模式无法利用visionOS的"空间计算"特性

- 原生适配：为充分发挥新硬件特性，Callstack团队的Oskar Kwaśniewski主导开发了visionOS平台支持，需进行原生能力适配

虽然处于早期阶段，但React Native如此快速拥抱新平台令人振奋！首款React Native visionOS应用[Spacial Noise](https://apps.apple.com/us/app/spatial-noise/id6477335349)已登陆App Store

---

- 💸 [Moropo - 与 Expo EAS 无缝集成的移动测试基础设施](https://www.moropo.com?utm_source=newsletter&utm_medium=emails&utm_campaign=twir-20240207)
- 👀 [RFC - React Native 框架](https://github.com/react-native-community/discussions-and-proposals/pull/759): 你是否曾疑惑 React Native、Expo 和其他社区工具之间的界限在哪里？界限是模糊的，这份 RFC 旨在通过引入“React Native 框架”概念来厘清关系。
- 👀 [CSS4 颜色函数](https://github.com/facebook/react-native/pull/42831) 和 [DisplayP3 色彩](https://github.com/facebook/react-native/pull/42830): React Native 即将支持更多色彩选项（如广色域）。
- 🐦 [Expo 正在其新博客上自用 Expo Web 和 Expo Router](https://twitter.com/Baconbrix/status/1755026874047123843)
- 🐦 [Shopify 持续押注 React Native](https://x.com/mustafa01ali/status/1753477532668600653?s=20)
- 📖 [Expo 文档 - 为电视设备构建 Expo 应用](https://x.com/expo/status/1754208200935518292?s=20): “React Native 无处不在”正日益成为现实。得益于 Expo 配置插件，现已直接支持 Apple TV 和 Android TV 的实验性开发。这一激动人心的进展必将延续到 macOS、visionOS 等领域...
- 📖 [Expo 改进的 Metro 打包工具文档](https://docs.expo.dev/guides/customizing-metro/): 详解代码分包、摇树优化和压缩原理，以及 Metro 如何应用于 Web 端。
- 📜 [开发者必知的环境变量使用指南](https://expo.dev/blog/what-are-environment-variables): 正确处理 RN 中的环境变量至关重要，否则可能导致密钥泄露至客户端。
- 📜 [使用 @expo/fingerprint 为原生运行时生成指纹](https://expo.dev/blog/fingerprint-your-native-runtime): 判断 RN 应用的 JS 包更新是否需要重新构建原生代码是个复杂问题。Expo SDK 50 推出的 Fingerprint 功能通过生成代表应用“原生接口层”的哈希值，可精准触发原生构建。
- 📜 [使用 EAS Update 的 6 大理由](https://expo.dev/blog/6-reasons-to-use-eas-update): 你听说过重新发布功能吗？阅读本文前我也不了解。当升级出错时，你可以快速回滚至之前可用的版本！
- 📜 [如何使用 Expo 配置插件为文件添加新目标平台？](https://www.reactnativecrossroads.com/posts/config-plugin-expo-add-target)
- 📦 [React Native Storybook 7 - 支持 CSF 3、TypeScript、Markdown、自动加载故事、控件自动生成](https://storybook.js.org/blog/react-native-storybook-7/)
- 📦 [React Native Test App 3.1 - 支持无桥模式](https://github.com/microsoft/react-native-test-app/releases/tag/3.1.0)
- 🎥 [William Candillon - 2024 年的 JavaScript 动画](https://www.youtube.com/watch?v=AHh3Bt7JpRs): 新版 Reanimated 将支持 JavaScript 生成器。William 使用 while (true) 循环中的 yield 语法重写了 3 个自定义 Reanimated 动画示例。
- 🎥 [Simon Grimm - React Native 的黄金时代已至](https://www.youtube.com/watch?v=COH_XhlMyZ4)
- 🎙️ [RNR 287 - 特别嘉宾 Charlie Cheever](https://reactnativeradio.com/episodes/rnr-287-special-guest-charlie-cheever): 我始终认为 Expo 是 React Native 的上层封装。但你知道 Charlie Cheever 和 James Ide 在 React Native 诞生前就开始开发 Expo 了吗？
- 🎙️ [Rocket Ship 28 - 与 Evan Bacon 探讨 Expo Router 和通用 React Native 应用](https://share.transistor.fm/s/e9f2b98e)
- 🎙️ [The React Native Show 34 - 2023 年 React Native 现状调查结果](https://www.callstack.com/podcasts/state-of-react-native-2023)

---

## 🔀 其他 {#other}

- 👀 [Interop 2024 仪表盘 - 今年浏览器将优先实现哪些功能](https://wpt.fyi/interop-2024)
- 👀 [Express Forward - Express v5、v6、v7 的发展规划](https://github.com/expressjs/discussions/issues/160)
- 📜 [无服务架构的下一站：有状态化](https://sunilpai.dev/posts/the-future-of-serverless/)
- 📜 [TotalTypeScript - 慎用方法简写语法](https://www.totaltypescript.com/method-shorthand-syntax-considered-harmful)
- 📜 [TotalTypeScript - 当 'as never' 成为唯一解决方案时](https://www.totaltypescript.com/as-never)
- 📜 [为我的自动化游戏榨取 JavaScript 性能的最后一滴](https://ruoyusun.com/2024/01/23/cividle-optimization.html)
- 📜 [2024年网站图标最佳实践：六文件覆盖绝大多数场景](https://evilmartians.com/chronicles/how-to-favicon-in-2021-six-files-that-fit-most-needs)
- 📜 [在验证器中使用品牌类型](https://stack.convex.dev/using-branded-types-in-validators)
- 📦 [Turborepo 1.12 发布](https://turbo.build/blog/turbo-1-12-0)
- 📦 [jQuery 4.0.0 beta 版发布](https://blog.jquery.com/2024/02/06/jquery-4-0-0-beta/)

---

## 🤭 轻松一刻 {#fun}

[![alt](/emails/issues/173/meme.jpg)](https://twitter.com/wesbos/status/1754347448623890719)

下期见！👋