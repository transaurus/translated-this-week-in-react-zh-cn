---
slug: /123
title: "This Week In React #123: TanStack Router, Gatsby, Remix, Next.js, React-Three-Fiber, Astro, Expo, Open Native, Rome..."
authors: [slorber]
date: 11-08-2022
---

大家好！

本周举办了[Jamstack Conf](https://jamstack.org/conf/)，期间发布了诸多重要公告，如Tanstack Router、Gatsby 5以及年度调查报告结果。

Expo发布了卓越的SDK 47版本。React-Native 0.71的首个候选版本导致了一些Android构建问题😅。

Next.js和React-Native现在新建项目时都默认采用TypeScript。

最后机会使用优惠码[TWIR](https://threejs-journey.com/join/TWIR)购买[Three.js Journey](https://threejs-journey.com/)课程（立减30%，明日失效）。该课程刚完成[升级](https://twitter.com/bruno_simon/status/1585222892769497089)，新增24小时React-Three-Fiber教学模块。借此机会推荐[Maxime Heckel的博客](https://blog.maximeheckel.com/)，他去年参加课程后已能创作惊艳的3D作品！最新发布的[粒子效果详解文章](https://blog.maximeheckel.com/posts/the-magical-world-of-particles-with-react-three-fiber-and-shaders/)尤为出色。

<!-- truncate -->

**💡 [在Twitter查看本期简报](https://slo.im/thread) - 可视化排版 🎨**

---

import Support from "../_support.mdx";

<Support />

---

## 💸 赞助商 {#sponsor1}

[![Sizzy - 开发者专属浏览器](/emails/issues/220/sizzy.jpg)](https://sizzy.co/?utm_campaign=newsletter&utm_source=thisweekinreact)

为何其他行业都有专业工具，而网页开发者还在用祖母网购的浏览器？

若您未使用Sizzy浏览器访问localhost:3000，就是在浪费宝贵时间。

**使用前：** 网页开发压力大，响应式设计困难，标签页和应用堆积如山。

**使用后：** 所有工具集成一处，响应式设计轻松搞定，无需频繁切换环境。

立即[下载](https://sizzy.co/?utm_campaign=newsletter&utm_source=thisweekinreact)，享受14天免费试用！

---

## ⚛️ React动态 {#react}

[![TanStack Router](/emails/issues/123/tanstack-router.png)](https://tanstack.com/router/v1)

**[TanStack Router](https://tanstack.com/router/v1)**

Tanner揭幕全新项目：100%类型安全、框架无关的路由器。功能亮点包括：

- URL状态管理
- 内置缓存
- 搜索参数模式/验证
- 自动预加载
- 加载器/动作
- 异步组件+代码分割

初看借鉴了Remix和React-Router的理念，但API设计迥异且未采用JSX，这有助于实现框架无关和类型安全。目前仅提供React适配器，文档尚不完善，但前景可期！

🔗 **相关链接**：

- 🐦 [Tanner Linsley](https://twitter.com/tannerlinsley/status/1590101866385489929)在Twitter发布项目并配有精彩预告片！
- 🐦 [Ryan Florence](https://twitter.com/ryanflorence/status/1590194770936463362)表示可借鉴其设计提升Remix类型安全性。

---

[![Gatsby 5: 迄今最快的Gatsby](/emails/issues/123/gatsby5.png)](https://www.gatsbyjs.com/blog/gatsby-5/)

**[Gatsby 5: 迄今最快的Gatsby](https://www.gatsbyjs.com/blog/gatsby-5/)**

Gatsby 5.0 已正式发布。该版本引入了 Gatsby Slice API，可在修改布局元素（如页眉、页脚等）时显著提升构建速度，并实验性支持了实现部分水合的服务器组件。此外还新增了 Head/Script 组件、GraphiQL v2 等功能。

Gatsby 同时推出了云端服务 [Valhalla](https://www.gatsbyjs.com/products/valhalla-content-hub/)，通过 Gatsby 源插件构建解耦的内容中心与统一 GraphQL API。有趣的是，[Valhalla 也可用于 Next.js 项目](<https://github.com/gatsby-inc/valhalla-examples/blob/main/frameworks/nextjs/app/(pets)/page.tsx>)。

静态站点生成器当前虽非主流，但仍适用于许多场景。很高兴看到至少有一个重要玩家仍在持续创新。Slice API 的设计理念颇具亮点。不过 Valhalla 目前仅限云端服务，若能支持本地运行会更理想。

🔗 **实用链接**：

- 📜 [Gatsby 5.0 发布说明](https://www.gatsbyjs.com/docs/reference/release-notes/v5.0/)
- 📜 [Valhalla 内容中心详解](https://www.gatsbyjs.com/blog/valhalla-content-hub-explained/)
- 📜 [Gatsby 5 升级指南：拒绝盲目操作](https://www.gatsbyjs.com/blog/gatsby-5-upgrade-say-no-to-yolo/)
- 📜 [部分水合（实验版）原理解析](https://www.gatsbyjs.com/blog/partial-hydration-beta-explained/)
- 📜 [Gatsby Slice API：高精度增量构建](https://www.gatsbyjs.com/blog/gatsby-slice-api/)
- 🎥 [Valhalla 内容中心视频介绍](https://www.youtube.com/watch?v=JvHvwZZAOl0)

---

[![Remix 的 React Router 化改造](/emails/issues/123/reactroutering.png)](https://remix.run/blog/react-routering-remix)

**[Remix 的 React Router 化改造](https://remix.run/blog/react-routering-remix)**

React-Router 6.4 已吸纳多项 Remix 数据 API 特性。如今 Remix 正式宣布将基于新版 React-Router API 进行重构，升级过程将通过 Remix v1.x 的四个向后兼容阶段逐步完成（配合特性标志启用）。最终目标是让 Remix v2 成为 React-Router 6.4 的编译器。

🔗 **实用链接**：

- 🗺 [基于 Router v6.4 的 Remix 改造](https://github.com/remix-run/remix/issues/4485)
- 💬 [Remix RFC - v2 元数据 API](https://github.com/remix-run/remix/discussions/4462)
- 💬 [Remix RFC - 扁平化路由](https://github.com/remix-run/remix/discussions/4482)
- 🎙️ [Remix + Shopify Twitter 语音讨论](https://twitter.com/i/spaces/1MnxnpombqBGO)

---

- 👀 [React Core PR - 支持将Promise作为可渲染节点](https://github.com/facebook/react/pull/25634)
- 📊 [Jamstack社区2022年度调查报告](https://jamstack.org/survey/2022/): React以71%的采用率占据主导地位，Next.js占据半数项目，Remix增长势头良好，[Docusaurus表现同样亮眼](https://twitter.com/sebastienlorber/status/1590042329255391232) 😜
- 📜 [React Router 6的延迟数据获取](https://dev.to/infoxicator/react-router-6-deferred-fetch-4k68): 精彩文章详解`defer` API的使用方法，并揭示处理错误和避免瀑布流请求时需注意的细节
- 📜 [使用fontaine降低Docusaurus的累积布局偏移](https://blog.logrocket.com/docusaurus-using-fontaine-reduce-cumulative-layout-shift/): [@next/font](https://nextjs.org/blog/next-13#nextfont)采用的优化技术同样适用于其他框架（不限于Docusaurus）以提升CLS评分
- 📜 [Astro实践：在React与Vue组件间共享状态](https://blog.bitsrc.io/playing-with-astro-sharing-state-between-react-and-vue-components-2d5abc89f4b4): 演示React与Vue如何在Astro应用中协同工作，并通过nanostores实现状态共享
- 📜 [Remix的极简之道](https://bradgarropy.com/blog/remix-simplifies-things): Brad阐述钟爱Remix的原因——减少JavaScript/React代码量，回归HTML本质。相比传统样式表链接API，搭配Tailwind使用更为便捷
- 📜 [为何我放弃Django转向NextJS](https://billprin.com/2022/10/30/ditched-django-nextjs.html): 原Google Compute Engine的"Python开发者"Bill最终推荐使用Next.js（或至少选择JS/TS），并建议Web项目避免采用Python/Ruby
- 📜 [Storybook与Hydrogen的集成指南](https://wemakewebsites.com/blog/devguide-how-to-integrate-storybook-with-hydrogen/): 集成过程较为复杂，需正确配置Vite
- 📜 [Next.js 13新特性解析](https://blog.appsignal.com/2022/11/02/whats-new-in-nextjs-13.html): 全面解读Next.js v13的新功能
- 📜 [CSR、SSR、SSG与ISR核心概念解析](https://www.flavienbonvin.com/data-building-strategy-for-nextjs-app/): Next.js v13发布前的渲染策略全景解读
- 📜 [在React中实现3D图形](https://blog.openreplay.com/implementing-3d-graphics-in-react/): React-Three-Fiber入门指南
- 📜 [用React Three Fiber与着色器创造粒子魔法世界](https://blog.maximeheckel.com/posts/the-magical-world-of-particles-with-react-three-fiber-and-shaders/): 使用React-Three-Fiber和帧缓冲对象创建粒子场景的进阶教程
- 🎨 [Taxonomy - 采用Next.js 13所有新特性的开源应用](https://github.com/shadcn/taxonomy)
- 🐦 [TanStack Query推出Angular版本](https://twitter.com/NetanelBasal/status/1587704203178295297): React-Query正逐步适配其他框架
- 🐦 [scheduler.yield() - 即将推出的Web API对React是否有用？](https://twitter.com/sebastienlorber/status/1589939130225475584)
- 🐦 [Next-Auth在服务器组件中实现`getServerSession()`](https://twitter.com/shadcn/status/1589671069732196352)
- 🧵 [全新`create-next-app`工具解析](https://twitter.com/leeerob/status/1589810583444287490): 默认使用TypeScript
- 🧵 [在Next.js 13的服务器组件中或许不需要Context](https://twitter.com/sebmarkbage/status/1587615484870098945): Sebastian为服务器组件提出多种替代React context的方案
- 🎥 [NextJS 13警示：常见错误导致无限循环](https://www.youtube.com/watch?v=zwQs4wXr9Bg)
- 📦 [React-Three-Next已适配Next.js v13](https://twitter.com/onirenaud/status/1587830274175295488)
- 📦 [Redux ToolKit 1.9发布](https://github.com/reduxjs/redux-toolkit/releases/tag/v1.9.0)
- 📦 [derive-zustand状态管理库](https://github.com/dai-shi/derive-zustand/)
- 📦 [Generouted 1.6 - Vite的文件路由方案](https://twitter.com/oedotme/status/1589720850051522561)
- 📦 [udomsay - 基于严格信号驱动的JSX库](https://github.com/WebReflection/udomsay)

<SubscribeFormEmbed />

---

## 💸 赞助商 {#sponsor2}

[![Jamf - 轻松保护和管理您的苹果设备](https://ucarecdn.com/f5a0c637-c59e-4b81-92d1-31bc896020c0/-/crop/250x146/0,52/-/resize/240x140/)](https://vpdae.com/redirect/p6sxgodi71psw70ruh4ypz7tfc9)

**[Jamf - 轻松保护和管理您的苹果设备](https://vpdae.com/redirect/p6sxgodi71psw70ruh4ypz7tfc9)**

Jamf Now 是一款面向苹果设备的移动设备管理(MDM)解决方案。该方案可轻松完成设备管理任务，如配置Wi-Fi和电子邮件设置、部署应用程序、保护敏感公司数据以及强制执行密码策略。Jamf Fundamentals套餐包含额外的安全功能，包括恶意软件防护以防止恶意威胁在设备上运行。注册后可免费管理最多3台设备，每增加一台设备每月仅需2美元。如需更强大功能，可升级至Jamf Fundamentals套餐，免费管理3台设备后每增加一台设备每月收费4美元。

<img src="https://www.vpdae.com/open/5031.gif?opens=1" width="1" height="1" />

---

## 📱 React-Native {#react-native}

[![Expo SDK 47](/emails/issues/123/expo47.png)](https://blog.expo.dev/expo-sdk-47-a0f6f5c038af)

**[Expo SDK 47](https://blog.expo.dev/expo-sdk-47-a0f6f5c038af)**

新版SDK 47已正式发布，详细更新内容可参阅专题文章。

- 搭载React Native 0.70.5和React 18.1.0
- Expo Modules API 1.0支持使用Swift/Kotlin轻松创建原生Fabric模块
- Expo Go iOS版支持Hermes引擎，调试体验更简化。下个SDK版本将默认启用Hermes
- 多个Expo模块已支持Fabric架构
- Expo Router进入测试阶段：为React-Navigation提供文件系统路由功能
- EAS多项改进：端到端安全性、M1处理器支持...

简而言之，这是个非常出色的版本！相比官方工具如尚未支持Swift的react-native-codegen，Expo Modules显然更便于采用新架构。

---

- 📦 [React-Native 0.71 RC.0](https://twitter.com/CipolleschiR/status/1588578757857533952)：包含TypeScript类型定义，新应用默认采用TypeScript，支持Flex间隙布局... 该版本曾导致[Android构建中断](https://twitter.com/reactnative/status/1589296764678705155)（现已[修复](https://twitter.com/reactnative/status/1589394317126565888)）
- 👥 [Open Native：通用原生模块](https://github.com/OpenNative/open-native)：通过平台无关的原生模块和适配器，减少跨生态（React-Native/Flutter/Capacitor/NativeScript等）开发重复工作的创新方案
- 📜 [将React Native库迁移至新架构](https://www.callstack.com/blog/migrating-a-react-native-library-to-the-new-architecture)：Oscar详细记录将React-Native Slider迁移到Fabric的过程，列举遇到的挑战，并说明迁移现有库或创建新库的4个关键步骤
- 📜 [为EAS Update引入端到端代码签名安全机制](https://blog.expo.dev/introducing-end-to-end-security-to-eas-update-with-code-signing-b6a14d0d88d4)
- 📜 [Flutter与React Native深度对比：如何选择跨平台框架？](https://stackoverflow.blog/2022/10/31/comparing-frameworks-for-cross-platform-apps-flutter-vs-react-native/)
- 💬 [RFC：Metro包导出支持](https://github.com/react-native-community/discussions-and-proposals/pull/534) + [Node.js定义"react-native"社区条件](https://github.com/nodejs/node/pull/45367)
- 💬 [RFC：布局一致性/兼容性愿景](https://github.com/react-native-community/discussions-and-proposals/pull/540/)
- 🎉 [React-Native新应用默认启用TypeScript](https://github.com/facebook/react-native/pull/35165)
- 🎙️ [RNR第251期：深度解析React Native 0.70](https://reactnativeradio.com/episodes/rnr-251-examining-react-native-070)
- 🎥 [React-Native蓝牙低功耗(BLE)数据收发教程](https://www.youtube.com/watch?v=jeH2QmZ8T14)
- 🎥 [React-Native动画FlatList实现](https://www.youtube.com/watch?v=3ox0R5jPb04)
- 📦 [Storybook-Solito集成方案](https://github.com/dannyhw/storybook-solito)

---

## 🧑‍💻 职位推荐 {#jobs}

🧑‍💼 [**Causal招聘产品工程师（远程/伦敦/纽约，15-25万美元）**](https://jobs.lever.co/causal-app/4acaafbe-ef3d-45a6-bbe6-687c022d727c?lever-origin=applied&lever-source%5B%5D=thisweekinreact.com)

Causal是Coatue/Accel投资的A轮初创公司，致力于构建数字处理与数据可视化一体化工具。诚聘能解决复杂UX/性能问题的资深React工程师

🧑‍💼 [**G2i高薪远程React Native职位（16万美元+10%奖金）**](https://twitter.com/gabe_g2i/status/1563204813881425926?s=20&t=ArRLC77BpRwXXCdx8fnUqw)

招聘多名具有React Native生产环境经验的开发者！需美国本土工作，薪资约16万美元外加10%奖金。联系[@gabe_g2i](https://twitter.com/gabe_g2i)时请注明通过This Week in React获悉

💡 [如何发布招聘信息？](https://thisweekinreact.com/sponsor)

---

## 🔀 其他资讯 {#other}

- [Rome v10 正式发布](https://rome.tools/blog/2022/11/08/rome-10.html)：Rome 工具链的首个稳定版本，旨在用更快速、更易用的 Rust 方案替代 ESLint/Prettier。最吸引人的并非速度优势，而是其错误恢复机制和友好的报错信息。
- [CodeSandbox GitHub 应用发布](https://codesandbox.io/post/introducing-the-codesandbox-github-app)：通过集成功能简化 PR 贡献和代码审查流程，这与近期推出的 [StackBlitz Codeflow](https://stackblitz.com/codeflow) 理念相似但技术实现迥异。
- [Jest 优于 Vitest](https://bradgarropy.com/blog/jest-over-vitest)：Brad 在尝试迁移至 Vitest 后，因执行速度未显著提升且存在适配问题，决定暂缓切换测试框架。
- [Vitest 0.25](https://github.com/vitest-dev/vitest/releases/tag/v0.25.0)：新增对 TypeScript 类型测试的支持
- [TypeScript PR - 将 TypeScript 转换为模块](https://twitter.com/sebastienlorber/status/1589958856561434624)：TypeScript 5.0 中 tsc 编译速度将提升 10-25%
- [Xata - 面向现代开发者的无服务器数据平台](https://twitter.com/xata/status/1587794475274969088)
- [Tina CMS 1.0 发布](https://tina.io/blog/tina-1-0-announcement/)
- [Safari Technology Preview 157](https://webkit.org/blog/13575/release-notes-for-safari-technology-preview-157/)
- [ESLint - consistent-type-imports 规则](https://github.com/typescript-eslint/typescript-eslint/pull/5050)
- [无 JavaScript 的客户端路由方案](https://dev.to/this-is-learning/client-side-routing-without-the-javascript-3k1i)
- [性能：Rust 与 Node.js 的协同关系](https://sprkl.dev/performance-rust-node-js/)
- [JavaScript 中的 realm 是什么？](https://weizman.github.io/page-what-is-a-realm-in-js/)
- [Tailwind CSS 五周年](https://twitter.com/adamwathan/status/1587128677724291074)
- [2022年10月 Web 平台新特性](https://web.dev/web-platform-10-2022/)
- [Protobuf-ES：理想的 Protocol Buffers TypeScript/JavaScript 运行时](https://buf.build/blog/protobuf-es-the-protocol-buffers-typescript-javascript-runtime-we-all-deserve)
- [ESLint v8.27 发布](https://eslint.org/blog/2022/11/eslint-v8.27.0-released/)
- [Node.js 取消 fetch 实验性警告](https://twitter.com/matteocollina/status/1588966117393203203)
- [Node.js 2022年11月3日安全更新](https://nodejs.org/en/blog/vulnerability/november-2022-security-releases/)
- [Playwright 新增 getBy 系列 API](https://dev.to/playwright/playwright-now-has-new-getby-apis-1iad)

---

## 🤭 轻松一刻 {#fun}

[![上周实况 - React-Native 0.71 小骨牌倒下引发历史版本大骨牌连锁反应](/emails/issues/123/meme.png)](https://twitter.com/swmansion/status/1589571114048851968)

更多趣味内容请查看这个汇集所有发现的 [Twitter 话题](https://slo.im/fun)，其中许多内容因每周精选机制从未在新闻简报中刊登。

[![本周 React 趣味集锦](/emails/fun-banner.png)](https://slo.im/fun)