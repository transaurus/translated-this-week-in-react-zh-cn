---
slug: /203
title: "This Week In React #203: Server Functions, DevTools, Next.js, React-Query, React Router, React-Aria, Vaul, Remotion, Skia, Native Tabs, Godot, CodePush, void(0), Oxc, Node.js, Tauri..."
authors: [slorber]
date: 10-01-2024
---

大家好！

本周我们有许多有趣的新闻和发布！

值得注意的是，Server Actions 的术语发生了重要变更，同时还有 React DevTools v6 的预览版。

在 React Native 方面，我们也有大量有趣的新闻和激动人心的包预览！

另外，我的表情包游戏回归了。你会在最后明白的 😂

查看我们的合作伙伴会议 [React Day 🇩🇪 柏林](https://reactday.berlin/?utm_source=Newsletter&utm_medium=thisweekinreact)（12月13日 & 16日）。使用我们的代码 TWIR 可享受 10% 折扣。

<!-- truncate -->

**💡 [在 Twitter 上查看这份简报](https://slo.im/thread) - 视觉格式 🎨**

---

import Support from "../_support.mdx";

<Support />

---

## 💸 赞助商 {#sponsor1}

[![通过 Omlet 追踪 {React} 组件并减少技术债务。](/emails/issues/203/omletad3x.png)](https://omlet.dev/?utm_campaign=partner_this-week-in-react_newsletter-first-oct-2024)

**[通过 Omlet 追踪 \{React} 组件并减少技术债务。](https://omlet.dev/?utm_campaign=partner_this-week-in-react_newsletter-first-oct-2024)**

了解 React 组件在开发团队中的使用情况。Omlet 为您提供组件库的完整可见性，以证明设计系统的商业价值、减少技术债务并跟踪项目中的采用情况。Omlet 帮助您识别遗留组件的隐藏位置、发现未使用的属性、改进组件库并简化迁移。

[在不到 5 分钟内生成可操作的报告。](https://omlet.dev/?utm_campaign=partner_this-week-in-react_newsletter-first-oct-2024) 分析代码使用情况并查看设计系统随时间的影响。

立即免费试用 Omlet，保持代码整洁：[omlet.dev](https://omlet.dev/?utm_campaign=partner_this-week-in-react_newsletter-first-oct-2024)

---

## ⚛️ React {#react}

[![Server Actions 已更名为 Server Functions](/emails/issues/203/serverfunctions.jpg)](https://19.react.dev/reference/rsc/server-functions)

**[Server Actions 已更名为 Server Functions](https://19.react.dev/reference/rsc/server-functions)**

这不是代码变更，但这是一个重要的术语变更，现已正式发布在 React v19 文档网站上。Server Actions 现在被视为更广泛的 Server Function 功能的一个子集。只有在以下情况下才会成为 action：

- `<form action>`
- `useActionState()`
- `startTransition()`

这一变更澄清了“use server”是关于暴露一个服务器端点，而不仅限于变更操作。使用 Server Functions 获取数据和 JSX 可能不再是一种反模式。

**关于 Next.js Server Actions**：它们使用 `POST` 请求并按顺序运行，但这是 Next.js 的实现细节，React 并不阻止您并行运行 actions。Next.js 团队已确认他们打算引入新的 API 来使用 `GET` 调用 Server Functions。

---

[![React DevTools 6.0](/emails/issues/203/devtools.jpg)](https://github.com/facebook/react/blob/main/packages/react-devtools/CHANGELOG.md#600)

**[React DevTools 6.0](https://github.com/facebook/react/blob/main/packages/react-devtools/CHANGELOG.md#600)**

近期React DevTools投入了大量开发工作，其中最引人注目的是实现了服务端组件与客户端组件的统一可视化树形展示。虽然浏览器扩展尚未发布，但v6版本的更新日志已公开，其中包含大量PR和功能截图。从现有资料来看，开发团队在元素检查、性能分析、日志记录、堆栈追踪和源码映射等方面做了卓越的工程优化，显著提升了开发者体验。

---

- 💸 [React Bricks - 将React组件转化为可动态可视化编辑的内容模块，开创性的React可视化无头CMS。](https://www.reactbricks.com/?utm_source=twir&utm_campaign=ql24)
- 👀 [Next.js PR - 将动态API更新为异步](https://github.com/vercel/next.js/pull/68812)：上周提到的PR（将`cookies()`、`headers()`和`searchParams`等API改为异步）已合并并发布在Next.js 15 canary 171中。相关库可能需要调整代码（如[nuqs](https://x.com/fortysevenfx/status/1839158893710033141)）或引入破坏性变更（如[Clerk](https://x.com/tweetsbycolin/status/1839273740577759603)）。迁移指南即将发布。
- 👀 [Next.js PR - 新增`connection()`作为动态API](https://github.com/vercel/next.js/pull/69949)：这个新API将取代`unstable_noStore()`用于退出预渲染。
- 🐦 [React核心 - 惰性上下文传播已在React 19和React Native中启用](https://x.com/sebastienlorber/status/1841042683122286641)：虽然不会直接影响开发者，但这是为优化React Context消费性能奠定基础的重要实现细节变更。
- 🐦 [React Router - 类型安全改进预览](https://x.com/pcattori/status/1841166684180402378)：React Router即将支持通过CLI手动或TS插件自动生成类型定义以提升类型安全。
- 🗓️ [React-Brussels](https://www.react.brussels/?utm_source=thisweekinreact) - 🇧🇪 布鲁塞尔 - 10月18日 - 最后召集！仍有机会购票，别忘了使用代码"TWIR"享受[10%折扣](https://ti.to/react-rally/react-rally-2024/discount/TWIR)。
- 🗓️ [React Summit US](https://reactsummit.us/?utm_source=Newsletter&utm_medium=thisweekinreact) - 🇺🇸 纽约 - 12月19日 & 22日 - 使用代码TWIR享10%折扣。完整议程已公布！
- 📜 [Cloudflare Builder Day 2024 - Workers平台18项重大更新](https://blog.cloudflare.com/builder-day-2024-announcements/)：Cloudflare发布了与React开发者相关的公告，包括改进Node.js兼容性和静态资源支持。他们还加入OpenNext计划并发布新适配器以减少Next.js对Vercel的依赖。
- 📜 [使用DMNO提升Next.js环境变量工具链](https://dmno.dev/blog/dmno-nextjs-launch/)：这个工具能有效防止RSC场景下的敏感信息泄露，同时支持Remix、Astro和Vite。
- 📜 [React Hooks的潜规则](https://macwright.com/2024/09/19/the-extra-rules-of-hooks)：React返回的某些函数（如`setState`）具有稳定性保证，无需加入依赖数组。这一规则是隐式的，第三方库无法声明其返回函数的稳定性。
- 📜 [SSR友好的React本地存储自定义Hook](https://www.nico.fyi/blog/ssr-friendly-local-storage-react-custom-hook)：使用`useSyncExternalStore`读取`localStorage`可避免hydration不匹配，但需解决当前文档不触发storage事件的问题。
- 📜 [React开发者CSS动画入门](https://www.developerway.com/posts/intro-to-css-animations-for-react-devs)：交互式文章重点解析了卸载与动画的冲突问题。
- 📜 [use()与数据获取](https://flaviocopes.com/use-and-data-fetching/)：将数据获取从`useEffect`迁移到RSC，同时展示React序列化Promise的能力。
- 📜 [Next.js中的可靠日期格式化](https://next-intl-docs.vercel.app/blog/date-formatting-nextjs)：为避免hydration不匹配，需在客户端/服务端使用相同的日期/时区/区域设置。`next-intl`提供了相关API支持。
- 📜 [反向断言](https://www.epicweb.dev/inverse-assertions)：React Testing Library中用于断言副作用未发生的技巧。
- 📜 [React组件类型演进](https://www.robinwieruch.de/react-component-types/)：记录2013至2024年的组件类型发展。
- 📜 [代理状态管理：MobX vs Valtio](https://www.frontendundefined.com/posts/monthly/proxy-state-management-mobx-valtio/)
- 📦 [React Query 5.59 - 实验性`use()`支持](https://github.com/TanStack/query/releases/tag/v5.59.0)：启用`experimental_prefetchInRender`选项后，库将返回稳定的Promise便于与React 19 Suspense集成，比`usePrefetchQuery`更便捷且避免`useSuspenseQuery`的瀑布流问题。
- 📦 [Live Compositor - 实时直播混流的React渲染器](https://compositor.live/)：Software Mansion推出的创新产品，通过React接口实现类似OBS的实时音视频混流功能。开源但需商业授权。
- 📦 [React Aria - 2024年9月30日更新 - 稳定版颜色选择器、按钮等待状态、测试版树组件、手风琴组件](https://react-spectrum.adobe.com/releases/2024-09-30.html)
- 📦 [Vaul 1.0 - React抽屉组件 - 重构优化并更新文档](https://github.com/emilkowalski/vaul/releases/tag/v1.0.0)
- 📦 [Framer-Motion 11.9 - 更轻量的`useAnimate()`，基于Web动画API](https://www.framer.com/motion/use-animate/#usage)
- 📦 [React-admin - 2024年10月更新](https://marmelab.com/blog/2024/09/27/react-admin-october-2024-update.html)
- 🎥 [Remotion登陆《鲨鱼坦克》- 在电视节目推介编程框架](https://www.youtube.com/watch?v=XzY1ukohYdA)：首个登上《鲨鱼坦克》的React框架，并成功获得投资意向！
- 🎥 [Delba解析React：'use client'](https://www.youtube.com/watch?v=eO51VVCpTk0)：深入浅出的讲解，再次展现Remotion的强大应用。
- 🎥 [Theo谈Next.js迎来真正竞争对手（TanStack Start）](https://www.youtube.com/watch?v=nz43Vuy9_dE)
- 🎥 [Jack Herrington - Legend State v3 - 本地优先同步的最快React状态管理方案](https://www.youtube.com/watch?v=xkWvDG6uEfk)
- 🎙️ [2024年9月React月刊 - 异步组件、React 19备忘单、静态Hermes及商标争议](https://podcasters.spotify.com/pod/show/reactiflux/episodes/TMiR-2024-09--Async-Components----a-React-19-cheatsheet--static-Hermes--and-trademarks-drama-e2p2o6j)

<SubscribeFormEmbed placement="middle" />

---

## 💸 赞助商 {#sponsor2}

[![WorkOS: 面向B2B SaaS的现代身份平台](/emails/issues/195/workOS.jpg)](https://workos.com/?utm_source=thisweekinreact&utm_medium=newsletter&utm_campaign=q32024)

**[WorkOS: 面向B2B SaaS的现代身份平台](https://workos.com/?utm_source=thisweekinreact&utm_medium=newsletter&utm_campaign=q32024)**

通过WorkOS，仅需几行代码即可开始向企业客户销售产品。

🔐 WorkOS AuthKit提供完整的用户管理解决方案，支持**单点登录(SSO)、跨域身份管理系统(SCIM)、基于角色的访问控制(RBAC)和细粒度授权(FGA)**。

🏗️ API设计**灵活、易用且模块化**。按需选择功能，几分钟即可完成集成。

🎨 设计与用户体验至关重要。从文档质量到用户 onboarding 流程，我们**为开发者消除所有不必要的复杂性**。

✨ AuthKit**免费支持高达100万月活跃用户(MAU)**，包含机器人防护、多因素认证(MFA)、基于角色的访问控制等功能。

🤝 WorkOS获得数百家领先初创公司信任，包括**Perplexity**、**Vercel**和**Webflow**。

[立即体验WorkOS](https://workos.com/?utm_source=thisweekinreact&utm_medium=newsletter&utm_campaign=q32024) 🚀

---

## 📱 React-Native {#react-native}

- 💸 [React Native Mastery - 掌握React Native与Expo的唯一课程](https://notjust.dev/react-native-mastery?utm_source=twir&utm_medium=email)
- 👀 [React Native PR - 将模板迁移至Swift](https://github.com/react-native-community/template/pull/45): 从React Native 0.77开始，新初始化的项目将默认使用Swift。
- 👀 [React Native提案 - 从CLI开发服务器移除"在iOS/Android上运行"的按键处理](https://github.com/react-native-community/discussions-and-proposals/discussions/821)
- 🐦 [React-Native-Godot预览](https://x.com/JannisRingwald/status/1840827419562836103): 即将推出的包将允许React Native开发者使用Godot引擎开发游戏。
- 🐦 [React-Native-Bottom-Tabs预览](https://x.com/o_kwasniewski/status/1841383968148509149): Oskar正在开发基于SwiftUI TabView和Android BottomNavigationView的原生标签页组件。与react-native-screens兼容，它几乎是React-Navigation中基于JS实现的直接替代品。演示突出了原生/JS实现在VisionOS平台上的差异。
- 🐦 [Tzvetan Mikov - "Hermes中Intl的问题"](https://x.com/tmikov/status/1840575141182636469)
- 📜 [Meta为Quest头显重建了Instagram和Facebook](https://techcrunch.com/2024/09/25/meta-has-rebuilt-instagram-and-facebook-for-its-quest-headsets/): 公告未涉及技术细节，但该VR体验基于React Native构建并运行在Static Hermes上。**编辑**：这篇[更技术性的博客文章](https://engineering.fb.com/2024/10/02/android/react-at-meta-connect-2024/)在发布前刚刚出炉！
- 📜 [如何使用TinyBase同步响应式本地优先应用](https://expo.dev/blog/how-to-synchronize-reactive-local-first-apps-with-tinybase)
- 📜 [通过RootViewFactory简化iOS棕地集成](https://www.callstack.com/blog/simplify-your-ios-brownfield-integration-with-rootviewfactory)
- 📦 [React-Native-Skia 1.4](https://github.com/Shopify/react-native-skia/releases/tag/v1.4.0): William引入了实验性的WebGPU Canvas集成。
- 📦 [Code-Push-Server](https://github.com/microsoft/code-push-server): 微软在关闭App Center前开源了CodePush的服务器实现，以避免依赖它的应用中断。注意[React Native SDK不计划支持新架构](https://github.com/microsoft/react-native-code-push/issues/2696)，尽管有人找到了通过Interop层使其工作的方法。
- 📦 [Expo-File-System@next](https://docs.expo.dev/versions/unversioned/sdk/filesystem-next/): 即将发布的SDK 52版本已重写为更简单且完全同步的实现。
- 📦 [Expo-Speech-Recognition](https://github.com/jamsch/expo-speech-recognition): 支持iOS、Android和Web的跨平台语音识别。
- 📦 [Pressto - 通过可按压微交互提升应用体验](https://github.com/enzomanuelmangano/pressto)
- 📦 [Lottie v1.0规范](https://www.linuxfoundation.org/press/lottie-animation-community-announces-lottie-v1.0-specification)
- 📦 [React-Native-Gesture-Handler 2.20 - 新增v0.76和触控笔支持](https://github.com/software-mansion/react-native-gesture-handler/releases/tag/2.20.0)
- 📦 [React-Native 0.76.0-rc.3](https://github.com/facebook/react-native/releases/tag/v0.76.0-rc.3)
- 🎥 [React Native Universe 2024 - 大会视频集](https://www.youtube.com/watch?v=ayJTvbIFLuw&list=PLZ3MwD-soTTGAEY8kZD3tgXGTwojn5qYh)
- 🎥 [Reactiive - 使用Skia制作动画加载器](https://www.youtube.com/watch?v=7pCiGUrJuow)
- 🎥 [Dan's Lab - 通过Skia为Expo iOS应用添加计算机视觉(高尔夫挥杆轨迹追踪)](https://www.youtube.com/watch?v=a51ofzf2rDo)
- 🎥 [Simon Grimm - 每位开发者必须知道的10个React Native技巧](https://www.youtube.com/watch?v=zuFh9lfb4HY)
- 🎙️ [RNR 309 - 与Krzysztof Magiera探讨React Native IDE](https://www.reactnativeradio.com/episodes/rnr-309-react-native-ide-with-krzysztof-magiera)

---

## 🔀 其他 {#other}

- 📨 [ECMAScript 动态 - 我最喜欢的ES标准、TC39、JS工具链和运行时追踪简报](https://ecmascript.news/?utm_source=thisweekinreact)
- 📣 [VoidZero发布公告 - 下一代JavaScript工具链](https://voidzero.dev/posts/announcing-voidzero-inc): 尤雨溪宣布成立VC支持的`void(0)`公司，旨在开发包括Vite、Vitest、Rolldown、Oxc在内的超快JS工具链。这些项目将继续保持MIT开源协议。
- 👀 [Node.js PR - 在v23中取消require(esm)的实验性标志](https://github.com/nodejs/node/pull/55085): Node.js的CJS/ESM模块互操作迎来利好，该特性将向后移植到旧版LTS。
- 📜 [Web组件不是未来](https://dev.to/ryansolid/web-components-are-not-the-future-48bh): 当前Web组件领域正引发争议，多位技术领袖发表了观点。
- 📜 [HTML的dialog元素与popovers属性有何区别？](https://frontendmasters.com/blog/whats-the-difference-between-htmls-dialog-element-and-popovers/)
- 📦 [Oxc转换器Alpha版 - 比SWC快5倍的代码转换](https://oxc.rs/blog/2024-09-29-transformer-alpha.html)
- 📦 [Tauri 2.0发布](https://v2.tauri.app/blog/tauri-20/)

---

## 🤭 轻松一刻 {#fun}

[![梗图](/emails/issues/203/meme.jpg)](https://x.com/sebastienlorber/status/1839661750498578602)

[![梗图](/emails/issues/203/meme2.jpg)](https://x.com/sebastienlorber/status/1840765064246112276)

[![梗图](/emails/issues/203/meme3.jpg)](https://x.com/sebastienlorber/status/1841110004792696850)

下期见！👋