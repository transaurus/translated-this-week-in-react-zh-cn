---
slug: /122
title: "This Week In React #122: Next.js 13, Turbopack, Remixing Shopify, React-Three-Fiber Journey, Gatsby Valhalla, Expo 47, Rive, Storybook, Asta..."
authors: [slorber]
date: 11-01-2022
---

大家好！

这真是充满转折的精彩一周！

- Next.js 13让我们得以体验React最新创新成果
- Turbopack可能成为Webpack的继任者
- Shopify收购了Remix
- Gatsby即将发布v5版本并使其数据层框架无关
- Expo的SDK 47极具潜力

另外别错过Three.js Journey课程的重大更新，新增了React-Three-Fiber模块。我获得了专属优惠码["TWIR"](https://threejs-journey.com/join/TWIR)。这将成为未来我创建的"优惠"页面首个推荐课程。

我正在测试新格式！这次花费的时间远超平常😅。如果您愿意支持我继续这项工作，[转发推文](https://slo.im/thread)、撰写推荐或分享给朋友都将对我帮助巨大🙏 订阅规模越大，我就有更多机会优化内容质量。

<!-- truncate -->

**💡 [在Twitter查看本期简报](https://slo.im/thread) - 可视化格式 🎨**

---

import Support from "../_support.mdx";

<Support />

---

## 💸 赞助商 {#sponsor1}

[![Sizzy - 开发者专属浏览器](/emails/issues/220/sizzy.jpg)](https://sizzy.co/?utm_campaign=newsletter&utm_source=thisweekinreact)

为何其他行业的专业人士都有专用工具，而网页开发者还在使用祖母网购的浏览器？

如果你在非Sizzy浏览器中打开localhost:3000，就是在浪费宝贵时间。

**使用Sizzy前：** 网页开发令人焦虑，响应式设计困难重重，标签页和应用窗口泛滥成灾。

**使用Sizzy后：** 所有工具集成一处，响应式设计轻松搞定，无需频繁切换环境。

立即[下载体验](https://sizzy.co/?utm_campaign=newsletter&utm_source=thisweekinreact)，享受14天免费试用！

---

## ⚛️ React动态 {#react}

[![Next.js 13主题演讲幻灯片](/emails/issues/122/nextjs13.jpg)](https://nextjs.org/blog/next-13)

**[Next.js 13 - 无限动态能力](https://nextjs.org/blog/next-13)**

新版Next.js以beta形式引入了全新路由系统和嵌套布局。迁移过程采用渐进式可选方案：需将页面移至新的`app/`目录。此举支持React服务端组件等最新创新，并实现在Edge和Node.js运行时的SSR流式渲染。

⚡️ 其他重要改进：

- Turbopack：基于Rust的新打包工具（alpha阶段，详见下文）
- next/image：更轻量、灵活且快速的图片组件，避免布局偏移
- @next/font：高效自托管字体并防止布局抖动（另见上周介绍的[Fontaine](https://twitter.com/danielcroe/status/1586472544491950080)）

💬 业界声音：

- [Dan Abramov](https://twitter.com/dan_abramov/status/1585076899126345728) 对本次发布表示兴奋，认为其实现了React的目标架构
- [Andrew Clark](https://twitter.com/acdlite/status/1585029529361612801) 解释其争议性观点"Next.js 13才是真正的React 18发布"
- [Matt Kane](https://twitter.com/ascorbic/status/1585004156615479296) 认为React与Next.js绑定过深
- [Zach Leatherman](https://twitter.com/zachleat/status/1584995586918731776) 指出Next.js 13的Hello World示例仍包含过多JavaScript代码

🔗 实用链接：

- 🎥 [Next.js 主题演讲视频](https://www.youtube.com/watch?v=NiknNI_0J48)
- 🎥 [Fireship - Next.js 13...这将改变一切](https://www.youtube.com/watch?v=_w0Ikk4JY7U)
- 🧵 [Next.js升级指南 - 可视化线程](https://twitter.com/shadcn/status/1584971527820541953)

---

[![Turbopack主题演讲幻灯片](/emails/issues/122/turbopack.jpg)](https://vercel.com/blog/turbopack)

**[Turbopack发布：基于Rust的Webpack继任者](https://vercel.com/blog/turbopack)**

Vercel聘请了Webpack创始人Tobias Koppers开发基于Rust的超快打包工具Turbopack。目前该工具处于Alpha阶段，主要支持Next.js，功能尚有限。未来将逐步添加对其他框架（Svelte、Vue等）和功能（Tailwind等）的支持。

Turbopack针对开发者体验进行了优化，Vercel宣称其速度比Webpack快700倍，比Vite快20倍。该工具基于Turbo框架（一个能独立缓存每个函数结果的Rust记忆化框架）。Vercel还发布了包含[详细基准测试](https://turbo.build/blog/turbopack-benchmarks)的文章。

💬 业界评论：

- [Jared Palmer](https://twitter.com/jaredpalmer/status/1584971637694222336) 解释缓存机制及Turborepo/Turbopack可能的合并
- [尤雨溪](https://twitter.com/youyuxi/status/1585040261922820096) 质疑基准测试，创建了[《Turbopack真比Vite快10倍吗？》](https://github.com/yyx990803/vite-vs-next-turbo-hmr/discussions/8)讨论页。指出Vite默认不使用SWC，且基准测试基于Babel实现
- [Sebastian McKenzie](https://twitter.com/sebmck/status/1584971938786861056) 指出冷启动性能提升有限（约4倍），可能因缓存初始化开销导致
- [Devon Govett](https://twitter.com/devongovett/status/1585035737971724288) 提到其架构与Parcel相似
- [Amjad Masad](https://twitter.com/amasad/status/1585001646782033921) 指出React-Native的Metro打包器长期使用类似缓存系统

---

[![Shopify整合Remix](/emails/issues/122/remixing.jpg)](https://shopify.engineering/remix-joins-shopify)

**[Remix加入Shopify共同推动Web发展](https://shopify.engineering/remix-joins-shopify)**

Remix被Shopify收购后，将用于其Hydrogen电商元框架等项目。Hydrogen 2.0将用Remix API替代React服务端组件！Shopify认为Remix模型比服务端组件更易理解且功能更强大。

此次收购意义重大：Shopify可专注于Hydrogen的核心价值主张而非基础设施，并受益于Remix的渐进增强特性（对电商至关重要）。值得注意的是，Remix与React解耦，Shopify正在开发框架无关的[Hydrogen UI](https://github.com/Shopify/hydrogen-ui)库——既能覆盖Vue/Svelte等框架开发者，又无需强推React技术栈。

💬 业界评论：

- [Josh Larson](https://twitter.com/jplhomer/status/1587095536833859584) 曾参与 Hydrogen v1 开发，列举了遇到的挑战，但并未质疑 React Server Components 的优势——这些特性在 Next.js 13 中的实现优于 Hydrogen v1。
- [Ryan Florence](https://twitter.com/ryanflorence/status/1587171069915385856) 提到 Shopify 并不反对 Server Components，未来可能会在 Remix 中重新引入。
- [Ryan Florence](https://twitter.com/ryanflorence/status/1587090973594558464) 解释此次收购将使他们能全力投入 Remix 开发。
- [Guillermo Rauch](https://twitter.com/rauchg/status/1587104330053664768) 认为前端应该与无头后端解耦。[Anthony Frehner](https://twitter.com/frehner_a/status/1587107928099651586) 回复称 Next.js 支持即将登陆 Hydrogen UI。

🔗 实用链接：

- 📜 [Hydrogen 技术路线图](https://hydrogen.shopify.dev/roadmap/) 已更新更多技术细节
- 📜 [Shopify 重塑 Remix](https://remix.run/blog/remixing-shopify)：Remix 团队声明将保持作为独立开源 React 框架，与电商场景解耦
- 🎥 [Fireship - 当你的 JavaScript 框架被收购时](https://www.youtube.com/watch?v=HleppfVh8jc)

---

[![Three.js 课程进军 React 领域](/emails/issues/122/r3f.jpg)](https://twitter.com/bruno_simon/status/1585222892769497089)

**[Three.js 课程进军 React 领域](https://twitter.com/bruno_simon/status/1585222892769497089)**

Three.js Journey 是学习使用 Three.js 创建网页 3D 场景的权威课程。Bruno Simon 最新发布了 24 小时基于 [React-Three-Fiber](https://github.com/pmndrs/react-three-fiber) 的附加视频教程，该库为 Three.js 带来了声明式编程模型。3D 技术正在进入我们的应用领域：如果你想突破表单和业务应用的局限，现在正是学习的好时机。我也在[学习这门课程](https://github.com/slorber/react-three-fiber-journey)，收获远超预期！

Bruno 提供了限时 10 天的 ["TWIR"](https://threejs-journey.com/join/TWIR) 专属优惠码，可享 30% 折扣（立减 66 美元）。这不是赞助内容：我认为这门课程非常出色，此次更新使其对 React 开发者更具价值。

我计划很快创建优惠页面收录其他优质课程（不参与分成）。欢迎告诉我你最感兴趣的课程，方便我联系相关作者！

---

- 🤔 [React 核心 - 为重复请求添加 fetch 工具](https://github.com/facebook/react/pull/25516)：对 `fetch` 进行猴子补丁存在[争议](https://github.com/facebook/react/issues/25573)。
- 💬 [RFC - TypeScript + React - 允许函数组件渲染任意内容](https://github.com/DefinitelyTyped/DefinitelyTyped/pull/62876)
- 📜 [全栈组件](https://www.epicweb.dev/full-stack-components)：Kent C. Dodds 解释 Remix 如何实现真正的全栈组件，将前端和后端代码封装在同一文件中。Remix 的全栈模式不仅限于路由，还能通过 `useFetcher` 钩子应用于微交互场景：如点赞按钮、自动补全等。
- 📜 [React 应用中 Rive 动画的优化技巧](https://pixelpoint.io/blog/rive-react-optimizations/)：Rive 是比 Lottie 更高效的动画库。Alex 详细介绍了在 Gatsby 或 Next.js 应用中优化 Rive 动画加载的方法：自托管 WASM 运行时、Webpack 加载器、预加载、懒加载... 这些通用技巧也适用于其他场景。
- 📜 [立即在 Netlify 上部署 Next.js 13](https://www.netlify.com/blog/deploy-nextjs-13/)：Netlify 现已支持 Next.js 13 的最新特性。
- 📜 [使用 Storybook 测试运行器实现代码覆盖率](https://storybook.js.org/blog/code-coverage-with-the-storybook-test-runner/)：全面总结了 Storybook 的测试功能。现在通过 [Istanbul](https://istanbul.js.org/) 工具可以生成覆盖率报告，且报告格式可配置。
- 📜 [Gatsby Slice API：高精度增量构建](https://www.gatsbyjs.com/blog/gatsby-slice-api/)：解析 Gatsby 5 新 API 如何优化布局组件（如页眉、页脚）更新时的构建性能。
- 📜 [预填充查询缓存](https://tkdodo.eu/blog/seeding-the-query-cache)：分析了 React-Query 结合 Suspense 使用时可能出现的瀑布流问题。建议在组件挂载前使用 `prefetchQuery` 最大化加载优化，并展望了 React-Query 与最新 React 特性的整合方向。
- 📜 [使用 Fresh 构建博客](https://deno.com/blog/build-a-blog-with-fresh)：Fresh 是基于 Deno 的 Preact 框架
- 📦 [Gatsby 5](https://twitter.com/GatsbyJS/status/1587136776828772353)：新版本今日发布！[Gatsby Valhalla 内容中心](https://twitter.com/GatsbyJS/status/1587489648397410320)将支持在其他框架中使用 Gatsby 的 GraphQL 数据层！
- 📦 [Docusaurus 2.2](https://twitter.com/docusaurus/status/1586347397667495936)：新增 Mermaid 图表支持
- 📦 [Asta](https://github.com/yisar/asta)：新型可恢复 SSR 框架，受 Qwik 和 Marko 启发，采用类 React 语法。值得关注！
- 📦 [TanStack Query 4.14](https://twitter.com/TkDodo/status/1587411685517697028)：新增 ESLint 插件
- 📦 [Remix Forms 1.0](https://twitter.com/danielweinmann/status/1587465389990084609)
- 📦 [Downshift 7.0](https://github.com/downshift-js/downshift/releases/tag/v7.0.0)

<SubscribeFormEmbed />

---

## 💸 赞助 {#sponsor2}

[![Sunsama - 数千名软件工程师保持高效且避免倦怠的秘诀](/emails/issues/121/sunsama.jpg)](https://www.sunsama.com/a/this-week-in-react)

**[数千名软件工程师保持高效且避免倦怠的秘诀](https://www.sunsama.com/a/this-week-in-react)**

您深知工作成果的价值远胜于投入的时间。[Sunsama](https://www.sunsama.com/a/this-week-in-react) 已成为数千名开发者的效率秘籍，帮助他们用更少时间达成更多目标。

通过集成 JIRA、Github 和 Notion 消除无止境的标签页切换。合理规划每日时间，为爱好和副业创造空间。

最棒的是？他们提供**[14天免费试用](https://www.sunsama.com/a/this-week-in-react)**（无需绑定信用卡），让你即刻开启高效之旅。

---

## 📱 React-Native {#react-native}

[![Expo SDK 47 beta版现已发布](/emails/issues/122/expo47.jpg)](https://blog.expo.dev/expo-sdk-47-beta-is-now-available-fa760eea1908)

**[Expo SDK 47 beta版现已发布](https://blog.expo.dev/expo-sdk-47-beta-is-now-available-fa760eea1908)**

新版Expo SDK将进行为期一周的beta测试，主要更新包括：

- 升级至React-Native 0.70.4和React 18.1
- iOS版Expo Go支持Hermes引擎，SDK 48将默认启用Hermes
- 多个Expo模块支持Fabric架构
- 推出Expo Modules API 1.0，简化Swift/Kotlin原生Fabric模块开发
- React-Navigation文件系统路由功能进入beta测试阶段，最新版本[v0.0.34](https://twitter.com/Baconbrix/status/1587303631602307076)已兼容SDK 47

下周我们将带来更详细解读，这无疑是一次重大更新，包含诸多亮眼新特性！

---

- 💡 [Andrew Clark表示："期待Expo未来支持Server Components。React-Native确实需要Server Components..."](https://twitter.com/Baconbrix/status/1585058874864062466)：我长期关注[Server Components在React-Native的应用](https://twitter.com/sebastienlorber/status/1470810351197433863)，很高兴这个议题终于被官方公开讨论！
- 📦 [React-Native-Gesture-Handler 2.8发布](https://github.com/software-mansion/react-native-gesture-handler/releases/tag/2.8.0)
- 📦 [React-Native-Fast-Shadow开源](https://github.com/alan-eu/react-native-fast-shadow)
- 🐦 [React-Native Android构建速度提升+新增`--active-arch-only`标志](https://twitter.com/o_kwasniewski/status/1585270027942502404)
- 📜 [Stripe Identity：简化的身份认证方案](https://www.callstack.com/blog/stripe-identity-id-authentication-made-simple)
- 📜 [React Native与现有Android应用集成指南](https://michalchudziak.dev/blog/integration-with-existing-apps-android)
- 📜 [React Native与现有iOS应用集成指南](https://michalchudziak.dev/blog/integration-with-existing-apps-ios)
- 🎙️ [The React Native Show第17期：新架构解析](https://www.callstack.com/podcasts/react-native-new-architecture-ep-17)
- 🎙️ [The React Native Show咖啡时间第6期：Webpack团队解读Next.js大会](https://www.callstack.com/podcasts/webpack-callstack-experts-take-on-next-js-conf-coffee-talk-6)
- 🎙️ [RNR第250期：React Native Firebase专题](https://reactnativeradio.com/episodes/rnr-250-react-native-firebase-tl-dr)
- 🔗 [React Native社区生态图谱](https://lifeiswhat.notion.site/The-React-Native-Community-Map-07f3221c294d4c8ab65a13cf1dee6901)
- 🗣 [Wix Engineering成为React Native官方合作伙伴](https://www.wix.engineering/post/wix-engineering-now-an-official-react-native-partner)

---

## 🧑‍💻 职位推荐 {#jobs}

🧑‍💼 [**Causal招聘产品工程师，远程/伦敦/纽约，年薪$15-25万**](https://jobs.lever.co/causal-app/4acaafbe-ef3d-45a6-bbe6-687c022d727c?lever-origin=applied&lever-source%5B%5D=thisweekinreact.com)

Causal是由Coatue/Accel投资的A轮初创公司，致力于打造集数据计算与可视化于一体的工具。现招募能解决复杂UX/性能问题的资深React工程师。

🧑‍💼 [**G2i - 100%远程React Native职位**](https://twitter.com/gabe_g2i/status/1563204813881425926?s=20&t=ArRLC77BpRwXXCdx8fnUqw)

我们正在招聘多位专注于React Native开发的工程师！薪资约16万美元外加10%奖金。应聘者需具备RN实际项目经验且居住在美国。私信[@gabe_g2i](https://twitter.com/gabe_g2i)了解详情，请务必提及This Week in React。

💡 [如何发布招聘信息？](https://thisweekinreact.com/sponsor)

---

## 🔀 其他 {#other}

- [Babel 7.20](https://babeljs.io/blog/2022/10/27/7.20.0): 支持Deno目标和TS 4.9的`satisfies`语法！
- [TypeScript 4.9 RC发布](https://devblogs.microsoft.com/typescript/announcing-typescript-4-9-rc/): 新增`satisfies`运算符！
- [Node v18.12.0(LTS)](https://nodejs.org/en/blog/release/v18.12.0/): 首个v18长期支持版本
- [开源新版TypeScript类型检查器](https://kdy1.dev/posts/2022/10/open-sourcing-stc): swc作者开源基于Rust编写的类型检查器stc
- [npm v9.0.0发布](https://github.blog/changelog/2022-10-24-npm-v9-0-0-released/)
- [Vercel收购Splitbee扩展第一方分析能力](https://vercel.com/blog/vercel-acquires-splitbee)
- [Deno 1.27: IDE重大改进](https://deno.com/blog/v1.27)
- [Chrome 108测试版](https://developer.chrome.com/blog/chrome-108-beta/)
- [Vite 3.2发布](https://twitter.com/vite_js/status/1585261680841424897)
- [Vite实验性开发服务器持久化缓存](https://twitter.com/Akryum/status/1585769403781505024)
- [两种JavaScript](https://remysharp.com/2022/10/13/two-javascripts)

---

## 🤭 趣闻 {#fun}

[![Next.js 13 - 1299美元定价 - 苹果式发布会恶搞](/emails/issues/122/meme.jpg)](https://twitter.com/thekitze/status/1584974847306002432)