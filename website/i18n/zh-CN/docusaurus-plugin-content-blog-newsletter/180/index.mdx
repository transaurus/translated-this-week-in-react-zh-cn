---
slug: /180
title: "This Week In React #180: Transitions, Drag & Drop, Metadata APIs, React name, Next.js Auth, useOptimistic, Cally, Docusaurus, New Architecture, Gesture Handler, Server Components, Privacy Manifest, Bun, xz, TypeScript, Signals..."
authors: [slorber, bndkt]
date: 04-03-2024
---

大家好！

正如预期，本周较为平静，开发者们因复活节假期暂缓了工作节奏。

虽然没有太多重大版本发布，但我们仍汇集了丰富的技术内容和博客文章。头条博文尤其值得一读。唯独Bun在4月1日发布了出色的v1.1版本，此举可谓相当大胆！

React Native开发者请注意：[**App.js Conf**](https://appjs.co/?utm_source=thisweekinreact)将于5月22日在波兰克拉科夫🇵🇱开幕。使用合作伙伴代码"TWIR"可享[10%折扣](https://ti.to/appjs/2024/discount/TWIR)。

此外，请务必检查是否受到[xz后门漏洞](https://socket.dev/blog/how-to-use-socket-to-find-out-if-you-were-affected-by-the-backdoored-xz-package)影响，这是近期曝光的重要安全威胁。

<!-- truncate -->

**💡 [在Twitter查看本期简报](https://slo.im/thread) - 可视化版式 🎨**

---

import Support from "../_support.mdx";

<Support />

---

## 💸 赞助商 {#sponsor1}

[![Omlet React Analytics - 测量组件和属性使用情况](/emails/issues/180/omletad.jpg)](https://omlet.dev/?utm_campaign=partner_this-week-in-react_newsletter-first-sponsor-apr-2024)

**[Omlet React Analytics - 测量组件和属性使用情况](https://omlet.dev/?utm_campaign=partner_this-week-in-react_newsletter-first-sponsor-apr-2024)**

☁️ 想象能在一个仪表盘中即时追踪最热门、最少使用、未使用及新创建的React组件和属性——Omlet让这成为现实。

- 通过预建和自定义图表洞察生产环境中组件和属性的使用趋势与缺口
- 轻松将组件分析转化为具体代码改进方案（如确定需更新、弃用或迁移的代码）
- 5分钟内完成配置并运行首次扫描

让Omlet帮你消除组件优化方向的猜测。

---

## ⚛️ React动态 {#react}

[![Next.js中的全局进度指示**](/emails/issues/180/transitions.jpg)](https://buildui.com/posts/global-progress-in-nextjs)

[**Next.js中的全局进度指示**](https://buildui.com/posts/global-progress-in-nextjs)

别被标题误导，这篇优质文章生动诠释了React过渡(transition)机制的工作原理。通过可交互的示例演示：为何transition中的setState调用虽在点击处理函数中同步执行，但其DOM更新会延迟至过渡完成。同时解释了App Router为何不再暴露路由事件系统。基于Framer Motion的动画实现代码也颇具参考价值。

---

- 💸 [Clerk 保障的 React 应用认证与用户管理，通过预置组件实现快速配置。](https://go.clerk.com/WBJx175)
- 👀 [通往 Fresh 2.0 之路](https://github.com/denoland/fresh/issues/2363)：Deno/Preact 框架即将支持异步组件。
- 📣 [Netlify - 全新 Next.js 运行时发布](https://www.netlify.com/blog/introducing-the-new-next-js-runtime/)
- 📜 [直接暴露平台 API 而非封装它们](https://blog.jim-nielsen.com/2024/expose-platform-apis-over-wrapping-them/)：对 Next.js 元数据 API 设计的批判性思考，认为其学习曲线陡峭且非 HTML meta 标签的直接映射，对比了临时可移植方案的优劣。
- 📜 [Next.js 认证机制探索](https://www.robinwieruch.de/next-authentication/)：基于 Next.js 14、App Router、Prisma 和 Lucia 的完整认证教程。
- 📜 [React 中 useOptimistic() 的内部运作原理](https://jser.dev/2024-03-20-how-does-useoptimisticwork-internally-in-react/)
- 📜 [React 中 use() 的内部运作原理](https://jser.dev/2024-03-16-how-does-use-work-internally-in-react/)
- 📜 [Next.js App Router 中如何添加站点地图与 RSS 订阅](https://spacejelly.dev/posts/how-to-add-a-sitemap-rss-feed-in-next-js-app-router)
- 📜 [TypeScript 实现 React "as" 属性](https://www.christianvm.dev/blog/react-as-prop)
- 📜 [三周内将 React 应用重写为 Svelte](https://dusty.phillips.codes/2024/03/20/we-rewrote-our-react-app-in-svelte-in-three-weeks/)
- 📜 [React 中的不稳定测试：检测、预防与工具](https://semaphoreci.com/blog/flaky-react)
- 📜 [在 Next.js 14 和 Server Actions 中集成 React Hook Form](https://aurorascharff.no/posts/implementing-react-hook-form-with-nextjs-14-server-actions/)
- 📜 [高风险重构实践](https://webup.org/blog/the-high-risk-refactoring/)
- 📜 [Next.js 结合 Prisma 与 SQLite](https://www.robinwieruch.de/next-prisma-sqlite/)
- 🗓 [React Connection - 4月22日](https://reactconnection.io/) + [React-Native Connection - 4月23日](https://reactnativeconnection.io/) - 🇫🇷 巴黎 - 为期两天的 Web/移动端技术大会。使用代码 "TWIR" 可享[8折优惠](https://www.billetweb.fr/react-connection-2024?discount=TWIR)。
- 📦 [Pragmatic Drag & Drop - 全技术栈通用的高性能拖拽库](https://github.com/atlassian/pragmatic-drag-and-drop)：react-beautiful-dnd 维护者推出的新框架无关拖拽方案，已被 Atlassian 用于 Trello 和 Confluence 等产品。[GitHub 讨论区及视频](https://github.com/atlassian/react-beautiful-dnd/issues/2573)说明了 react-beautiful-dnd 用户的迁移路径（该库仅维护安全更新），并提供了兼容层包。
- 📦 [Cally - 轻量功能日历组件](https://wicky.nillia.ms/cally/)：现代轻量级日历方案。[集成 React 指南](https://wicky.nillia.ms/cally/guides/frameworks/#react)显示随着 React 19 对 Web Components 的原生支持，使用会更便捷。暂不支持 SSR。
- 📦 [Docusaurus 3.2 - 更快的开发/构建、MDX 局部目录、博客增强、站点地图 lastmod 支持、Vercel Analytics 集成...](https://docusaurus.io/blog/releases/3.2)
- 📦 [epicweb-dev/react-server-components - 通过自建框架理解 RSC 和 Server Actions](https://github.com/epicweb-dev/react-server-components)
- 🎥 [UI Engineering - React 命名背后的故事](https://www.youtube.com/watch?v=qBymTM6MQLo)：耗时40小时制作的诗意迷你纪录片，目前观看量寥寥，欢迎关注这个被低估的频道（其他视频更偏实战）。
- 🎥 [Jack Herrington - 你陷入 React 崇拜了吗？](https://www.youtube.com/watch?v=74q1vURXvlY)
- 🎥 [Lee Robinson - 解析 Next.js 中 cookies() 如何利用 AsyncLocalStorage](https://www.youtube.com/watch?v=JejwWxhsfZw)
- 🎥 [Ryan Toronto - 组件应该运行在哪里？](https://www.youtube.com/watch?v=4S3vQffXT7o)
- 🎥 [Nadia Makarevich - 高阶组件本质解析](https://www.youtube.com/watch?v=OLFV1Ds_L8A)
- 🎙️ [本月 React 动态 - React 19 canary 发布、ShadCN 新组件、Astro 神似 Wordpress](https://podcasters.spotify.com/pod/show/reactiflux/episodes/TMiR-2024-03-React-canary-is-19--New-ShadCN-bits--Astro-looks-like-Wordpress--Wiz-e2hsspd)
- 🎙️ [DevTools FM 第92期 - Dan Abramov 谈 Bluesky、React 核心团队、RSC、严格 DOM 模式等](https://www.devtools.fm/episode/92)

<SubscribeFormEmbed placement="middle" />

---

## 💸 赞助商 {#sponsor2}

[![Refine - 开源版Retool替代方案](/emails/issues/177/refine.jpg)](https://github.com/refinedev/refine)

**[Refine - 开源版Retool替代方案](https://github.com/refinedev/refine)**

专为CRUD密集型应用设计，在低代码与传统开发之间找到完美平衡点。

作为面向企业级应用的开源React元框架，[Refine](https://github.com/refinedev/refine) 提供无头(headless)解决方案，非常适合开发管理后台、仪表盘和内部工具。

低代码工具虽初期见效快，但在处理复杂场景时往往因扩展性不足、定制选项有限和供应商锁定风险而捉襟见肘。

Refine能让团队在保持灵活性的同时快速构建生产级应用。

---

## 📱 React-Native {#react-native}

本节现由[Benedikt](https://twitter.com/bndkt)联合撰写。欢迎通过邮件或[Twitter](https://twitter.com/bndkt)向我们反馈意见！

[!["主流库对新架构的支持情况"](/emails/issues/180/rn.jpg)](https://github.com/reactwg/react-native-new-architecture/discussions/167)

[**"主流库对新架构的支持情况"**](https://github.com/reactwg/react-native-new-architecture/discussions/167)

本周头条新闻竟是...电子表格？没错。React Native 0.74即将发布，该版本将默认启用互操作层(Interop Layer)和无桥模式(Bridgeless Mode)。虽然仍可手动关闭此功能，但信号很明确：是时候拥抱新架构了。社区已为RN生态适配新架构付出大量努力，现在这份详尽的电子表格记录了众多流行RN库对新架构和无桥模式的支持状态。如上图所示，表格中已出现大量绿色标记（表示已支持），但仍有不少库需要继续完善。在我看来，这份清单的价值不仅在于了解哪些库已适配新范式，对于想了解最受欢迎的RN库有哪些，或是探究库作者向新架构迁移时面临的技术挑战，都极具参考意义。

---

- 💸 [PowerSync – 面向本地优先应用的Postgres\<>SQLite同步层，提供简单状态管理和实时响应能力](https://www.powersync.com/?utm_source=newsletter&utm_medium=sponsorship&utm_campaign=this-week-in-react)
- 🐦 [有趣观点/讨论串：React Native应内置支持直接渲染原生视图而无需导入](https://x.com/Baconbrix/status/1773800723383275952)
- 🐦 [Tailwind CSS有TailwindUI。很快，NativeWind也将推出NativeWindUI](https://x.com/DanStepanov/status/1773746866536280376)
- 🐦 [通过NativeScript、Node-API和Reanimated，在JS线程直接调用任意UIKit API——无需编写原生代码](https://x.com/birch_js/status/1774855694271045666?s=20)
- 🐦 [使用Expo配置插件开发的Safari扩展，可在iOS上查看Web DOM的3D视图](https://twitter.com/Baconbrix/status/1773418737061773676)
- 📖 [如何处理React Native中苹果隐私清单的新要求](https://github.com/react-native-community/discussions-and-proposals/discussions/776)：所有iOS应用很快都需要提供"隐私清单"，该GitHub讨论提供了RN适配方案。
- 📜 [将React服务端组件引入React Native](https://szymonrybczak.dev/blog/bringing-react-server-components-to-react-native)：本文并非技术深潜，而是介绍服务端组件对RN生态的意义，作者表示深度解析即将发布。
- 📜 [如何在React Native中实现60FPS动画](https://www.callstack.com/blog/60fps-animations-in-react-native)
- 📜 [为什么应该始终使用最新版React Native？](https://www.callstack.com/blog/always-run-the-latest-version-of-react-native)
- 📜 [Expo位置后台追踪——并非所有漫游者都会迷失](https://blog.swmansion.com/not-all-who-wander-are-lost-805811c433c5)
- 📜 [明智选择工具并构建高性能React Native应用](https://www.callstack.com/blog/find-the-balance-between-native-and-javascript)
- 📜 [如何为React Native应用选择合适的外部JavaScript库](https://www.callstack.com/blog/external-javascript-libraries-for-react-native)
- 📣 [EAS Submit安全公告](https://expo.dev/blog/security-notice-for-eas-submit)
- 📣 [EAS Build即将更新iOS镜像](https://expo.dev/changelog/2024/03-29-eas-build-upcoming-ios-images-updates)
- 📦 [React Native手势处理库2.16.0——改进Web/Android的Gesture.Fling()、Android的RectButton边框样式、增强鼠标支持](https://github.com/software-mansion/react-native-gesture-handler/releases/tag/2.16.0)
- 📦 [react-native-quick-base64 2.1.0——通过查找表解码，速度比前版快4-6倍](https://github.com/craftzdog/react-native-quick-base64/releases/tag/v2.1.0)
- 📦 [react-native 0.74.0-rc.6发布](https://github.com/facebook/react-native/releases/tag/v0.74.0-rc.6)
- 🎥 [Theo - 在React中运行Flutter？react-native-skia太疯狂了](https://www.youtube.com/watch?v=2l9Wm-8TxlA)
- 🎥 [Daniel Friyia - 使用Expo构建Apple Watch应用教程](https://www.youtube.com/watch?v=Z6xRCyhrg1A)
- 🎥 [Simon Grimm - 用HTML开发React Native？](https://www.youtube.com/watch?v=D_14xgyW4Rk)
- 🎙️ [火箭飞船第36期 - 与Nader Dabit探讨使用Web3和AI的React Native应用](https://share.transistor.fm/s/2c3bbd34)
- 🔗 [react-native-community-map - React Native开发者聚集的线上社区地图](https://github.com/kelset/react-native-community-map)：详尽汇总了各类社区、Reddit板块、播客、Discord服务器等资源。

---

## 🔀 其他资源 {#other}

- 👀 [JavaScript Signals 标准提案](https://github.com/proposal-signals/proposal-signals)
- 📜 [Node.js ES模块中重新引入\_\_dirname](https://www.sonarsource.com/blog/dirname-node-js-es-modules/)
- 📜 [构建微型HTMX SSR框架](https://blog.platformatic.dev/building-a-micro-htmx-ssr-framework)
- 📜 [现代CSS必备知识（2024春季版）](https://frontendmasters.com/blog/what-you-need-to-know-about-modern-css-spring-2024-edition/)
- 📜 [TypeScript中的`never`类型与错误处理](https://fettblog.eu/typescript-never-and-error-handling/)
- 📜 [`any`类型有害论——除了这些场景](https://www.totaltypescript.com/any-considered-harmful)
- 📜 [V8引擎：迭代器辅助函数现已登陆Chrome 122+](https://v8.dev/features/iterator-helpers)
- 📜 [CSS容器查询交互式指南](https://ishadeed.com/article/css-container-query-guide)
- 📦 [Bun 1.1发布：支持Windows、性能提升、跨平台shell及Glob/Semver等新API](https://bun.sh/blog/bun-v1.1)
- 📦 [Deno 1.42：JSR依赖管理、deno publish与deno add命令](https://deno.com/blog/v1.42)
- 📦 [TailwindCSS Signals](https://github.com/brandonmcconnell/tailwindcss-signals)

---

## 🤭 趣味时刻 {#fun}

[![alt](/emails/issues/180/meme.jpg)](https://twitter.com/rickhanlonii/status/1774813693944971594)

下次见！👋