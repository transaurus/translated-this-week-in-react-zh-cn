---
slug: /180
title: "This Week In React #180: Transitions, Drag & Drop, Metadata APIs, React name, Next.js Auth, useOptimistic, Cally, Docusaurus, New Architecture, Gesture Handler, Server Components, Privacy Manifest, Bun, xz, TypeScript, Signals..."
authors: [slorber, bndkt]
date: 04-03-2024
---

大家好！

正如预期，本周较为平静，开发者们都在复活节假期中休整。

虽然没有太多重大版本发布，但仍有许多优质内容和博客文章值得关注。我尤其喜欢头条博文。只有Bun在4月1日大胆发布了出色的v1.1版本，这波操作相当硬核！

React Native开发者？别错过5月22日在克拉科夫🇵🇱开幕的[**App.js Conf**](https://appjs.co/?utm_source=thisweekinreact)。使用合作伙伴代码"TWIR"可享[9折优惠](https://ti.to/appjs/2024/discount/TWIR)。

此外请注意安全，务必检查是否受到[xz后门漏洞](https://socket.dev/blog/how-to-use-socket-to-find-out-if-you-were-affected-by-the-backdoored-xz-package)影响，这是近期曝光的重要安全漏洞。

<!-- truncate -->

**💡 [在Twitter查看本期简报](https://slo.im/thread) - 可视化版式 🎨**

---

import Support from "../_support.mdx";

<Support />

---

## 💸 赞助商 {#sponsor1}

[![Omlet React分析工具 - 追踪组件和属性使用情况](/emails/issues/180/omletad.jpg)](https://omlet.dev/?utm_campaign=partner_this-week-in-react_newsletter-first-sponsor-apr-2024)

**[Omlet React分析工具 - 追踪组件和属性使用情况](https://omlet.dev/?utm_campaign=partner_this-week-in-react_newsletter-first-sponsor-apr-2024)**

☁️ 想象能在一个面板中即时追踪最热门、最少使用、未使用及新创建的React组件和属性——Omlet让这成为现实。

- 通过预置和自定义图表洞察生产环境中组件和属性的使用情况，深入分析趋势和缺口
- 轻松将组件分析转化为具体的代码优化方案——比如确定需要更新、弃用或迁移的代码
- 5分钟内即可完成安装并运行首次扫描

让Omlet帮你消除组件优化方向的猜测。

---

## ⚛️ React动态 {#react}

[![Next.js中的全局进度指示**](/emails/issues/180/transitions.jpg)](https://buildui.com/posts/global-progress-in-nextjs)

[**Next.js中的全局进度指示**](https://buildui.com/posts/global-progress-in-nextjs)

别被标题误导，这篇精彩文章生动诠释了React过渡机制的工作原理。通过易于理解的交互式演示，展示了transition中的setState调用如何在点击处理程序中同步执行，但其DOM更新会延迟到过渡完成后生效。同时解释了App Router为何不再暴露路由事件系统。基于Framer Motion的动画代码实现也颇具启发性。

---

- 💸 [Clerk 提供的 React 应用认证与用户管理方案，通过预构建组件实现快速部署](https://go.clerk.com/WBJx175)
- 👀 [通往 Fresh 2.0 之路](https://github.com/denoland/fresh/issues/2363)：Deno/Preact 框架即将支持异步组件
- 📣 [Netlify - 全新 Next.js 运行时发布](https://www.netlify.com/blog/introducing-the-new-next-js-runtime/)
- 📜 [直接暴露平台 API 而非封装它们](https://blog.jim-nielsen.com/2024/expose-platform-apis-over-wrapping-them/)：对 Next.js 元数据 API 设计的批判性思考，指出其学习曲线陡峭且非直接映射 HTML meta 标签，对比了临时解决方案的权衡
- 📜 [Next.js 认证机制深度解析](https://www.robinwieruch.de/next-authentication/)：基于 Next.js 14、App Router、Prisma 和 Lucia 的完整认证教程
- 📜 [React 中 useOptimistic() 的内部运作原理](https://jser.dev/2024-03-20-how-does-useoptimisticwork-internally-in-react/)
- 📜 [React 中 use() 的内部实现机制](https://jser.dev/2024-03-16-how-does-use-work-internally-in-react/)
- 📜 [Next.js App Router 中如何添加站点地图与 RSS 订阅](https://spacejelly.dev/posts/how-to-add-a-sitemap-rss-feed-in-next-js-app-router)
- 📜 [TypeScript 实现 React "as" 属性](https://www.christianvm.dev/blog/react-as-prop)
- 📜 [三周内将 React 应用重构为 Svelte 的实践](https://dusty.phillips.codes/2024/03/20/we-rewrote-our-react-app-in-svelte-in-three-weeks/)
- 📜 [React 中的不稳定测试：检测、预防与工具](https://semaphoreci.com/blog/flaky-react)
- 📜 [React Hook Form 与 Next.js 14 服务端动作集成指南](https://aurorascharff.no/posts/implementing-react-hook-form-with-nextjs-14-server-actions/)
- 📜 [高风险重构实践](https://webup.org/blog/the-high-risk-refactoring/)
- 📜 [Next.js 搭配 Prisma 和 SQLite 开发](https://www.robinwieruch.de/next-prisma-sqlite/)
- 🗓 [React Connection - 4月22日](https://reactconnection.io/) + [React-Native Connection - 4月23日](https://reactnativeconnection.io/) - 🇫🇷 巴黎 - 为期两天的 Web/移动端技术大会，使用代码 "TWIR" 可享[8折优惠](https://www.billetweb.fr/react-connection-2024?discount=TWIR)
- 📦 [Pragmatic Drag & Drop - 跨技术栈的高性能拖拽库](https://github.com/atlassian/pragmatic-drag-and-drop)：react-beautiful-dnd 维护者推出的框架无关新方案，已被 Atlassian 用于 Trello 等产品。[迁移指南](https://github.com/atlassian/react-beautiful-dnd/issues/2573)说明 react-beautiful-dnd 未来仅接收安全更新，并提供了兼容层
- 📦 [Cally - 轻量级日历组件库](https://wicky.nillia.ms/cally/)：现代轻量日历组件，[React 集成指南](https://wicky.nillia.ms/cally/guides/frameworks/#react)显示 React 19 的 Web Components 支持将大幅简化使用流程，暂不支持 SSR
- 📦 [Docusaurus 3.2 - 更快的开发构建、MDX 局部目录、博客增强、站点地图最后修改时间、Vercel Analytics...](https://docusaurus.io/blog/releases/3.2)
- 📦 [epicweb-dev/react-server-components - 通过自建框架理解 RSC 和服务端动作](https://github.com/epicweb-dev/react-server-components)
- 🎥 [UI 工程 - React 命名背后的故事](https://www.youtube.com/watch?v=qBymTM6MQLo)：耗时40小时制作的诗意迷你纪录片，欢迎订阅这个被低估的频道
- 🎥 [Jack Herrington - 你陷入 React 崇拜了吗？](https://www.youtube.com/watch?v=74q1vURXvlY)
- 🎥 [Lee Robinson - Next.js 技术揭秘：cookies() 如何运用 AsyncLocalStorage](https://www.youtube.com/watch?v=JejwWxhsfZw)
- 🎥 [Ryan Toronto - 组件应该运行在哪里？](https://www.youtube.com/watch?v=4S3vQffXT7o)
- 🎥 [Nadia Makarevich - 高阶组件解析](https://www.youtube.com/watch?v=OLFV1Ds_L8A)
- 🎙️ [本月 React 动态 - React 19 canary 发布、ShadCN 新组件、Astro 的 Wordpress 化趋势](https://podcasters.spotify.com/pod/show/reactiflux/episodes/TMiR-2024-03-React-canary-is-19--New-ShadCN-bits--Astro-looks-like-Wordpress--Wiz-e2hsspd)
- 🎙️ [DevTools FM 第92期 - Dan Abramov 谈 Bluesky、React 核心团队、RSC、严格 DOM 模式等](https://www.devtools.fm/episode/92)

<SubscribeFormEmbed placement="middle" />

---

## 💸 赞助商 {#sponsor2}

[![Refine - 开源版Retool替代方案](/emails/issues/177/refine.jpg)](https://github.com/refinedev/refine)

**[Refine - 开源版Retool替代方案](https://github.com/refinedev/refine)**

专为CRUD密集型应用打造，在低代码与传统开发之间取得完美平衡。

作为面向企业级应用的开源React元框架，[Refine](https://github.com/refinedev/refine) 提供无头解决方案，非常适合开发管理后台、仪表盘和内部工具。

低代码工具虽初期见效快，但在处理复杂场景时往往因扩展性不足、定制选项有限和供应商锁定风险而捉襟见肘。

Refine能让团队在保持灵活性的同时快速构建生产级应用。

---

## 📱 React-Native {#react-native}

本版块现由[Benedikt](https://twitter.com/bndkt)联合主笔。欢迎通过邮件或[Twitter](https://twitter.com/bndkt)向我们反馈意见！

[!["主流库对新架构的支持情况"](/emails/issues/180/rn.jpg)](https://github.com/reactwg/react-native-new-architecture/discussions/167)

[**"主流库对新架构的支持情况"**](https://github.com/reactwg/react-native-new-architecture/discussions/167)

本周头条新闻竟是...一张电子表格？没错。随着React Native 0.74即将发布（默认启用Interop Layer和Bridgeless Mode），虽然仍可手动关闭，但信号很明确：是时候拥抱新架构了。社区已为RN生态适配新架构付出大量努力，这份详尽的表格记录了众多流行RN库对新架构和Bridgeless Mode的支持状态。如上图所示，虽然已有大量绿色标记，但仍有不少库需要继续完善。在我看来，即便抛开纯粹的技术适配问题，这份清单对于了解最受欢迎的RN库有哪些，或库作者在迁移过程中面临的技术挑战也极具参考价值。

---

- 💸 [PowerSync – 面向本地优先应用的Postgres\<>SQLite同步层，提供简易状态管理与实时响应能力](https://www.powersync.com/?utm_source=newsletter&utm_medium=sponsorship&utm_campaign=this-week-in-react)
- 🐦 [有趣观点/讨论串：React Native应内置支持直接渲染原生视图而无需导入](https://x.com/Baconbrix/status/1773800723383275952)
- 🐦 [Tailwind CSS有TailwindUI。很快，NativeWind将推出NativeWindUI](https://x.com/DanStepanov/status/1773746866536280376)
- 🐦 [通过NativeScript、Node-API和Reanimated实现在JS线程直接调用任意UIKit API](https://x.com/birch_js/status/1774855694271045666?s=20)
- 🐦 [基于Expo配置插件开发的iOS版Safari扩展：可视化网页DOM三维视图](https://twitter.com/Baconbrix/status/1773418737061773676)
- 📖 [React Native如何应对苹果隐私清单要求](https://github.com/react-native-community/discussions-and-proposals/discussions/776)：所有iOS应用即将强制要求提供"隐私清单"，该GitHub讨论提供了RN适配方案。
- 📜 [将React服务端组件引入React Native](https://szymonrybczak.dev/blog/bringing-react-server-components-to-react-native)：本文先导性地探讨服务端组件对RN的意义，深度技术解析即将发布。
- 📜 [如何在React Native中实现60FPS动画](https://www.callstack.com/blog/60fps-animations-in-react-native)
- 📜 [为什么必须保持React Native版本最新？](https://www.callstack.com/blog/always-run-the-latest-version-of-react-native)
- 📜 [Expo定位后台追踪技术解析](https://blog.swmansion.com/not-all-who-wander-are-lost-805811c433c5)
- 📜 [明智选择工具链：构建高性能React Native应用](https://www.callstack.com/blog/find-the-balance-between-native-and-javascript)
- 📜 [如何为React Native应用选择合适的外部JavaScript库](https://www.callstack.com/blog/external-javascript-libraries-for-react-native)
- 📣 [EAS Submit安全通告](https://expo.dev/blog/security-notice-for-eas-submit)
- 📣 [EAS Build即将更新iOS基础镜像](https://expo.dev/changelog/2024/03-29-eas-build-upcoming-ios-images-updates)
- 📦 [React Native手势处理库2.16.0发布：Web&Android平台Fling()优化、Android版RectButton边框样式、鼠标支持增强](https://github.com/software-mansion/react-native-gesture-handler/releases/tag/2.16.0)
- 📦 [react-native-quick-base64 2.1.0：通过查找表解码性能提升4-6倍](https://github.com/craftzdog/react-native-quick-base64/releases/tag/v2.1.0)
- 📦 [react-native 0.74.0-rc.6版本发布](https://github.com/facebook/react-native/releases/tag/v0.74.0-rc.6)
- 🎥 [Theo测评：在React中集成Flutter？react-native-skia的疯狂实践](https://www.youtube.com/watch?v=2l9Wm-8TxlA)
- 🎥 [Daniel Friyia教程：使用Expo构建Apple Watch应用](https://www.youtube.com/watch?v=Z6xRCyhrg1A)
- 🎥 [Simon Grimm探索：React Native能否使用HTML开发？](https://www.youtube.com/watch?v=D_14xgyW4Rk)
- 🎙️ [火箭飞船播客第36期：Nader Dabit谈Web3与AI在React Native中的应用](https://share.transistor.fm/s/2c3bbd34)
- 🔗 [react-native-community-map：React Native开发者社区全景图](https://github.com/kelset/react-native-community-map)：详尽汇总Discord群组、Subreddit、播客等开发者聚集地。

---

## 🔀 其他资源 {#other}

- 👀 [JavaScript Signals 标准提案](https://github.com/proposal-signals/proposal-signals)
- 📜 [Node.js ES模块中重新支持\_\_dirname](https://www.sonarsource.com/blog/dirname-node-js-es-modules/)
- 📜 [构建微型HTMX SSR框架](https://blog.platformatic.dev/building-a-micro-htmx-ssr-framework)
- 📜 [现代CSS必备知识（2024春季版）](https://frontendmasters.com/blog/what-you-need-to-know-about-modern-css-spring-2024-edition/)
- 📜 [TypeScript中的`never`类型与错误处理](https://fettblog.eu/typescript-never-and-error-handling/)
- 📜 [`any`类型有害论——除了这些场景](https://www.totaltypescript.com/any-considered-harmful)
- 📜 [V8引擎：迭代器辅助方法现已登陆Chrome 122+](https://v8.dev/features/iterator-helpers)
- 📜 [CSS容器查询交互式指南](https://ishadeed.com/article/css-container-query-guide)
- 📦 [Bun 1.1发布——支持Windows、性能提升、跨平台Shell、新增Glob/Semver等API](https://bun.sh/blog/bun-v1.1)
- 📦 [Deno 1.42——JSR依赖管理、deno publish与deno add命令](https://deno.com/blog/v1.42)
- 📦 [TailwindCSS Signals](https://github.com/brandonmcconnell/tailwindcss-signals)

---

## 🤭 趣味时刻 {#fun}

[![alt](/emails/issues/180/meme.jpg)](https://twitter.com/rickhanlonii/status/1774813693944971594)

下期见！👋