---
slug: /172
title: "This Week In React #172: Next.js, PPR, Remotion, State of React Native, Parcel, Panda, StyleX, Cosmos, Remix, RTK, TypeScript, Skia, Reanimated, RNTL, Storybook, Flashlight, Tamagui..."
authors: [slorber, bndkt]
date: 01-31-2024
---

大家好！

**[@ThisWeekInReact](https://twitter.com/ThisWeekInReact)** 是我们的全新X平台账号，快来订阅吧！我们的承诺是近乎实时地分享和转发React社区中有趣的动态，并尽可能做到**高价值/低噪音**。

本周React服务端组件再次成为多篇文章和讨论的焦点。社区对Next.js应用路由器的态度喜忧参半——虽然人们认可其愿景，但对当前实现似乎有些失望。希望这只是暂时的🤞。

本周React Native领域尤为精彩。[React Native现状](https://results.stateofreactnative.com/)调查报告已发布，社区对React Native的整体评价日趋积极。报告中还涉及Skia、Reanimated以及无桥模式等亮点。更令人兴奋的是，Expo正在演进为全栈通用框架。

祝您阅读愉快！

<!-- truncate -->

**💡 [在Twitter查看本期简报](https://slo.im/thread) - 可视化版 🎨**

---

import Support from "../_support.mdx";

<Support />

---

## 💸 赞助商 {#sponsor1}

[![Axiom - Vercel应用的最佳日志平台](/emails/issues/171/axiom.jpg)](https://axiom.co/vercel)

**[Axiom - Vercel应用的最佳日志平台](https://axiom.co/vercel)**

😴 高枕无忧——Axiom为Vercel项目提供的零配置可观测性服务将为您保驾护航。

- 使用Axiom预建仪表板纵览所有Vercel日志与性能指标，一键深入查看具体项目与部署情况，获取函数性能洞察
- [next-axiom](https://github.com/axiomhq/next-axiom) 支持从Next.js项目的任何部分（客户端、边缘或服务端）直接发送日志事件，无需特殊配置
- 轻松从代码发送结构化日志，并与Vercel日志进行关联分析

Axiom能高效捕获100%事件数据，您再也不用担心采样偏差或数据保留问题，也无需猜测用户真实体验。

**附**：我本人也用它来[监控简报订阅情况](https://twitter.com/sebastienlorber/status/1528666563452317696)😉

---

## ⚛️ React动态 {#react}

[![Next.js深度解析](/emails/issues/172/ppr.jpg)](https://www.youtube.com/watch?v=MTcPrTIBkpA)

🎥 [**Next.js深度解析 - 部分预渲染**](https://www.youtube.com/watch?v=MTcPrTIBkpA)

能让视频登上头条的情况并不多见，但这个视频的特别之处在于：

首先是其主题极具吸引力，配合丰富的动画可视化讲解得淋漓尽致。部分预渲染作为[Next.js 14的实验性功能](https://nextjs.org/blog/next-14#partial-prerendering-preview)，完善了Next.js的愿景，在静态与动态渲染间实现了两全其美。这使得Next.js成为支持全频谱渲染范式的多范式框架。该特性易于采用，基于Suspense构建且无需新API——只需启用一个标志位即可。

其次是其制作工艺：这个完成度惊人的视频是用[Remotion](https://www.remotion.dev/)通过React网页代码制作的🙉。Delba干得漂亮！我们期待看到更多此类视频，并了解你们的Remotion创作流程。值得一提的是，Remotion团队刚通过[GitHub Unwrapped 2023幕后花絮](https://www.youtube.com/watch?v=WW8vIZ1kwR0)分享了他们的制作经验。

---

- 💸 [使用MightyMeld加速您的工作流程，这是一款面向React代码库的可视化开发工具。通过拖放、点击和提示来调整UI布局，同时手动编写其余代码。](https://www.mightymeld.com/?utm_source=thisweekinreact5&utm_medium=newsletter&utm_campaign=1&utm_content=top)
- 👀 [React核心PR - react-server-dom-parcel包](https://github.com/facebook/react/pull/28138)：Parcel团队的Devon正在开发新的打包器集成方案。
- 👀 [Remix - 通过Remix Vite插件实现对Cloudflare的支持](https://github.com/remix-run/remix/tree/dev/templates/unstable-vite-cloudflare)
- 🐦 [Partykit - React服务器组件实时功能预览](https://twitter.com/threepointone/status/1751963277394116993)
- 📜 [我对Panda CSS的初体验](https://newsletter.baptiste.devessier.fr/archive/my-first-impressions-of-panda-css/)：Baptiste曾喜欢Tailwind，但现在更青睐Panda CSS，原因包括类型安全、样式分组可读性提升，以及开箱即用的样式合并与变体支持。
- 📜 [实现Next.js路由的完全类型安全](https://www.flightcontrol.dev/blog/fix-nextjs-routing-to-have-full-type-safety)：Next.js的typedRoute实验性功能尚不完善。通过路由构建器API可提升路由参数、搜索参数及链接等场景的类型安全。
- 📜 [迁移至Next.js App Router：优劣与痛点](https://www.flightcontrol.dev/blog/nextjs-app-router-migration-the-good-bad-and-ugly)：Flightcontrol团队使用App Router重构建仪表盘并分享心得。虽有积极体验，但整体更倾向选择Remix，且不愿再次使用Next.js开发服务器（注：他们仍停留在Next.js 13.5版本，近期性能已改善）。
- 📜 [如何在泛型组件中使用forwardRef](https://www.totaltypescript.com/forwardref-with-generic-components)：Matt通过重新定义forwardRef类型来解决类型推断问题。
- 📜 [无需重建更新Next.js公共环境变量](https://phase.dev/blog/nextjs-public-runtime-variables/)：NEXT_PUBLIC变量在构建时被内联到客户端包中。本文提出使用查找替换脚本实现免重建更新。
- 📜 [2024年如何启动React项目](https://www.robinwieruch.de/react-starter/)：Robin分析使用Vite、Next.js或Astro启动React项目的权衡取舍。
- 📜 [在App Router RSC中包含静态文件](https://www.hipstersmoothie.com/blog/posts/including-static-files-with-rscs)：展示Webpack高级功能如require.context和内联加载器的用法。
- 📜 [用Astro暂别React体验Qwik](https://thenewstack.io/take-a-qwik-break-from-react-with-astro/)：Paul通过多案例对比Qwik与React。"编写React风格代码，享受原生浏览器体验"。
- 📜 [React服务器组件在Web发展史中的定位](https://dev.to/matfrana/where-do-react-server-components-fit-in-the-history-of-web-development-1l0f)
- 📦 [Remix-Client-Cache - 使用clientLoader缓存服务器加载数据](https://github.com/Code-Forge-Net/remix-client-cache)
- 📦 [StyleX 0.5 - 新增stylex.attrs函数、ESLint排序规则、Babel别名选项及esbuild插件](https://stylexjs.com/blog/v0.5.0)
- 📦 [React Cosmos 6 - 独立开发和测试UI组件的沙箱环境，支持RSC、插件系统（Vite/Webpack/Next.js/RN集成）、懒加载模式和MDX测试用例](https://github.com/react-cosmos/react-cosmos/releases/tag/v6.0.0)
- 📦 [Panda CSS 0.29 - 配置验证、模式默认值、媒体查询令牌、颜色透明度调节等](https://github.com/chakra-ui/panda/discussions/2110)
- 📦 [React-Live-Chat-Loader 2.9 - 高性能在线聊天集成，新增HubSpot/Front支持](https://github.com/calibreapp/react-live-chat-loader/)
- 📦 [fumadocs - 基于Next.js构建文档站点的强大框架](https://github.com/fuma-nama/fumadocs)
- 📦 [React Bricks 4.2 - 支持RSC](https://docs.reactbricks.com/docs/rsc/visual-components/)
- 📦 [Redux Toolkit 2.1发布](https://github.com/reduxjs/redux-toolkit/releases/tag/v2.1.0)
- 🎥 [Jack Herrington - RSC和NextJS真有那么糟糕吗？](https://www.youtube.com/watch?v=u0OMdWJfdhg)：通过三个案例对比展示App Router相比Page Router的显著开发体验优势，并演示如何轻松封装和分发RSC逻辑。
- 🎥 [Nadia Makarevich - React进阶：全面解析记忆化机制](https://www.youtube.com/watch?v=huBxeruVnAM)

<SubscribeFormEmbed placement="middle" />

---

## 💸 赞助商 {#sponsor2}

[![React 全栈用户管理解决方案](/emails/issues/172/clerk.jpg)](https://clerk.com/?utm_source=sponsorship&utm_medium=newsletter&utm_campaign=thisweekinreact&utm_term=01-31-24)

**[React 全栈用户管理解决方案](https://clerk.com/?utm_source=sponsorship&utm_medium=newsletter&utm_campaign=thisweekinreact&utm_term=01-31-24)**

Clerk 为 React 应用提供开箱即用的认证与用户管理方案，助力现代 Web 应用快速落地。

其核心优势包括：

- 💅 预制登录/注册/用户档案/组织管理等 UI 组件，支持任意 CSS 库定制并部署至自有域名
- 📦 提供 React/React Native/Next.js/Redwood/Remix 等框架的专属 SDK
- ⚡ 无缝集成 Firebase/Supabase/Convex 等 BaaS 服务
- 🎁 内置用户管理、社交登录、魔法链接、多因素认证等企业级功能

立即通过 [快速入门指南](https://clerk.com/docs/quickstarts/overview?utm_source=sponsorship&utm_medium=newsletter&utm_campaign=thisweekinreact&utm_term=01-31-24) 开启您的项目🚀

---

## 📱 React-Native 动态 {#react-native}

本栏目现由 [Benedikt](https://twitter.com/bndkt) 联合主理，欢迎通过邮件或 [Twitter](https://twitter.com/bndkt) 提交反馈！

[![2023 年 React Native 生态调查报告](/emails/issues/172/stateofrn.jpg)](https://results.stateofreactnative.com/)

**[2023 年 React Native 生态调查报告](https://results.stateofreactnative.com/)**

作为各类"生态现状"调研的忠实读者，我始终认为这些数据能揭示技术社区的真实动向。社交媒体上的喧嚣是一回事，而开发者实际采用的技术栈则是另一番图景。今年这份延续性报告尤其珍贵——通过与去年数据的横向对比，我们可以捕捉到技术趋势的微妙变化。完整报告值得您 [亲自查阅](https://results.stateofreactnative.com/)，以下是我发现的几个颇具启示性的要点（部分结果完全出乎意料）：

- 状态管理领域仍处于非常有趣的状态（双关语），Redux以仅44%的留存率（去年为57%）排名垫底，但在使用率方面仍以78%（去年为85%）紧随React原生能力之后位居第二。
- 数据获取类别的结果与社交媒体上的关注度相符，TanStack Query和tRPC在兴趣度和留存率方面占据榜首，而Meta自家的Relay在Meta之外基本无人问津，使用率仅为5%。
- 导航的未来属于Expo Router，其使用率从去年的12%激增至如今的40%。
- 从社交媒体活跃度来看，样式方案是讨论最热烈的类别，选项繁多。在使用率方面，经典方案（StyleSheet API、行内样式、styled components）仍占主导，NativeWind和Tamagui正在迎头赶上。Tamagui在过去一年成功引发了最大兴趣（作为UI组件库也拥有最高的留存率和兴趣度），紧随其后的是新晋竞争者react-native-unistyles。
- 特别提及Expo：在"React Native工具"部分，前10名工具中有6个由Expo开发，部署类别的前2名选项也来自Expo。
- 超过85%的受访者认为React Native正朝着正确方向发展，认为当前构建RN应用过于复杂的开发者比例从约30%降至25%——这个比例仍然偏高，但我们似乎正朝着正确方向前进！

总体而言，这些非常有趣的结果值得[详细查看](https://results.stateofreactnative.com/)！衷心感谢Bartłomiej、Kacper和Software Mansion促成这次调研！

---

- 💸 [Moropo - 告别Detox耗时调试，数分钟内构建高效测试](https://www.moropo.com?utm_source=newsletter&utm_medium=emails&utm_campaign=twir-20240131)
- 👀 [React Native 0.74 PR - 启用新架构时默认采用无桥接模式](https://github.com/facebook/react-native/pull/42714)
- 👀 [Reanimated PR - 生成器支持](https://github.com/software-mansion/react-native-reanimated/pull/5565): William Candillon使用生成器编写动画效率显著，并为此功能贡献代码 (🐦 [演示](https://twitter.com/wcandillon/status/1751893521907261773))
- 👀 [React Native性能仪表盘Flashlight](https://app.flashlight.dev/projects/react-native): 通过Flashlight持续监测各版本React Native性能表现，当前仅包含基于FlatList的测试场景
- 🐦 [React Native visionOS - 即将推出全新𝚂𝚙𝚊𝚝𝚒𝚊𝚕 API](https://x.com/o_kwasniewski/status/1750532404245373434?s=20)
- 📖 [Expo文档 - Sentry集成指南](https://docs.expo.dev/guides/using-sentry/): SDK 50中Sentry集成大幅简化，仅需安装@sentry/react-native依赖，无需在app.json配置钩子
- 📖 [Skia文档 - Atlas组件 - 高效渲染海量相似纹理/图像](https://shopify.github.io/react-native-skia/docs/shapes/atlas/): 查看🐦 [演示视频](https://twitter.com/alihdjr/status/1751175731533488464)了解实际效果
- 🧑‍🎓 [使用Expo EAS构建部署React Native应用 - Expo工程师Kadi Kraman免费课程](https://egghead.io/courses/build-and-deploy-react-native-apps-with-expo-eas-85ab521e)
- 📜 [John Gruber - 苹果应对欧盟DMA法案的调整方案](https://daringfireball.net/2024/01/apples_plans_for_the_dma): 苹果为满足欧盟要求对App Store进行多项调整，被多家媒体评价为"恶意合规" (另见: 📖 [苹果开发者文档](https://developer.apple.com/support/alternative-browser-engines/))
- 📜 [2024年React Native Testing Library最佳实践](https://mdj.hashnode.dev/recommended-practices-for-react-native-testing-library-in-2024): RNTL作者Maciej分享最新功能指南（如screen API和语义查询），帮助开发者跟进最新改进
- 📜 [React Native与Web View通信实践](https://making.close.com/posts/react-native-webviews): 本文详解如何建立原生与网页部分的通信机制，避免混合开发中的割裂感
- 📜 [基于React Native+Skia构建PhotoRoom式背景移除应用](https://medium.com/@ludwighenne/building-a-photoroom-like-background-remover-app-with-react-native-and-skia-%EF%B8%8F-540743c6ec0f)
- 📦 [React Native Storybook 7发布](https://github.com/storybookjs/react-native/discussions/545): 历经开发周期后，RN版本终与主项目大版本同步
- 📦 [React Native 0.73.3 - 错误修复版本](https://github.com/facebook/react-native/releases/tag/v0.73.3)
- 📦 [vision-camera-resize-plugin 2.0: 完全重写为C++，性能显著提升，支持自定义裁剪逻辑](https://github.com/mrousavy/vision-camera-resize-plugin/releases/tag/v2.0.0)
- 📦 [Tamagui 1.88 - 重大更新：支持Expo SDK 50，通过新Metro插件简化配置](https://github.com/tamagui/tamagui/releases/tag/v1.88.0)
- 📦 [Create Expo Stack 2.4 - 集成Expo SDK 50/Expo Router v3/NativeWind v4/Restyle/Unistyles的启动模板](https://github.com/danstepanov/create-expo-stack/releases/tag/create-expo-stack%402.4.0)
- 🎙️ [RNR第286期 - React Native 0.73新特性解析](https://x.com/ReactNativeRdio/status/1751015494591918434?s=20)
- 🎙️ [Rocket Ship第27期 - Theo Browne谈React Native核心竞争力](https://share.transistor.fm/s/5b8f8a1a)
- 🎥 [Simon Grimm - 它能取代NextJS吗？](https://www.youtube.com/watch?v=gzehQxHxtfw): Expo Router发展为全栈React框架后，正成为Next.js的直接竞争者
- 🎥 [Theo Brown - 移动开发者厌恶服务器？Expo的解决方案](https://www.youtube.com/watch?v=2P0q1EdH_oQ)

---

## 🔀 其他 {#other}

- 📜 [CSS revert-layer 的实用场景 - 比 Shadow DOM 更优秀的隔离/封装方案](https://www.mayank.co/blog/revert-layer/)
- 📜 [你可能不再需要 eslint-config-prettier 或 eslint-plugin-prettier](https://www.joshuakgoldberg.com/blog/you-probably-dont-need-eslint-config-prettier-or-eslint-plugin-prettier/)
- 📜 [Web Component 的成功故事](https://jakelazaroff.com/words/the-web-component-success-story/)
- 📜 [12 个现代 CSS 单行升级技巧](https://moderncss.dev/12-modern-css-one-line-upgrades/)
- 📜 [Zed 编辑器现已开源 - 基于 Rust 的免费现代化 IDE](https://zed.dev/blog/zed-is-now-open-source)
- 📦 [TypeScript 5.4 Beta - 新增 `NoInfer<T>`、闭包类型收窄、groupBy...](https://devblogs.microsoft.com/typescript/announcing-typescript-5-4-beta/)
- 📦 [Safari 17.4 beta - 支持 groupBy、withResolvers、@scope、ArrayBuffer 及 Intl 改进](https://developer.apple.com/documentation/safari-release-notes/safari-17_4-release-notes)
- 📦 [Qwik 1.4 - JSX 类型变更、自动 Link 预加载、MPA 导航回退](https://github.com/BuilderIO/qwik/releases/tag/v1.4.0)
- 📦 [Lucia Auth 3.0 - 大幅简化库结构，OAuth 逻辑抽离至新包 "arctic"](https://github.com/lucia-auth/lucia/discussions/1361)
- 📦 [Shiki 1.0 beta.0 - 现代化 ESM 语法高亮器 - 将 Shikiji 合并回 Shiki](https://github.com/shikijs/shiki/releases/tag/v1.0.0-beta.0)
- 📦 [Adonis v6 - 支持 ESM、类型安全改进...](https://adonisjs.com/blog/adonisjs-v6-announcement)
- 📦 [Deno 1.40 - 新增 Temporal API、meta.filename/dirname、装饰器](https://deno.com/blog/v1.40)

---

## 🤭 趣味 {#fun}

[![alt](/emails/issues/172/meme.jpg)](https://twitter.com/dabit3/status/1752143163546911036)

下次见！👋