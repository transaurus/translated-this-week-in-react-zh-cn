---
slug: /174
title: "This Week In React #174: ReactLabs, React-Strict-DOM, Forget, Remix, Hono, Redwood, Isograph, SafeTest, React-Aria, RN 0.74 RC, Reanimated, RNGH, Expo, RN+TV, VisionCamera, Hermes, TC39, LLRT, Vite..."
authors: [slorber, bndkt]
date: 02-22-2024
---

大家好！

上周我休息了一周，所以这次我们要补上两周的新闻动态——内容可真是**多**啊！我知道很多读者喜欢我邮件里这种事无巨细的风格，所以...准备好被海量链接淹没吧 😅！

Meta带来了重磅更新，除了你们可能已经关注的React Labs动态外，最近还有面向跨平台开发者的React Strict DOM更新。Remix 2.7的里程碑式发布也让我兴奋不已，这标志着从React Router应用迁移到Remix SPA模式的路径已经开启。

最后召集：想参加[2024 React Conf](https://conf.react.dev/)（5月15-16日内华达州）吗？距离[抽奖赠票](https://forms.reform.app/bLaLeE/react-conf-2024-ticket-lottery/1aRQLK)截止只剩一周了，你也可以向[演讲征集](https://sessionize.com/react-conf-2024/)提交议题。

<!-- truncate -->

**💡 [在Twitter查看本期简报](https://slo.im/thread) - 可视化版 🎨**

---

import Support from "../_support.mdx";

<Support />

---

## 💸 赞助商 {#sponsor1}

[![Axiom - Vercel应用的最佳日志平台](/emails/issues/171/axiom.jpg)](https://axiom.co/vercel)

**[Axiom - Vercel应用的最佳日志平台](https://axiom.co/vercel)**

😴 安心入睡吧，Axiom为Vercel项目提供的零配置可观测性已全面守护。

- 使用Axiom预建仪表板总览所有Vercel日志和关键指标，一键钻取具体项目和部署详情，直观查看函数性能表现
- [next-axiom](https://github.com/axiomhq/next-axiom)支持从Next.js项目的任何部分（客户端、边缘或服务端）发送日志和事件，无需特殊配置
- 直接从代码发送结构化日志，并与Vercel日志关联分析

Axiom能100%高效捕获事件数据，您再也不用担心采样偏差或数据保留问题，也无需猜测用户真实体验。

**附**：我本人就用它来[监控简报订阅数据](https://twitter.com/sebastienlorber/status/1528666563452317696) 😉

---

## ⚛️ React动态 {#react}

[![React实验室 - 2024年2月工作进展](/emails/issues/174/react-labs.jpg)](https://react.dev/blog/2024/02/15/react-labs-what-we-have-been-working-on-february-2024)

**[React实验室 - 2024年2月工作进展](https://react.dev/blog/2024/02/15/react-labs-what-we-have-been-working-on-february-2024)**

本周我们迎来了React实验室近一年来的首次官方更新，其中包含多项激动人心的公告。虽然我们此前已报道过部分内容，但这份官方总结依然值得关注！

React Forget现已改称 🐦 [React Compiler](https://twitter.com/en_JS/status/1758224340880158955)，且 🐦 [Instagram的生产环境部署](https://twitter.com/sebastienlorber/status/1734607171030303186)似乎已取得成功。

下一个React版本将是主版本更新。React 19已近在咫尺，而某个[技术大会](https://conf.react.dev/)正是官宣的绝佳场合 😏。该版本还将内置页面元数据管理（原生支持React-Helmet的功能，并具备流式渲染能力）、资源加载（含Suspense集成）以及客户端到服务端的数据传输Actions。这意味着Next.js、Remix等元框架需要自行实现的领域正在缩小。

最被低估的React即将推出功能之一——Offscreen API（暂定名称为Activity）——目前被暂时降级优先级，以集中精力开发React 19。我们需要再等待一段时间，才能充分利用React 18引入的并发模型。

总体而言，现在正是成为React开发者的激动人心的时刻，我们期待下一个主要版本的发布！

另请参阅：

- 🐦 [Andrew Clark的推文](https://twitter.com/acdlite/status/1758229889595977824)包含了一些我之前没听说过的有趣细节，比如React refs将成为普通props，或者可以使用`<Context>`代替`<Context.Provider>`。
- 🎥 [Theo Browne的总结视频 - React 19来了，你准备好了吗？](https://www.youtube.com/watch?v=B-tjhF7ojeA)

---

[![Remix 2.7 - Remix Vite现已稳定](/emails/issues/174/remix-vite.jpg)](https://remix.run/blog/remix-vite-stable)

**[Remix 2.7 - Remix Vite现已稳定](https://remix.run/blog/remix-vite-stable)**

这是Remix的一个重要版本，稳定了Vite插件和SPA模式，提供了对Cloudflare Pages的适当支持，引入了预设系统，并带来了许多其他有用的改进。即将发布的专门文章可能会详细介绍新的SPA模式如何帮助Vite + React Router应用程序过渡到Remix，而无需引入服务器运行时。如果你还在使用Create-React-App，现在可能是考虑迁移到Vite的好时机！

---

- 💸 [React组件分析工具Omlet — 扫描代码库以测量组件使用情况，提升代码质量与设计系统采用率](https://omlet.dev/?utm_campaign=partner_this-week-in-react_newsletter-quick-link-feb-2024)
- 🐦 [Next.js开发者工具预览版 - 可视化预渲染内容、流传输、缓存等](https://twitter.com/rauchg/status/1757402186060083272)
- 👀 [React文档PR - 新增useFormStatus陷阱示例](https://github.com/reactjs/react.dev/pull/6620)：新hook useFormStatus必须嵌套在充当提供者的`<form>`组件下。若无法满足，可通过startTransition重新实现
  👀 [React PR - 将所有客户端代码迁移至react-dom/client](https://github.com/facebook/react/pull/28271)
- 📜 [HTML流式传输与DOM差异算法](https://aralroca.com/blog/html-node-streaming)：探讨流式传输的多场景应用，包括React Suspense工作原理的简化示例
- 📜 [React 19将引入编译优化](https://reacttraining.com/blog/react-19-will-be-compiled)：解析记忆化机制，并对比框架"编译光谱"。即使引入编译器，React 19仍比Svelte的编译程度低
- 📜 [React、Solid、htmx的边界探索](https://bobaekang.com/blog/react-solid-htmx/)：关于跨越"网络鸿沟"不同方案的有趣思考
- 📜 [Next.js 14服务端组件迁移实战经验](https://medusajs.com/blog/client-server-transition-learnings-nextjs-14-server-components/)：电商框架Medusa升级模板后呈现的代码对比显示，适应RSC模型后代码大幅简化
- 📜 [2024年React趋势展望](https://www.robinwieruch.de/react-trends/)：Robin Wieruch分享年度值得关注的React技术趋势
- 📜 [UI = f(状态ⁿ)](https://daverupert.com/2024/02/ui-states/)：Dave列举影响UI的各种状态类型。虽让人联想到React，但内容保持框架中立
- 📜 [React中的整洁架构实践](https://alexkondov.com/full-stack-tao-clean-architecture-react/)
- 📜 [XState与React的全局状态管理](https://stately.ai/blog/2024-02-12-xstate-react-global-state)
- 📜 [Astro框架解析](https://www.eddyvinck.com/blog/what-is-astro/)
- 📜 [OpenTask - Next.js应用路由案例研究](https://flsilva.com/blog/opentask-nextjs-app-router-case-study/)
- 📜 [基于Next.js应用路由与无头Hashnode构建博客](https://spacejelly.dev/posts/how-to-build-a-blog-with-next-js-app-router-headless-hashnode)
- 📜 [通过字段组件抽象简化React表单渲染](https://claritydev.net/blog/abstract-react-form-fields-with-field-component)
- 📜 [Next.js应用路由的页面密码保护方案](https://www.alexchantastic.com/password-protecting-next)
- 📜 [Shiki语法高亮在RSC与Next.js中的实现](https://www.luckymedia.dev/blog/syntax-highlighting-with-shiki-react-server-components-and-next-js)
- 📜 [React应用DOM体积优化指南](https://scientyficworld.org/how-to-optimize-the-dom-size-in-react-js/)
- 📜 [Remix实现增量静态再生与高级缓存策略](https://developers.netlify.com/guides/how-to-do-isr-and-advanced-caching-with-remix/)
- 📦 [Hono 4.0发布 - 支持SSG、客户端组件、文件路由](https://github.com/honojs/hono/releases/tag/v4.0.0)：这个由Cloudflare开发者维护的框架逆向实现了类似React的useState等客户端hook，业界仍在等待🐦[Aviation框架](https://twitter.com/GregBrimble/status/1758007869759189036)问世
- 📦 [Isograph 0.1.0发布](https://isograph.dev/blog/2024/02/15/isograph-0.1.0/)：前Meta Relay维护者打造的新式React GraphQL客户端进入alpha阶段
- 📦 [SafeTest - 前端测试新范式](https://netflixtechblog.com/introducing-safetest-a-novel-approach-to-front-end-testing-37f9f88c152d)：Netflix团队结合React/Jest/Vitest/Playwright的创新测试方案，旨在同时解决集成测试与E2E测试的痛点
- 📦 [React Aria 2024-02-13版本更新](https://react-spectrum.adobe.com/releases/2024-02-13.html)：新增alpha版子菜单功能(🐦[演示](https://twitter.com/devongovett/status/1757540075636744236))
- 📦 [Redwood 7.0发布 - 新增Redwood Studio、GraphQL实时更新等特性](https://community.redwoodjs.com/t/redwood-v7-0-0-is-now-available/5777)
- 📦 [Waku v0.19.3支持开发模式下的RSC热重载](https://github.com/dai-shi/waku/blob/main/CHANGELOG.md#0193---2024-02-14)
- 📦 [Astro 4.4专注性能优化](https://astro.build/blog/astro-440/)
- 📦 [Starlight 0.19支持自定义页面](https://starlight.astro.build/guides/pages/#custom-pages)
- 📦 [rsc-html-stream - 在HTML流中注入/读取RSC负载](https://github.com/devongovett/rsc-html-stream)
- 📦 [react-print-pdf库发布](https://github.com/OnedocLabs/react-print-pdf)
- 📦 [Storybook可视化测试插件进入beta阶段](https://storybook.js.org/blog/visual-tests-addon-beta/)
- 🎥 [Ben Holmes - 从零实现React Suspense](https://www.youtube.com/watch?v=cdOyOgwt9Zc)
- 🎥 [Ryan Toronto - React中的乱序流式传输](https://www.youtube.com/watch?v=23bHSDJD9y4)
- 🎥 [Nadia Makarevich - 深入React协调机制](https://www.youtube.com/watch?v=cyAbjx0mfKM)
- 🎥 [Jack Herrington - 你的React组件是否过于庞大？](https://www.youtube.com/watch?v=NsFmOttIW9Y)

<SubscribeFormEmbed placement="middle" />

---

## 💸 赞助商 {#sponsor2}

[![React版FormBuilder SDK](/emails/issues/171/tripetto.jpg)](https://tripetto.com/sdk/this-week-in-react/?utm_source=thisweekinreact&utm_medium=sponsor&utm_campaign=sdk)

**[React版FormBuilder SDK](https://tripetto.com/sdk/this-week-in-react/?utm_source=thisweekinreact&utm_medium=sponsor&utm_campaign=sdk)**

专为React项目打造的完整表单解决方案，已被财富500强企业采用。提供易于使用的开源组件，助您在React应用中快速构建强大表单。文档详尽，分钟级部署，支持深度定制。

- 可视化构建器创建复杂表单；
- 运行器部署表单并收集数据；
- 灵活的表单布局（对话式、聊天式等）与样式；
- 可扩展的自定义问题类型；
- 完整的文档、示例和演示；
- 无外部依赖，支持自托管；
- 免费试用、测试与优化。

TWIR读者专享：[立享FormBuilder SDK许可证25%折扣](https://tripetto.com/sdk/this-week-in-react/?utm_source=thisweekinreact&utm_medium=sponsor&utm_campaign=sdk)。

---

## 📱 React-Native {#react-native}

本节现由[Benedikt](https://twitter.com/bndkt)联合撰写。欢迎通过邮件或[Twitter](https://twitter.com/bndkt)向我们反馈意见！

---

[![React Strict DOM](/emails/issues/174/strict-dom.jpg)](https://github.com/facebook/react-strict-dom)

**[React Strict DOM](https://github.com/facebook/react-strict-dom)**

Meta本周不仅发布了React的重磅消息。今日GitHub上新出现了一个仓库：[react-strict-dom](https://github.com/facebook/react-strict-dom)。README将其描述为"实验性的React DOM与StyleX集成方案，旨在改进和标准化面向Web与原生平台的React组件样式开发"。该项目基于[《React DOM for Native》RFC](https://github.com/react-native-community/discussions-and-proposals/pull/496)的理念，笔者认为这可能彻底改变未来跨平台应用开发的范式。当前React Native实现跨平台的主流方案是React Native Web（RNW），即在Web端模拟RN组件和API。虽然RNW非常优秀，但常给人削足适履之感。react-strict-dom的核心思想是建立统一支持Web、iOS和Android（未来可能支持更多平台）的DOM库，其元素API基于Web标准，因此您在上图看到的语法与HTML高度相似。

一如既往，Dan Abramov用精辟的🐦[推文](https://twitter.com/dan_abramov2/status/1760245165703184516)阐明了核心理念：

> "这像是RNW的精神续作，但采用了逆向思维（Web API已成标准，因此RN正在构建对其严格子集的支持）。本质上，您将能在RN中渲染`<div>`元素。"

从当前的[兼容性状态](https://github.com/facebook/react-strict-dom/blob/main/packages/react-strict-dom/COMPATIBILITY.md)来看仍有长路要走，但这无疑是实现更普适React的重要里程碑！Meta已在内部使用该方案！另可参阅🐦[Lorenzo的推文串了解微软的参与情况](https://twitter.com/Kelset/status/1760367655423549480)。

---

- 👀 [Hermes PR - 新增对ES2023数组非变异方法的支持](https://github.com/facebook/hermes/commit/b30f0e453d82594654810730211e092415aa6a3c): Hermes对ES标准的支持正在持续完善。关于Hermes，另可参阅[这场讨论](https://github.com/awslabs/llrt/issues/110#issuecomment-1939825912)，涉及将其作为AWS Lambda/无服务器函数的运行时应用于AWS LLRT。
- 💬 [Lorenzo Sciandra - react-native-macos项目状态回顾](https://github.com/microsoft/react-native-macos/issues/1935#issuecomment-1935714556): 简而言之：项目持续活跃，但需投入大量工作以同步上游更新。微软和Meta均在实际业务中积极使用！
- 📜 React Native电视应用开发：[Expo技术博客指南](https://expo.dev/blog/how-to-build-tv-apps)及[ReactNativeTV.com资源站](https://www.reactnativetv.com/)
- 📜 [Expo - 扩展开发者工具插件生态](https://expo.dev/blog/dev-tools-plugins)
- 📜 [expo-camera/next版本准备就绪](https://expo.dev/blog/expo-camera-next)：该库定位为简单易用的相机模块，高级需求建议使用react-native-vision-camera。
- 📜 [React Native Screens如何赋能Expo Router？](https://blog.swmansion.com/how-react-native-screens-powers-expo-router-766480fd2d06)
- 📜 [通过RealityKit扩展React Native visionOS能力](https://www.oskarkwasniewski.dev/blog/react-native-visionos-realitykit-snow)
- 📜 [CI与本地环境中的图片优化实践](https://www.callstack.com/blog/image-optimization-on-ci-and-local)
- 📖 [苹果将在iOS 17.4欧盟版本中正式移除PWA支持](https://developer.apple.com/support/dma-and-apps-in-the-eu)：这更凸显了使用React Native构建真原生应用的价值。
- 📖 [新版React Native Gesture Handler文档上线](https://docs.swmansion.com/react-native-gesture-handler/)
- 🐦 [Evan Bacon：支持原生上下文菜单的新版Expo Router模板](https://twitter.com/Baconbrix/status/1759639968396333392?s=20)
- 📦 [React Native 0.74-RC.0发布](https://github.com/facebook/react-native/releases/tag/v0.74.0-rc.0)
- 📦 [gluestack-ui整合NativeWind - 开箱即用的组件库](https://gluestack.io/ui/with-nativewind/docs/overview/introduction)：类似shadcn/ui，但专为React Native设计。
- 📦 [react-native-live-markdown](https://github.com/Expensify/react-native-live-markdown)：支持实时Markdown格式渲染的文本输入组件。
- 📦 [expo-share-extension - 创建带自定义视图的iOS原生分享扩展](https://github.com/MaxAst/expo-share-extension)
- 📦 [react-native-reanimated 3.7.0](https://github.com/software-mansion/react-native-reanimated/releases/tag/3.7.0)：新增withSpring的clamp参数、worklet生成器支持、visionOS兼容。
- 📦 [react-native-vision-camera 3.9](https://github.com/mrousavy/react-native-vision-camera/releases/tag/v3.9.0)：大量新特性，特别是Android端的对焦、闪光灯控制等功能。
- 📦 [react-native-gesture-handler 2.15 - 支持macOS/visionOS，TurboModule集成](https://github.com/software-mansion/react-native-gesture-handler/releases/tag/2.15.0)
- 🎥 [Theo Browne - 2023年React Native生态现状分析](https://www.youtube.com/watch?v=sJItBjarnr4)
- 🎥 [Jamon Holmgren - MobX-State-Tree入门教程](https://www.youtube.com/watch?v=n_VjjJxyd8Q)
- 🎥 [William Candillon - 心跳动画实现解析](https://www.youtube.com/watch?v=3pVn3_Q_QfA)
- 🎙️ [The React Native Show第35期 - 跨平台React Native应用开发](https://www.callstack.com/podcasts/multiplatform-app-development-with-react-native)
- 🎙️ [React Native Radio第288期 - 2023年React Native调研结果解读](https://reactnativeradio.com/episodes/rnr-288-survey-says-react-native-got-more-popular)
- 🎙️ [Rocket Ship第29期 - 对话Áron Berezkin谈React Native现状](https://share.transistor.fm/s/aca1a636)
- 🎙️ [Rocket Ship第30期 - 与Frank Calise探讨Ignite React Native项目](https://share.transistor.fm/s/059aa605)
- 📅 [Chain React 2024大会门票开售 - 2024年7月17-19日，美国波特兰](https://twitter.com/ChainReactConf/status/1758192473686622271)
- 📅 [React Native EU大会更名为React Universe Conf - 2024年9月5-6日，波兰弗罗茨瓦夫](https://www.reactuniverseconf.com)

---

## 🔀 其他 {#other}

- 👀 [第100次TC39会议更新 - Promise.try、函数装饰器、ArrayBuffer、Uint8Array、迭代器等](https://dev.to/hemanth/updates-from-the-100th-tc39-meeting-4j2f)
- 👀 [TC39引入新阶段2.7](https://github.com/tc39/process-document/pull/37)
- 👀 [ES2024候选发布版](https://ecmascript-daily.github.io/2024/02/17/release-es2024-candidate-february-2024-tc39-ecma262)
- 👀 [Biome插件RFC讨论](https://github.com/biomejs/biome/discussions/1762)
- 👀 [Vite 6讨论 - 开始征集下个主版本意见](https://github.com/vitejs/vite/discussions/15886)
- 👀 [JSR - Deno团队推出的全新ESM专属包注册表](https://jsr.io/)
- 📜 [JSR初体验](https://www.kitsonkelly.com/posts/jsr-first-impressions)
- 📜 [Shadow DOM实用指南](https://www.mayank.co/blog/declarative-shadow-dom-guide/)
- 📜 [如何居中一个Div](https://www.joshwcomeau.com/css/center-a-div/)
- 📜 [代码覆盖率实战应用](https://www.epicweb.dev/making-use-of-code-coverage)
- 📜 [GitHub Actions Artifacts v4入门指南](https://github.blog/2024-02-12-get-started-with-v4-of-github-actions-artifacts/)
- 📜 [JavaScript Set即将支持并集、交集、差集等操作](https://www.sonarsource.com/blog/union-intersection-difference-javascript-sets/)
- 📜 [Qwik 2.0前瞻 - 更轻量、更快速、更强大](https://www.builder.io/blog/qwik-2-coming-soon)
- 📜 [Vercel完成Turborepo从Go到Rust的迁移](https://vercel.com/blog/finishing-turborepos-migration-from-go-to-rust)
- 📜 [Node.js社区热议：是否默认启用Corepack及可能解除npm捆绑](https://socket.dev/blog/node-community-debates-enabling-corepack-unbundling-npm)
- 📜 [Nx发布周回顾 - Nx 18、Project Crystal、Nx Agents等](https://blog.nrwl.io/launch-nx-week-recap-3bc7c6c49ce1)
- 📦 [AWS LLRT - 基于Rust QuickJS引擎的Lambda专用JS运行时](https://github.com/awslabs/llrt)
- 📦 [Observables - 面向数据应用、仪表盘、报告等的静态站点生成器](https://github.com/observablehq/framework)
- 📦 [Apple Pkl - 专为配置设计的编程语言](https://pkl-lang.org/blog/introducing-pkl.html)
- 📦 [Tempo - JavaScript中最简便的日期处理方案](https://tempo.formkit.com/)
- 📦 [Shiki 1.0 - 强大而优雅的语法高亮工具](https://github.com/shikijs/shiki/releases/tag/v1.0.0)
- 📦 [Mock Service Worker 2.2 - 服务边界API](https://mswjs.io/blog/introducing-server-boundary)
- 📦 [Vitest 1.3 - onTestFinished、快照序列化、浏览器模式与CLI改进](https://github.com/vitest-dev/vitest/releases/tag/v1.3.0)
- 📦 [Vite 5.1 - 实验性Vite运行时API](https://vitejs.dev/blog/announcing-vite5-1.html)
- 🎥 [Node.js纪录片预告片](https://www.youtube.com/watch?v=SfWPqr04srM)

---

## 🤭 趣闻 {#fun}

[![alt](/emails/issues/174/meme.jpg)](https://twitter.com/sebastienlorber/status/1758252538883723759)

下次见！👋