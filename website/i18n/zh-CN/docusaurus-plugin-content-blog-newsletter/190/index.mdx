---
slug: /190
title: "This Week In React #190: Suspense, Internals Explorer, DevTools, RSC + Vite, Codemod, Astro, INP, composition, Reassure, Fumadocs, tscircuit, Sonner, Relay, Reanimated, RNGH, BottomSheet, RNScreens, VisionOS, TC39, Node, CSS ..."
authors: [slorber, bndkt]
date: 06-19-2024
---

大家好！

我（Seb）回来了，很高兴地告诉大家这份简报的订阅人数已经突破**4万**！🎉

感谢大家的支持以及将简报分享给朋友们的举动。\
有任何改进建议、反馈意见或链接投稿？直接回复这封邮件即可！

本周我们期待已久的React 19稳定版因Suspense行为变更引发争议而稍有延迟。

React Native方面，首个基于React 19的0.75版本候选版即将发布。

<!-- truncate -->

---

import Support from "../_support.mdx";

<Support />

---

## 💸 赞助 {#sponsor1}

[![企业级革命性React网格](/emails/issues/190/advertfinal.jpg)](https://1771technologies.com/graphitegrid)

**[企业级革命性React网格](https://1771technologies.com/graphitegrid)**

数据网格是Web应用中的复杂组件，但现有方案效率低下、维护成本高且性能不佳。[Graphite Grid](https://1771technologies.com/graphitegrid)通过两大核心特性改变格局：可重定向渲染与响应式信号状态。

**Graphite Grid**将网格状态与视图逻辑分离，允许单一统一状态模型支持多种渲染目标（声明式或命令式）。内置**DOM与Canvas**渲染器，为开发者提供灵活的高性能选择 🚀。

该网格采用声明式设计并保持一致性，利用状态信号确保与应用的完美集成。作为**专为React打造**的方案，这是唯一基于React状态管理原语构建的JavaScript数据网格。[立即体验！](https://1771technologies.com/graphitegrid/demo)

---

## ⚛️ React动态 {#react}

![Suspense与兄弟组件](/emails/issues/190/suspense.jpg)

**[React 19与Suspense——三幕戏剧](https://tkdodo.eu/blog/react-19-and-suspense-a-drama-in-3-acts)**

React 19 RC.0两周前发布，本可能成为我们期待已久的稳定版。但由于对Suspense行为的争议性修改，React团队决定暂缓发布直至找到解决方案。

与React 18不同，v19中若组件挂起（suspend），其兄弟组件将不再渲染，可能导致瀑布流问题。许多场景下（使用"渲染时获取"模式、React.lazy()等），异步代码会从并行改为串行执行。此变更有其合理性：能更快显示Suspense回退内容，避免无意义渲染。理论上若在路由层"提升"请求（使用"获取即渲染"模式）可避免瀑布流，但现有应用大多未采用此模式，性能将受影响。

**相关资源**:

- 📜 [React 19如何（险些）拖慢互联网](https://blog.codeminer42.com/how-react-19-almost-made-the-internet-slower/)
- 🔗 [React 19问题——禁用挂起组件兄弟节点的预渲染破坏常见模式](https://github.com/facebook/react/issues/29898)
- 🎥 [Jack Herrington - 代码详解React 19的Suspense重大变更](https://www.youtube.com/watch?v=sgnw8dRZa3Q)
- 🎥 [Josh tried coding - React 19存在问题](https://www.youtube.com/watch?v=PZYXTFnP2po)

---

![React内部原理探索器 - 截图+logo](/emails/issues/190/rie.jpg)

**[React内部原理探索器——直观了解React工作机制](https://jser.dev/2024-05-11-introducing-rie/)**

一个全新的交互式演练场，可深入探索React底层工作原理。您能逐步查看内部机制，甚至可以选择React版本。对于本期内容特别有价值的是，它能直观展示React 18与React 19在Suspense行为上的差异！

---

- 💸 [Meilisearch - 为React构建即时搜索功能](https://www.meilisearch.com/with/react?utm_campaign=sponsoring&utm_content=june-19&utm_source=thisweekinreact)
- 👀 [React核心PR - 在服务端抛出错误的控制台标记环境名称](https://github.com/facebook/react/pull/29846)：通过[server]控制台标记快速识别错误来源的开发者体验优化。
- 🐦 [React Router 7 - Ryan Florence预览视频](https://x.com/ryanflorence/status/1801388170891903252)
- 🗓️ [The Geek Conf](https://www.thegeekconf.com/?utm_source=thisweekinreact) - 🇩🇪 柏林 - 7月18日&25日 - 使用代码"TWIR"可享9折。Tomasz Sapeta (Expo/Software Mansion)、Carmen Huidobro (DevCraft Academy)和Atila Fassina (CrabNebula)将发表演讲！
- 🗓 [dotJS](https://www.dotjs.io/?utm_source=thisweekinreact) - 🇫🇷 巴黎 - 6月27日 - 距离开幕仅剩1周！使用代码"TWIR"享9折
- 📜 [Codemod与React团队达成合作](https://codemod.com/blog/react-announcement)：Codemod公司将协助维护react-codemod代码库，帮助开发者升级至React 19。
- 📜 [Astro未来系列 - 零JS视图过渡、Astro内容层与服务器岛屿](https://astro.build/blog/future-of-astro-zero-js-view-transitions/)：Astro基于浏览器原生跨文档视图过渡特性，对客户端路由和SPA的必要性提出质疑。文章还介绍了其CMS集成改进方案（使用LibSQL）和类Suspense的"server:defer"指令。
- 📜 [解密INP指标：新工具与可行洞察](https://vercel.com/blog/demystifying-inp-new-tools-and-actionable-insights)：Vercel CTO指出新核心网页指标INP（交互到下次绘制）存在误导性，通过Next.js文档站点的React示例（JS/TS代码块语言选择器）说明用户输入需在200ms内响应，推荐使用"await-interaction-response"包或React transitions分离交互与渲染逻辑。
- 📜 [React服务端组件与Vite实验](https://danielnagy.me/posts/Post_usaivhdu3j5d)：从零搭建Vite+RSC的高级教程，框架开发者必备资源。（作者调侃这是为猫咪Dan搭建的博客😄）
- 📜 [如何组合多参数JavaScript函数](https://jrsinclair.com/articles/2024/how-to-compose-functions-that-take-multiple-parameters-epic-guide/)：演示了在React useState中使用compose()函数等函数式编程技巧。
- 📜 [带加载状态的React表单](https://www.robinwieruch.de/react-form-loading-pending-action/)：展示使用useActionState、useFormStatus和useTransition获取表单加载状态的三种方案。
- 📜 [Redwood「重装上阵」- 开发者体验演进](https://redwoodjs.com/blog/love-reloaded-a-dx-story)：分析三种即时反馈机制的权衡，RSC方案将先采用实时重载，后续计划实现快速刷新。
- 📜 [在Astro中使用React Query](https://hounie.me/writings/how-to-use-react-query-with-astro/)：采用nanostores替代React Context的方案。
- 📜 [next-safe-action实现Next.js服务端动作](https://www.davegray.codes/posts/nextjs-server-actions-with-next-safe-action)：该库处理类型安全与Zod输入验证。
- 📜 [Next与Astro混合国际化方案（四部曲）](https://www.ericburel.tech/blog/hybrid-i18n-next-astro-1)
- 📜 [编写SOLID原则的React Hook](https://www.perssondennis.com/articles/write-solid-react-hooks)
- 📜 [全栈Web Push API指南 - 为Remix Indie Stack添加推送通知](https://www.bocoup.com/blog/full-stack-web-push-api-guide)
- 📦 [React DevTools 5.3 - 弱化StrictMode冗余日志，多项修复与重构](https://github.com/facebook/react/blob/main/packages/react-devtools/CHANGELOG.md#530)
- 📦 [Vercel AI SDK 3.2](https://vercel.com/blog/introducing-vercel-ai-sdk-3-2)：现仅需useChat()和streamText即可在React项目中构建客户端生成式UI聊天机器人
- 📦 [Reassure 1.0 - React/React Native性能测试工具](https://github.com/callstack/reassure/releases/tag/reassure%401.0.0)
- 📦 [Fumadocs 12 - Next.js文档框架](https://fumadocs.vercel.app/blog/v12)
- 📦 [react-distributed-components - 无缝组合客户端与服务端组件](https://github.com/daniel-nagy/react-distributed-components)
- 📦 [tscircuit - 用React和AI设计电子电路](https://tscircuit.com/)
- 📦 [Relay 17.0](https://github.com/facebook/relay/releases/tag/v17.0.0)
- 📦 [Sonner 1.5 - Toast库体积缩小3倍并多项改进](https://github.com/emilkowalski/sonner/releases/tag/v.1.5.0)
- 📦 [Remix隐私栈 - Indie Stack + GDPR/CCPA合规流程 + 自托管方案](https://www.bocoup.com/blog/announcing-the-privacy-stack-for-remix)
- 🎥 [Delba - Next.js认证最佳实践（服务端组件/动作/中间件）](https://www.youtube.com/watch?v=N_sUsq_y10U)
- 🎥 [Jolly Coding - 为什么应该使用React Aria组件](https://www.youtube.com/watch?v=lTPh6NGLAmk)

<SubscribeFormEmbed placement="middle" />

---

## 💸 赞助商 {#sponsor2}

[![加入React Native性能优化课程](/emails/issues/190/AdCourseTWIR.jpg)](https://hubs.li/Q02B4mFd0)

**[加入React Native性能优化课程](https://hubs.li/Q02B4mFd0)**

**没有应用能成为拼凑的星球**

因此，若想妥善应对性能瓶颈，必须理解其根源。

这个[实时培训项目](https://hubs.li/Q02B4mFd0)将帮助你**基于名为DMAIC的数据驱动方法解决优化谜题🕵️**

**5**个互动模块，**3**位资深React Native专家，以及**1**个全方位提升开发生命周期的未来验证框架。

想加入这场探索吗？🚀 [**立即注册候补名单**](https://hubs.li/Q02B4mFd0) 并标记7月9-10日的日程！

---

## 📱 React-Native {#react-native}

本节由[Benedikt](https://twitter.com/bndkt)撰写。

![](/emails/issues/190/rn.jpg)

本周虽无"重大头条新闻"，但我想借此机会表彰React Native社区的两个项目。React Native [visionOS团队荣获React开源奖"最具技术突破性应用"类别](https://x.com/michalchudziak/status/1801632496100008121)，而Infinite Red团队本周发布了[React Native Radio播客第300期](https://reactnativeradio.com/episodes/rnr-300-special-episode-ask-us-anything)。祝贺这两个团队，感谢你们为社区做出的贡献！

---

- 💸 [WithFrame - 预制React Native组件库](https://withfra.me/?utm_source=thisweekinreact&utm_medium=email&utm_campaign=quick-link--3)
- 🐦 [React Native visionOS荣获React开源大奖](https://x.com/michalchudziak/status/1801632496100008121)：恭喜！
- 🐦 [新版React Native IDE测试版发布，速度显著提升](https://x.com/kzzzf/status/1801367065086816449)
- 👀 [React Native 0.75 PR - 依赖升级至React 19](https://github.com/facebook/react-native/pull/44990)
- 👀 [React Native PR - requestIdleCallback](https://github.com/facebook/react-native/pull/44759)：在主事件循环中调度后台和低优先级任务
- 📖 [Expo文档 - React编译器（自Expo SDK 51起可用）](https://docs.expo.dev/guides/react-compiler/)：当然仍处于实验阶段
- 🗓 [Chain React Conf](https://chainreactconf.com/?utm_source=thisweekinreact) - 🇺🇸 波特兰，7月17-19日。美国React Native大会回归，含深度演讲与实操工作坊！使用优惠码"TWIR"可享85折
- 📜 [Infinite Red维护的顶级React Native应用清单](https://shift.infinite.red/top-react-native-apps-1cae78fdee22)：没想到汉堡王和必胜客应用是用RN构建的。若您知道优秀应用应上榜，欢迎提名——即使不是快餐连锁！
- 📜 [Reanimated可能阻塞JS线程](https://andrei-calazans.com/posts/reanimated-blocking-js-thread/)：使用共享值时确实可能自伤，这是评估是否需要共享值的及时提醒
- 📜 [使用Wagmi和Anvil测试Expo Web3应用](https://www.callstack.com/blog/testing-expo-web3-apps-with-wagmi-and-anvil)：即便您像我一样如今听到Web3就犯困，本文仍是涵盖模拟测试等环节的优秀范例
- 📜 [棒球+React Native=成功案例](https://www.thewidlarzgroup.com/portfolio/flexpro-grip)：钟爱这种非常规RN应用（不只有数据列表）。这是为棒球运动员握力训练设备FlexPro Grip开发的应用
- 📜 [通过ExecuTorch为移动应用引入原生AI——第一部分 iOS](https://blog.swmansion.com/bringing-native-ai-to-your-mobile-apps-with-executorch-part-i-ios-f1562a4556e8)
- 📦 [react-navigation-bottom-sheet](https://github.com/th3rdwave/react-navigation-bottom-sheet)：我是@gorhom/bottom-sheet的粉丝，这个新库将其与React Navigation集成
- 📦 [react-native-screens 3.32.0 - iOS支持返回按钮显示模式，Android新增navigationBarTranslucent属性](https://github.com/software-mansion/react-native-screens/releases/tag/3.32.0)
- 📦 [react-native-config 1.5.2 新增visionOS支持](https://github.com/lugg/react-native-config/releases/tag/v1.5.2)
- 📦 [react-native-gesture-handler 2.17.0发布](https://github.com/software-mansion/react-native-gesture-handler/releases/tag/2.17.0)
- 🎙️ [RNR第300期特别节目：有问必答](https://reactnativeradio.com/episodes/rnr-300-special-episode-ask-us-anything)
- 🎙️ [火箭飞船第43期 - Youssouf El Azizi谈React Native最佳实践模板](https://share.transistor.fm/s/cc24a442)
- 🎥 [notJust․dev - 用React Native和Mapbox构建电动滑板车应用](https://www.youtube.com/live/uxj8jnlooP8)
- 🎥 [Simon Grimm - 惊艳用户的5个React Native技巧](https://www.youtube.com/watch?v=pZgjlh5ezd4)
- 🎥 [Baptiste Devessier - Expo中的XState应用](https://www.youtube.com/watch?v=HuXnUGfHKZs)：才知Expo Updates使用了XState

---

## 🔀 其他 {#other}

- 📣 [第102届TC39会议动态更新 - Promise.try、isError、Discard Bindings、RegExp.escape、迭代器等新提案](https://dev.to/hemanth/updates-from-the-102nd-tc39-meeting-i4i)
- 📜 [CSS自定义属性条件判断（if语句）实践](https://geoffgraham.me/conditionals-on-custom-properties/)
- 📜 [Drizzle ORM框架正式发布](https://frontendmasters.com/blog/introducing-drizzle/)
- 📜 [Node.js的长期价值与生态活力](https://blog.platformatic.dev/nodejs-is-here-to-stay)
- 📜 [CSS与Web UI最新进展：Google I/O 2024技术回顾](https://developer.chrome.com/blog/new-in-web-ui-io-2024?hl=en)
- 📜 [用Arktype替代Zod：类型解析器的迁移指南](https://dev.to/seasonedcc/using-arktype-in-place-of-zod-how-to-adapt-parsers-3bd5)
- 📜 [预加载规则（Speculation Rules）打造极速网站](https://www.debugbear.com/blog/speculation-rules)
- 📦 [Node.js 22.3发布：快照测试、实验性模块模拟、fs.cp()稳定版](https://nodejs.org/en/blog/release/v22.3.0)
- 📦 [htmx 2.0现代化前端框架发布](https://htmx.org/posts/2024-06-17-htmx-2-0-0-is-released/)

---

## 🤭 轻松一刻 {#fun}

[![趣味图片](/emails/issues/190/meme.jpg)](https://x.com/trashh_dev/status/1803151970078957936)

下期见！👋