---
slug: /145
title: "This Week In React #145: Next.js, Server Actions, useFormStatus, useOptimistic, App Router, Canaries, Ink, ReasonML, Redwood, Reanimated, VisionCamera..."
authors: [slorber]
date: 05-09-2023
---

大家好！

不出所料，Next.js的新版本发布了。一些React的创新功能在Next.js文档中比在React文档中得到了更好的说明，比如表单`action`，或是两个新钩子`useFormStatus`和`useOptimistic`。

目前有很多会议正在进行。Remix Conf和App.js今天开始：肯定会有一些不错的公告。

[React-Native-Connection](https://reactnativeconnection.io/)（巴黎，6月1日）也将在几周后举行，使用代码"REACTHEBDO"可以享受-20%的折扣！

我计划跳过下周的版本。下一期将在5月24日发布👋

<!-- truncate -->

**💡 [在Twitter上查看这份通讯](https://slo.im/thread) - 视觉格式 🎨**

---

import Support from "../_support.mdx";

<Support />

---

## 💸 赞助 {#sponsor1}

[![Start UI](/emails/issues/144/start_ui.jpg)](https://web.start-ui.com?utm_source=newsletter&utm_term=this-week-in-react)

**[Start UI [web] - 观点鲜明的Web应用UI启动器](https://web.start-ui.com?utm_source=newsletter&utm_term=this-week-in-react)**

我们的**免费开源Web应用UI启动器**提供了一种快速简便的方式来启动您的下一个项目。它包含了**最佳实践和生产就绪的工具**，帮助您立即开始，节省初始设置阶段的时间和精力。

内置**功能**包括🔐认证、📱响应式布局、🧑‍💻用户管理、🇫🇷国际化与从右到左支持、🌚暗黑模式、🎛高级组件以便于开发。您可以试用[示例应用](https://demo.start-ui.com)。

准备好与**TypeScript**、**NextJS**、Chakra UI、TanStack Query、Storybook等一起使用。

[🚀 Start UI [web] 在GitHub上](https://web.start-ui.com)

---

## ⚛️ React {#react}

[![Next.js 13.4](/emails/issues/145/nextjs.jpg)](https://nextjs.org/blog/next-13-4)

**[Next.js 13.4](https://nextjs.org/blog/next-13-4)**

Next.js的一个重要发布，包含：

- 应用路由器（稳定版）：基于Suspense和服务器组件的新路由器已准备好投入生产
- Turbopack（测试版）：新的打包工具在开发中趋于稳定，生产构建即将到来
- 服务器操作（Alpha版）：Next.js对最新React创新的集成

博客文章展示了许多与旧路由器的显著差异：约定、嵌套布局、选择性水合、服务器组件、代码分割...

它还揭示了管理突变和表单提交的新React创新，这些在Next.js中的集成就产生了服务器操作。这极大地简化了与服务器的交互，无需创建API路由和使用支持[渐进增强](https://twitter.com/acdlite/status/1654159613950828546)的表单。现在可以创建和分发全栈React组件。

请注意，现在在生产中采用服务器操作还为时过早。它们处于Alpha阶段，您可能会意外地将捕获在服务器操作闭包中的秘密暴露给客户端。详情如下：

- 🧵 [线程](https://twitter.com/tomus_sherman/status/1654198731313500174)：警告此问题
- 🐦 [Sebastian Markbåge](https://twitter.com/sebmarkbage/status/1654212899097960448)和[Andrew Clark](https://twitter.com/acdlite/status/1654317374777032704)承认了问题，并建议加密变量。
- 🎥 [Next的服务器操作可能不太安全...](https://www.youtube.com/watch?v=fdKcbyEK66M)

**其他有用的链接：**

- 📖 [新版Next.js文档](https://twitter.com/leeerob/status/1654181055740497939)：新版测试文档已部署至生产环境，特别推荐阅读[React核心概念](https://nextjs.org/docs/getting-started/react-essentials)章节。
- 👀 [useOptimistic](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions#experimental-useoptimistic)与[useFormStatus](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions#experimental-useformstatus)：React新推出的实验性Hook。
- 📜 [Vercel平台上的Next.js 13.4](https://vercel.com/changelog/next-js-13-4)
- 📜 [Vercel数据缓存发布：为React服务端组件优化的缓存方案](https://vercel.com/changelog/introducing-vercel-data-cache)
- 🧵 [Guillermo Rauch - "我用App Router重构了rauchg.com"](https://twitter.com/rauchg/status/1652093972117073920)：值得关注的实践分享。
- 🎥 [Next.js App Router功能详解](https://www.youtube.com/watch?v=DrxiNfbr63s)

---

- 🧑‍🎓 [TotalTypeScript - React with TypeScript 教程](https://www.totaltypescript.com/tutorials/react-with-typescript)：由 TypeScript 专家 Matt Pocock 提供的免费教程。
- 🎨 [React 组件的渲染之旅](https://alexsidorenko.com/react-journey)：逐步可视化重新渲染过程。
- 📜 [React Canaries：在 Meta 之外实现渐进式功能发布](https://react.dev/blog/2023/05/03/react-canaries)：React 团队推出新的 Canary 发布渠道，允许框架在功能正式稳定前提前采用。Canary 版本足够稳定可用于生产环境，Next.js App Router 目前采用此方式，Meta 和 React-Native 也一直依赖此模式。
- 📜 [React 服务端组件、Next.js App Router 及示例](https://addyosmani.com/blog/react-server-components-app-router/)：Addy Osmani 分享他对服务端组件的思考和笔记。内容涵盖概述及大量开源应用示例，同时列举了停止使用 Create-React-App 的理由。
- 📜 [将 Next.js App Router 投入生产的 5 个经验教训](https://www.inngest.com/blog/5-lessons-learned-from-taking-next-js-app-router-to-production)：Inngest 团队成功将 CRA 应用迁移至 Next.js 和 App Router 后的反馈，包含缓存和搜索参数等细节。
- 📜 [用 OCaml 实现 React 服务端渲染](https://sancho.dev/blog/server-side-rendering-react-in-ocaml)：Ahrefs 开发者使用 Reason-React，通过 OCaml 重新实现 `ReactDOMServer.renderToString` 以原生运行 SSR 并解决问题。其 SSR 速度比 Node.js 快 10 倍，比 Bun 快 6 倍。原生运行 SSR 的思路极具潜力，但要支持流式渲染和服务端组件等最新特性仍需大量工作。
- 📜 [HTMX 是未来](https://quii.dev/HTMX_is_the_Future)：对 SPA 框架（尤其是 React）的批判，提出使用 HTMX 和超媒体响应作为替代方案。这对希望增加交互性但不愿编写 JavaScript 的后端开发者可能有吸引力，但其扩展性存疑。
- 📜 [上下文、组合与灵活性](https://kyleshevlin.com/context-composition-and-flexibility)：建议使用 React 上下文在整棵子树中激活组件的替代渲染方式。
- 📜 [我与 Remix 的挣扎](https://redd.one/blog/my-struggle-with-remix)：作者仍喜爱 Remix，但分享了使用过程中遇到的挑战。
- 📜 [从零实现 React Hook 下拉刷新](https://www.strictmode.io/articles/react-pull-to-refresh)
- 📜 [用 CSS 和 React 创建交互式聚光灯边框](https://www.julienthibeaut.xyz/blog/create-spotlight-border-with-react-css)
- 📦 [Redwood 5.0](https://community.redwoodjs.com/t/redwood-v5-0-0-is-now-available/4830)：支持 React 18、TypeScript v5 和可观测性。
- 📦 [Ink UI - 命令行界面主题化 UI 组件](https://twitter.com/vadimdemedes/status/1655567427885846534)：展示 React 跨平台能力的优秀案例，支持渲染到终端并创建该生态的 UI 库。
- 📦 [OpenNext 1.2.0 - 中间件支持地理位置](https://twitter.com/fanjiewang/status/1654192897678295040)
- 📦 [Zact - Zod 服务端动作](https://github.com/pingdotgg/zact)
- 📦 [Astro 2.4](https://astro.build/blog/astro-240/)
- 📦 [server-only](https://www.npmjs.com/package/server-only)：官方 React 包，用于防止服务端代码被导入客户端组件（参见 [Next.js 文档](https://nextjs.org/docs/getting-started/react-essentials#keeping-server-only-code-out-of-client-components-poisoning)）。
- 📦 [shadcn UI - 表格和数据表格组件](https://twitter.com/shadcn/status/1656019263394836480)
- 📦 [Million.js 2.3.1 - 实验性支持 Astro](https://twitter.com/aidenybai/status/1655088722222923776)
- 📊 [2023 年 React 现状 - 初步讨论](https://github.com/Devographics/surveys/issues/85)：今年可能会开展专门的 React 调研。
- 👀 [Rspack 上的 RSCs](https://twitter.com/_hyf0/status/1655538017669648385)
- 👀 [用 Remotion 编辑音频](https://twitter.com/JNYBGR/status/1655853159623917568)
- 🎥 [永远押注 React](https://www.youtube.com/watch?v=TnyslkPfXaM)
- 🎥 [我受够了 React](https://www.youtube.com/watch?v=Zt8mO_Aqzw8)
- 🎥 [2023 年还该学 React 吗？- 采访 React Summit 演讲者 Tru Narla 和 Jordan Gensler](https://www.youtube.com/watch?v=5xRqP-M8MkM)
- 👥 [React Summit](https://reactsummit.com/?utm_source=email&utm_medium=thisweekinreact)（阿姆斯特丹，6 月 2-6 日）提供门票 -5% 折扣（代码 "ThisWeekInReact5"）和[研讨会](https://reactsummit.com/react-workshops) -10% 折扣（代码 "THISWEEKINREACT"）。

<SubscribeFormEmbed />

---

## 💸 赞助商 {#sponsor2}

[![Nylas](/emails/issues/144/nylas_2.png)](https://www.nylas.com/?utm_source=TWIR&utm_medium=sponsoredemail&utm_campaign=FY23Q2-TWIR-2P-DSU&utm_content&utm_term)

**[OpenAI + Nylas 炉边谈话：生成式AI](https://www.nylas.com/?utm_source=TWIR&utm_medium=sponsoredemail&utm_campaign=FY23Q2-TWIR-2P-DSU&utm_content&utm_term)**

想深入了解生成式AI的未来吗？5月17日，[OpenAI与Nylas将联合举办一场开放炉边谈话](https://info.nylas.com/firesidechat-openai-registrationpage.html?utm_source=TWIR&utm_medium=sponsoredemail&utm_campaign=FY23Q2-TWIR-2P-Webinar&utm_content=march-9-issue&utm_term=)，OpenAI应用工程经理Evan Morikawa与Nylas联合创始人兼CTO Christine Spang将探讨大规模交付和维护AI解决方案的关键要素、AI技术下一阶段成熟度的形态等议题。[立即报名](https://info.nylas.com/firesidechat-openai-registrationpage.html?utm_source=TWIR&utm_medium=sponsoredemail&utm_campaign=FY23Q2-TWIR-2P-Webinar&utm_content=march-9-issue&utm_term=)。

---

## 📱 React-Native动态 {#react-native}

- 📖 [新版Reanimated Beta文档](https://twitter.com/swmansion/status/1655930596093472774)：采用交互式Docusaurus文档，包含大量React-Native-Web实现案例。
- 🎨 [VisionCamera + Skia + TensorFlow演示](https://twitter.com/mrousavy/status/1654143459849121792)：展示React-Native当前可实现的能力，Skia渲染与TensorFlow模型均可通过OTA更新。
- 🎨 [Reanimated 3 + Expo路由 + 共享元素转场效果演示](https://twitter.com/kacperkapusciak/status/1654434612825792513)
- 📜 [React Native端到端Maestro测试最佳实践](https://dev.to/retyui/best-tips-tricks-for-e2e-maestro-with-react-native-2kaa)
- 📜 [React Native run-android：多设备类型测试指南](https://www.testim.io/blog/react-native-run-android/)
- 👥 [App.js大会](https://appjs.co/)（克拉科夫，5月10-12日）提供[研讨会8折优惠](https://ti.to/appjs/2023/discount/ThisWeekinReact20)（优惠码"ThisWeekinReact20"）。
- 👥 [Chain React大会](https://chainreactconf.com/)（波特兰，5月18-19日）提供门票9折优惠（优惠码"thisweekinreact"）。
- 👥 [React-Native-Connection大会](https://reactnativeconnection.io/)（巴黎，6月1日）提供门票9折优惠（优惠码"REACTHEBDO"）。

---

## 🧑‍💻 职位招聘 {#jobs}

🧑‍💼 [**Passionfroot - 高级全栈工程师（Remix方向）- 16万欧元+/年，柏林/远程**](https://passionfroot.recruitee.com/o/senior-fullstack-engineer)

Passionfroot致力于通过YouTube、播客、社交媒体和新闻通讯赋能未来的独立创业者。加入我们，共同打造助力全球创作者建立可扩展、可持续商业模式的工具。

🧑‍💼 [**Callstack - 高级React Native开发工程师 - 完全远程，B2B合同月薪2.1-3.2万波兰兹罗提净收入**](https://www.callstack.com/senior-react-native-developer)

您希望参与全球顶级应用开发吗？想要共同塑造React Native技术生态吗？加入Callstack这支由React & React Native技术领袖组成的团队。查看官网了解更多详情，我们期待看到您的申请——请充分展示您的实力！

🧑‍💼 [**G2i - 100%远程React Native职位**](https://twitter.com/gabe_g2i/status/1563204813881425926?s=20&t=ArRLC77BpRwXXCdx8fnUqw)

我们开放多个React Native开发岗位！年薪约16万美元外加10%奖金。应聘者需具备RN生产环境经验且居住在美国。私信[@gabe_g2i](https://twitter.com/gabe_g2i)了解详情，请注明通过This Week in React获悉本招聘信息。

💡 [如何发布赞助信息？](https://thisweekinreact.com/sponsor)

---

## 🔀 其他 {#other}

- [HTML的客户端渲染与交互性实现](https://web.dev/client-side-rendering-of-html-and-interactivity/)
- [在实验室环境中诊断缓慢的交互](https://web.dev/diagnose-slow-interactions-in-the-lab/)
- [我想谈谈WebGPU](https://cohost.org/mcc/post/1406157-i-want-to-talk-about)
- [使用滚动驱动动画实现元素滚动动画](https://developer.chrome.com/articles/scroll-driven-animations/)
- [实验室与真实场景中累积布局偏移差异分析](https://www.debugbear.com/blog/cls-lab-field-differences)
- [Angular v16发布](https://blog.angular.io/angular-v16-is-here-4d7a28ec680d)
- [Nx v16发布](https://blog.nrwl.io/nx-16-is-here-69584ec87053#68c6)
- [Vitest 0.31发布](https://twitter.com/sheremet_va/status/1653827712576880645)

---

## 🤭 趣味一刻 {#fun}

[![alt](/emails/issues/145/meme.jpg)](https://twitter.com/markdalgleish/status/1654259858668163072)

下次见！👋