---
slug: /145
title: "This Week In React #145: Next.js, Server Actions, useFormStatus, useOptimistic, App Router, Canaries, Ink, ReasonML, Redwood, Reanimated, VisionCamera..."
authors: [slorber]
date: 05-09-2023
---

大家好！

不出所料，Next.js 发布了新版本。一些React创新功能在Next.js文档中的说明比React官方文档更详尽，例如表单`action`，以及两个新钩子`useFormStatus`和`useOptimistic`。

近期会议密集。Remix Conf和App.js今日开幕：预计会有重要公告发布。

距离[React-Native-Connection](https://reactnativeconnection.io/)（巴黎，6月1日）开幕仅剩数周，使用优惠码"REACTHEBDO"可享8折早鸟票！

下周将暂停更新一期。下期将于5月24日恢复发布 👋

<!-- truncate -->

**💡 [在Twitter查看本期简报](https://slo.im/thread) - 可视化排版 🎨**

---

import Support from "../_support.mdx";

<Support />

---

## 💸 赞助 {#sponsor1}

[![Start UI](/emails/issues/144/start_ui.jpg)](https://web.start-ui.com?utm_source=newsletter&utm_term=this-week-in-react)

**[Start UI [web] - 开箱即用的Web应用UI启动器](https://web.start-ui.com?utm_source=newsletter&utm_term=this-week-in-react)**

我们免费开源的Web应用UI启动器能快速初始化新项目，内置**最佳实践与生产级工具链**，助您跳过繁琐配置直接进入开发。

集成功能包括：🔐 认证系统、📱响应式布局、🧑‍💻 用户管理、🇫🇷 国际化与右向左布局支持、🌚 暗黑模式、🎛 高阶组件库。可体验[示例应用](https://demo.start-ui.com)。

基于**TypeScript**、**NextJS**、Chakra UI、TanStack Query、Storybook等技术栈构建。

[🚀 GitHub上的Start UI [web]](https://web.start-ui.com)

---

## ⚛️ React动态 {#react}

[![Next.js 13.4](/emails/issues/145/nextjs.jpg)](https://nextjs.org/blog/next-13-4)

**[Next.js 13.4](https://nextjs.org/blog/next-13-4)**

本次重大更新包含：

- 应用路由（稳定版）：基于Suspense和服务端组件的新路由系统已具备生产可用性
- Turbopack（测试版）：开发环境构建工具日趋稳定，生产构建功能即将推出
- 服务端操作（Alpha版）：Next.js对最新React特性的集成实现

博文详细对比了新老路由系统的差异：约定式路由、嵌套布局、选择性注水、服务端组件、代码分割...

同时揭示了React处理数据变更和表单提交的创新方案，这些特性在Next.js中集成为服务端操作。无需创建API路由即可实现服务端交互，支持[渐进增强](https://twitter.com/acdlite/status/1654159613950828546)的表单处理，使得全栈React组件的创建和分发成为可能。

注意：服务端操作目前处于Alpha阶段，暂不建议生产环境使用。存在闭包变量意外暴露至客户端的安全风险，详见：

- 🧵 [讨论串](https://twitter.com/tomus_sherman/status/1654198731313500174)：警示该问题
- 🐦 [Sebastian Markbåge](https://twitter.com/sebmarkbage/status/1654212899097960448)和[Andrew Clark](https://twitter.com/acdlite/status/1654317374777032704)确认问题并提出变量加密方案
- 🎥 [Next服务端操作的安全隐患...](https://www.youtube.com/watch?v=fdKcbyEK66M)

**其他实用链接：**

- 📖 [新版Next.js文档](https://twitter.com/leeerob/status/1654181055740497939)：新版测试文档已部署至生产环境，特别推荐阅读[React核心概念](https://nextjs.org/docs/getting-started/react-essentials)。
- 👀 [useOptimistic](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions#experimental-useoptimistic)与[useFormStatus](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions#experimental-useformstatus)：React新实验性钩子。
- 📜 [Vercel上的Next.js 13.4](https://vercel.com/changelog/next-js-13-4)
- 📜 [Vercel数据缓存发布：为React服务端组件优化的缓存方案](https://vercel.com/changelog/introducing-vercel-data-cache)
- 🧵 [Guillermo Rauch - "我用App Router重设计了rauchg.com"](https://twitter.com/rauchg/status/1652093972117073920)：值得关注的实践分享。
- 🎥 [Next.js App Router功能详解](https://www.youtube.com/watch?v=DrxiNfbr63s)

---

- 🧑‍🎓 [TotalTypeScript - React与TypeScript教程](https://www.totaltypescript.com/tutorials/react-with-typescript)：由TypeScript专家Matt Pocock提供的免费教程。
- 🎨 [React组件的渲染之旅](https://alexsidorenko.com/react-journey)：逐步可视化组件重渲染过程。
- 📜 [React Canaries：在Meta之外实现渐进式功能发布](https://react.dev/blog/2023/05/03/react-canaries)：React团队推出新的Canary发布渠道，允许框架在功能稳定前先行采用。Canary版本足够稳定可用于生产环境，Next.js App Router当前即采用此方式，Meta和React-Native也长期依赖该机制。
- 📜 [React服务端组件、Next.js App Router及示例](https://addyosmani.com/blog/react-server-components-app-router/)：Addy Osmani分享关于服务端组件的思考笔记，包含优质概览和开源应用示例，同时列出弃用Create-React-App的理由。
- 📜 [Next.js App Router生产实践五大经验](https://www.inngest.com/blog/5-lessons-learned-from-taking-next-js-app-router-to-production)：Inngest团队从CRA迁移至Next.js App Router的实战反馈，包含缓存和搜索参数等细节。
- 📜 [用OCaml实现React服务端渲染](https://sancho.dev/blog/server-side-rendering-react-in-ocaml)：Ahrefs团队使用Reason-React，通过OCaml原生实现`ReactDOMServer.renderToString`解决性能问题，其SSR速度比Node.js快10倍，比Bun快6倍。虽然原生支持流式渲染和服务端组件仍需大量工作，但该思路极具启发性。
- 📜 [HTMX是未来](https://quii.dev/HTMX_is_the_Future)：对React等SPA框架的批判性分析，提出使用HTMX和超媒体响应作为替代方案。虽适合后端开发者快速添加交互性，但规模化能力存疑。
- 📜 [上下文、组合与灵活性](https://kyleshevlin.com/context-composition-and-flexibility)：建议利用React上下文在子树中激活组件的替代渲染方案。
- 📜 [我的Remix使用困境](https://redd.one/blog/my-struggle-with-remix)：作者在保持对Remix喜爱的同时，分享实际开发中遇到的挑战。
- 📜 [从零实现React下拉刷新钩子](https://www.strictmode.io/articles/react-pull-to-refresh)
- 📜 [用CSS和React创建交互式聚光灯边框](https://www.julienthibeaut.xyz/blog/create-spotlight-border-with-react-css)
- 📦 [Redwood 5.0发布](https://community.redwoodjs.com/t/redwood-v5-0-0-is-now-available/4830)：支持React 18、TypeScript v5和可观测性。
- 📦 [Ink UI - 命令行界面主题化组件库](https://twitter.com/vadimdemedes/status/1655567427885846534)：展现React跨平台能力的典型案例，可渲染至终端并构建专属UI生态。
- 📦 [OpenNext 1.2.0支持中间件地理位置功能](https://twitter.com/fanjiewang/status/1654192897678295040)
- 📦 [Zact - Zod服务端动作库](https://github.com/pingdotgg/zact)
- 📦 [Astro 2.4发布](https://astro.build/blog/astro-240/)
- 📦 [server-only官方包](https://www.npmjs.com/package/server-only)：React官方工具包，用于防止服务端代码被客户端组件导入（参见[Next.js文档](https://nextjs.org/docs/getting-started/react-essentials#keeping-server-only-code-out-of-client-components-poisoning)）。
- 📦 [shadcn UI新增表格组件](https://twitter.com/shadcn/status/1656019263394836480)
- 📦 [Million.js 2.3.1实验性支持Astro](https://twitter.com/aidenybai/status/1655088722222923776)
- 📊 [2023年React生态现状调研筹备](https://github.com/Devographics/surveys/issues/85)：今年或将开展专项React开发者调研。
- 👀 [Rspack支持RSCs预览](https://twitter.com/_hyf0/status/1655538017669648385)
- 👀 [用Remotion编辑音频](https://twitter.com/JNYBGR/status/1655853159623917568)
- 🎥 [永远押注React](https://www.youtube.com/watch?v=TnyslkPfXaM)
- 🎥 [我放弃React了](https://www.youtube.com/watch?v=Zt8mO_Aqzw8)
- 🎥 [2023年还该学React吗？- React Summit讲者Tru Narla与Jordan Gensler访谈](https://www.youtube.com/watch?v=5xRqP-M8MkM)
- 👥 [React Summit大会](https://reactsummit.com/?utm_source=email&utm_medium=thisweekinreact)（阿姆斯特丹，6月2-6日）提供门票5%折扣（代码"ThisWeekInReact5"）及[研讨会](https://reactsummit.com/react-workshops)10%优惠（代码"THISWEEKINREACT"）

<SubscribeFormEmbed />

---

## 💸 赞助商 {#sponsor2}

[![Nylas](/emails/issues/144/nylas_2.png)](https://www.nylas.com/?utm_source=TWIR&utm_medium=sponsoredemail&utm_campaign=FY23Q2-TWIR-2P-DSU&utm_content&utm_term)

**[OpenAI + Nylas 炉边谈话：生成式AI](https://www.nylas.com/?utm_source=TWIR&utm_medium=sponsoredemail&utm_campaign=FY23Q2-TWIR-2P-DSU&utm_content&utm_term)**

想深入了解生成式AI的未来吗？5月17日，[OpenAI与Nylas将举办一场面向所有人的炉边谈话](https://info.nylas.com/firesidechat-openai-registrationpage.html?utm_source=TWIR&utm_medium=sponsoredemail&utm_campaign=FY23Q2-TWIR-2P-Webinar&utm_content=march-9-issue&utm_term=)，OpenAI应用工程经理Evan Morikawa和Nylas联合创始人兼CTO Christine Spang将参与讨论。他们将探讨大规模交付和维护AI解决方案的关键要素、AI下一阶段成熟度的形态等议题。[点击报名](https://info.nylas.com/firesidechat-openai-registrationpage.html?utm_source=TWIR&utm_medium=sponsoredemail&utm_campaign=FY23Q2-TWIR-2P-Webinar&utm_content=march-9-issue&utm_term=)。

---

## 📱 React-Native {#react-native}

- 📖 [新版Reanimated Beta文档](https://twitter.com/swmansion/status/1655930596093472774)：采用交互式Docusaurus文档，包含大量React-Native-Web实现案例。
- 🎨 [VisionCamera + Skia + TensorFlow演示](https://twitter.com/mrousavy/status/1654143459849121792)：展示React-Native当前可实现的效果，Skia渲染和TensorFlow模型支持空中下载更新。
- 🎨 [Reanimated 3 + Expo路由 + 共享元素过渡动画演示](https://twitter.com/kacperkapusciak/status/1654434612825792513)
- 📜 [React Native端到端Maestro测试最佳实践](https://dev.to/retyui/best-tips-tricks-for-e2e-maestro-with-react-native-2kaa)
- 📜 [React Native run-android：多设备类型测试指南](https://www.testim.io/blog/react-native-run-android/)
- 👥 [App.js大会](https://appjs.co/)（克拉科夫，5月10-12日）提供[研讨会8折优惠](https://ti.to/appjs/2023/discount/ThisWeekinReact20)（优惠码"ThisWeekinReact20"）。
- 👥 [Chain React大会](https://chainreactconf.com/)（波特兰，5月18-19日）提供门票9折优惠（优惠码"thisweekinreact"）。
- 👥 [React-Native-Connection大会](https://reactnativeconnection.io/)（巴黎，6月1日）提供门票9折优惠（优惠码"REACTHEBDO"）。

---

## 🧑‍💻 职位招聘 {#jobs}

🧑‍💼 [**Passionfroot - 高级全栈工程师（Remix）- 16万欧元+，柏林/远程**](https://passionfroot.recruitee.com/o/senior-fullstack-engineer)

Passionfroot致力于通过YouTube、播客、社交媒体和新闻通讯赋能未来的独立创业者。加入我们，共同打造帮助全球创作者建立可扩展、可持续业务的工具。

🧑‍💼 [**Callstack - 高级React Native开发工程师 - 完全远程，B2B合同月薪2.1-3.2万波兰兹罗提（净收入）**](https://www.callstack.com/senior-react-native-developer)

您想参与全球最热门应用的开发吗？您愿意共同塑造React Native技术的未来吗？加入Callstack这个由React & React Native技术领袖组成的团队。详情请访问我们的网站，我们期待看到您的申请——请尽情展示您的才华！

🧑‍💼 [**G2i - 100%远程React Native职位**](https://twitter.com/gabe_g2i/status/1563204813881425926?s=20&t=ArRLC77BpRwXXCdx8fnUqw)

我们正在招聘多位专注React Native的开发者！年薪约16万美元外加10%奖金。应聘者需具备RN生产环境经验且居住在美国。私信[@gabe_g2i](https://twitter.com/gabe_g2i)了解更多信息，别忘了提及This Week in React。

💡 [如何发布赞助信息？](https://thisweekinreact.com/sponsor)

---

## 🔀 其他 {#other}

- [HTML的客户端渲染与交互性](https://web.dev/client-side-rendering-of-html-and-interactivity/)
- [在实验室诊断缓慢的交互](https://web.dev/diagnose-slow-interactions-in-the-lab/)
- [我想谈谈WebGPU](https://cohost.org/mcc/post/1406157-i-want-to-talk-about)
- [使用滚动驱动动画实现元素滚动动画](https://developer.chrome.com/articles/scroll-driven-animations/)
- [实验室与现场数据中的累积布局偏移差异](https://www.debugbear.com/blog/cls-lab-field-differences)
- [Angular v16发布](https://blog.angular.io/angular-v16-is-here-4d7a28ec680d)
- [Nx v16发布](https://blog.nrwl.io/nx-16-is-here-69584ec87053#68c6)
- [Vitest 0.31发布](https://twitter.com/sheremet_va/status/1653827712576880645)

---

## 🤭 趣闻 {#fun}

[![alt](/emails/issues/145/meme.jpg)](https://twitter.com/markdalgleish/status/1654259858668163072)

下次见！👋