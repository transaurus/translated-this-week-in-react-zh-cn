---
slug: /201
title: "This Week In React #201: TanStack, Remix, Next.js-SaaS-Starter, routing, ?search, decoupling, LLM, Astro, Redwood, Storybook, Conform, Nitro Modules, RN CSS, Re.Pack, Swift, VisionOS, Lottie, Node.js, TypeScript, Vite, date-fns..."
authors: [slorber]
date: 09-18-2024
---

大家好！

本周React社区又涌现了许多精彩文章，尤其是围绕TanStack生态的深度内容。

同时还有令人振奋的React Native新动态，比如Nitro模块的发布。

✍ 别忘了签署这份重要请愿书：[Oracle，是时候解放JavaScript了](https://javascript.tm/)

另请关注我们的合作会议 🗓 [React Summit美国站](https://reactsummit.us/?utm_source=Newsletter&utm_medium=thisweekinreact) - 🇺🇸 纽约 \- 12月19日 & 22日。这场顶级React峰会即将在美国迎来第二届盛会！

<!-- truncate -->

**💡 [在Twitter查看本期简报](https://slo.im/thread) - 视觉化呈现 🎨**

---

import Support from "../_support.mdx";

<Support />

---

## 💸 赞助商 {#sponsor1}

[![可视化追踪团队间React组件使用情况](/emails/issues/201/omletad.png)](https://omlet.dev/?utm_campaign=partner_this-week-in-react_first-sponsor-sep-2024)

**[可视化追踪团队间React组件使用情况](https://omlet.dev/?utm_campaign=partner_this-week-in-react_first-sponsor-sep-2024)**

☁️ 想象一下：您能清晰掌握开发人员如何使用特定React组件，从而发现减少前端技术债务的契机，并验证设计系统价值——这正是Omlet赋予您的能力。

- 建立生产环境中所有自定义/可复用组件的中央目录
- 按属性搜索筛选组件，定位需要更新、调试或优化使用的部分
- 轻松创建定制化图表，向团队展示设计系统采用率、遗留代码削减、组件/属性使用频次等关键指标

5分钟内即可完成配置并运行首次扫描。[免费试用](https://omlet.dev/?utm_campaign=partner_this-week-in-react_first-sponsor-sep-2024)

---

## ⚛️ React动态 {#react}

[![TanStack Router正式发布](/emails/issues/201/tanstack.jpg)](https://frontendmasters.com/blog/introducing-tanstack-router/)

**TanStack最新动态**

本周有太多TanStack相关新闻值得关注，我们将其整合如下：

- 📜 [TanStack Router正式发布](https://frontendmasters.com/blog/introducing-tanstack-router/)：全面介绍这个功能强大的客户端路由方案，它将成为TanStack Start框架(alpha阶段)的核心。其亮点在于为链接、路径参数和搜索参数提供的极致类型安全，特别是采用`to="/users/$id"`而非硬编码路径的声明式导航设计
- 📜 [TanStack Router的TypeScript性能里程碑](https://tanstack.com/blog/tanstack-router-typescript-performance)：深度剖析了语言服务中的TS性能问题如何导致IDE自动补全延迟，以及相应的优化方案
- 📜 [无限查询的工作原理](https://tkdodo.eu/blog/how-infinite-queries-work)：React Query核心成员Dominik揭秘无限查询的底层机制，展示了可插拔行为逻辑的优雅架构，并分享了他如何修复一个历史性bug——该问题因重试逻辑缺陷潜伏多年才被发现
- 👀 [Clerk推出TanStack Start SDK(beta)](https://clerk.com/docs/quickstarts/tanstack-start)：第三方认证服务商为新兴框架提供一等公民级别的Auth支持，标志着生态正在快速成熟

---

- 💸 [React Bricks - 将React组件转化为可动态可视化编辑的内容模块，使用开创性的React可视化无头CMS。](https://www.reactbricks.com/?utm_source=twir&utm_campaign=ql24)
- 🧑‍🎓 [XState: 完整入门指南](https://www.typeonce.dev/course/xstate-complete-getting-started-guide): 免费全面的XState课程，结合React上下文讲解。
- 🖨 [React 19 速查表](https://www.epicreact.dev/react-19-cheatsheet)
- 🗓️ [React-Africa](https://react-africa.com/?utm_source=thisweekinreact) - 🇲🇦 卡萨布兰卡 - 11月29日 - 使用代码"TWIR"可享9折优惠。完整议程已公布，请访问会议官网查看！
- 🗓️ [React Advanced伦敦大会](https://reactadvanced.com/?utm_source=Newsletter&utm_medium=thisweekinreact) - 🇬🇧 伦敦 - 10月25日 & 28日 - 使用代码TWIR享9折。完整演讲阵容现已公布！
- 📜 [Remix的并发提交存在根本性缺陷(缺乏因果顺序)](https://dashbit.co/blog/remix-concurrent-submissions-flawed): 在ChatGPT从Next.js迁移到Remix后，Elixir创始人指出Remix的提交验证模型存在竞态条件问题。Ryan Florence表示将后续回应。需注意这是影响多数客户端框架的普遍问题，不过React 19的actions会顺序执行不受影响。
- 📜 [Remix扁平化文件路由的工作原理](https://www.udohjeremiah.com/blog/how-remix-flat-file-based-routing-works): 详细解析Remix默认路由约定的实现机制。
- 📜 [使用回调实现React组件更好解耦](https://darios.blog/posts/using-callbacks-in-react): 通过收窄回调类型而非直接注入父组件的setState，实现父子组件解耦的简明教程。
- 📜 [SPA懒加载的陷阱](https://reacttraining.com/blog/spa-lazy-loading-pitfalls): 使用React Router懒加载路由时，避免将loader函数与接收数据的组件放在一起，否则会产生请求瀑布流。
- 📜 [LLM与RSC的天作之合](https://nikhilsnayak.dev/blogs/llm-and-rsc): 利用OpenAI函数调用实现生成式UI的MVP方案，交互式演示可在聊天会话中渲染React组件。
- 📜 [TypeScript下的整洁React](https://weser.io/blog/clean-react-with-typescript): ReasonML资深用户转型TypeScript后，分享如何优雅地为React组件、状态、ref和事件添加类型。除基础类型外，还涵盖如`ComponentProps`转发props等高级模式。
- 📜 [在Next.js App Router中实现功能开关](https://aurorascharff.no/posts/implementing-feature-flagging-with-nextjs-app-router/): 基于环境变量构建的定制化功能开关系统，同时支持客户端和服务端组件。
- 📜 [Next.js中使用URL搜索参数管理状态](https://www.robinwieruch.de/next-search-params/): 介绍如何使用`nuqs`库实现类型化搜索参数来过滤/排序列表。
- 📜 [Redwood后台任务](https://redwoodjs.com/blog/background-jobs): 详解8.0版本新增特性，特别适用于发送邮件等耗时操作，避免阻塞用户响应。任务会持久化到数据库并由调度器执行。
- 📜 [Tailwind UI Radiant - 精美的新营销网站模板](https://tailwindcss.com/blog/2024-09-12-radiant-a-beautiful-new-marketing-site-template): Tailwind CSS团队推出的付费Next.js模板，发布博客同时揭秘了FramerMotion变体传播等技术细节。
- 📜 [不要忽视AbortController](https://kettanaito.com/blog/dont-sleep-on-abort-controller): 优秀的原生JS教程，包含React`useEffect`的实用示例。
- 📦 [Vite 6测试版](https://github.com/vitejs/vite/blob/main/packages/vite/CHANGELOG.md): 新增[环境API](https://main.vitejs.dev/guide/api-environment)支持SSR和RSC的多模块图。
- 📦 [Valtio 2.0](https://github.com/pmndrs/valtio/releases/tag/v2.0.0): 不再处理Promise，需改用`React.use()`。作者据此创建了[示例](https://x.com/sebastienlorber/status/1836060870733955127)，展示该模式如何简化原生数据获取逻辑。
- 📦 [Next.js SaaS启动模板 - 集成Next.js 15、React 19、Postgres、Drizzle、Stripe和shadcn/ui](https://github.com/leerob/next-saas-starter): Vercel的Lee Robinson打造的免费样板项目，采用React 19前沿特性并遵循最佳实践。
- 📦 [Astro 5.0测试版 - 稳定的内容层、服务端岛屿、astro:env](https://astro.build/blog/astro-5-beta/)
- 📦 [Hono-Remix适配器](https://github.com/yusukebe/hono-remix-adapter)
- 📦 [Storybook 8.3 - Vitest集成、实验性Story全局变量](https://github.com/storybookjs/storybook/releases/tag/v8.3.0)
- 📦 [Conform 1.2 - 不再强制要求Input的key属性](https://github.com/edmundhung/conform/releases/tag/v1.2.0)
- 📦 [Isograph 0.2 - 现代GraphQL客户端](https://isograph.dev/blog/2024/09/11/isograph-0.2.0/)
- 📦 [Relay 18.0 - 新增`@alias`、`@catch`，改进编辑器集成等](https://github.com/facebook/relay/releases/tag/v18.0.0)
- 📦 [Shopify Hydrogen 2024年9月更新 - 改进站点地图、搜索增强、本地化、CSP修复](https://hydrogen.shopify.dev/update/september-2024)
- 🎥 [Theo - 我们需要谈谈Chrome的新API](https://www.youtube.com/watch?v=ucMNiYFB4CA): 精彩介绍Chrome 129新增的`scheduler.yield()`，该API有助于Concurrent React将任务拆分为更小单元并优先处理用户输入。
- 🎥 [UI工程 - 让setState()即时生效](https://www.youtube.com/watch?v=H9IIwbUhEJA)

<SubscribeFormEmbed placement="middle" />

---

## 💸 赞助商 {#sponsor2}

[![充分发挥JWT和会话令牌的优势](/emails/issues/201/clerk.jpg)](https://go.clerk.com/4kxhIiA)

**[充分发挥JWT和会话令牌的优势](https://go.clerk.com/4kxhIiA)**

了解如何结合会话令牌认证和JWT的优势，实现最佳实践方案。

---

## 📱 React-Native {#react-native}

[![Nitro模块](/emails/issues/201/nitro.jpg)](https://mrousavy.github.io/nitro/)

**[Nitro模块](https://mrousavy.github.io/nitro/)**

Marc Rousavy终于发布了其备受期待的快速原生模块开发框架，提供卓越的开发体验。该框架基于Nitrogen代码生成器，能够从TypeScript接口生成类型安全的C++/Swift/Kotlin绑定，支持多种TypeScript类型。与其他模块解决方案不同，它可以直接桥接到Swift和Kotlin（通过C++）。简单基准测试显示，在基础操作上Nitro模块性能优于ExpoModules和TurboModules。早期采用者社区反馈非常积极，例如William Candillion将其用于react-native-wgpu项目。另可阅读[Brent Vatne的评论](https://x.com/notbrent/status/1834647244089307279)，了解Expo模块为何暂未采用直接Swift-C++互操作方案。

---

- 💸 [React Native 大师课 - 掌握 React Native 和 Expo 的唯一课程](https://notjust.dev/react-native-mastery?utm_source=twir&utm_medium=email)
- 🐦 [React Native Skia 在 WebGPU Canvas 上运行](https://x.com/wcandillon/status/1834245607906496888): 精彩的演示，更重要的是解释了为 React Native 实现通用 Canvas API 的意图，类似于网页上的 API。
- 🐦 [React Native WebGPU + React Three Fiber 演示](https://x.com/wcandillon/status/1834901444320801032)
- 📜 [塑造 React Native 超级应用的未来](https://www.callstack.com/blog/shaping-the-future-of-super-apps-in-react-native): Callstack 解释了为什么他们押注 Rspack、Re.Pack 和 Module Federation v2 来实现超级应用。他们还宣布与 Zephyr Cloud 建立新的合作伙伴关系，将该平台集成到 React Native 生态系统中，这是一个 SaaS，可以更轻松地管理联邦应用。请注意，[Re.Pack 5.0 alpha](https://github.com/callstack/repack/releases/tag/%40callstack%2Frepack%405.0.0-alpha.0) 已经发布，支持 Rspack，构建速度比 Webpack 快 5 倍。
- 📜 [React Native 布局组件](https://kyleshevlin.com/snippets/react-native-layout-components/): 我也喜欢这种将布局样式作为 props 公开的模式，可能会用它来创建一个 React Native 设计系统。
- 📜 [管理 React Native TV 应用焦点的 5 种方法](https://www.reactnativetv.com/blog/five-ways-of-managing-focus)
- 📜 [Expo Go 与开发构建：你应该使用哪个？](https://expo.dev/blog/expo-go-vs-development-builds)
- 📦 [React Native 0.76 RC1](https://github.com/facebook/react-native/releases/tag/v0.76.0-rc.1): 这个版本稳定支持 CSS boxShadow 和 filter！注意，似乎还有更多 CSS 功能正在开发中（mix-blend-mode、isolate、outline…）。
- 📦 [Swift 6 - 并发内存安全、类型化抛出、C++ 互操作、Foundation、测试](https://www.swift.org/blog/announcing-swift-6/)
- 📦 [React Native VisionOS 0.76 RC.0 - 支持 React Native 调试器](https://github.com/callstack/react-native-visionos/releases/tag/v0.76.0-rc.0-visionos)
- 📦 [Lottie React Native 7.0 - VisionOS、XCode 16、要求 0.73+，无重大破坏性变更](https://github.com/lottie-react-native/lottie-react-native/releases/tag/v7.0.0)
- 📦 [Sonner-Native - 一个为 React Native 设计的意见式 toast 组件（Sonner 的移植版）](https://github.com/gunnartorfis/sonner-native)
- 📦 [React Native 测试库 12.7 - 模拟 TextInputs/ScrollView 的本地状态，Switch toBeChecked()，通过 `alt` prop 匹配 Image](https://github.com/callstack/react-native-testing-library/releases/tag/v12.7.2)
- 📦 [React Native Iconify 2.0 - 动态导入，支持 Next.js + Vite，变量](https://github.com/oktaysenkan/react-native-iconify/releases/tag/v2.0.0)
- 🎥 [Reactiive - 使用 React Native（Reanimated）制作的动画条形图](https://www.youtube.com/watch?v=RO3qutJhU_Y)
- 🎥 [Simon Grimm - Cursor AI 能构建我的 React Native 应用吗？](https://www.youtube.com/watch?v=5Y_t6NRl_xI)
- 🎙️ [RNR 307 - React Universe 回顾](https://www.reactnativeradio.com/episodes/rnr-307-react-universe-recap)

---

## 🔀 其他 {#other}

- 👀 [TypeScript 5.7 迭代计划](https://github.com/microsoft/TypeScript/issues/59905)
- 👀 [Web 功能探索器 - 一份面向 Web 平台的发布说明](https://patrickbrosset.com/articles/2024-09-04-a-release-note-for-the-web-platform/)
- 📜 [理解并发、并行与 JavaScript](https://www.rugu.dev/en/blog/concurrency-and-parallelism/)
- 📦 [date-fns 4.0 - 原生时区支持](https://blog.date-fns.org/v40-with-time-zone-support/)
- 📦 [Chokidar 4.0 - 依赖项从 13 个缩减至 1 个，原生 TypeScript 支持，同时提供 CJS 和 ESM 格式，要求 Node.js 14+](https://github.com/paulmillr/chokidar/releases/tag/4.0.0)
- 📦 [Node 22.9 - 新增 getCallSite API](https://nodejs.org/en/blog/release/v22.9.0)
- 📦 [Safari 18.0 - 支持视图过渡动画、样式查询、display 属性动画、URL.parse() 等](https://webkit.org/blog/15865/webkit-features-in-safari-18-0/)
- 📦 [Hono 4.6 - 新增上下文存储中间件（AsyncLocalStorage）](https://github.com/honojs/hono/releases/tag/v4.6.0)
- 📦 [Biome 1.9 - 稳定的 CSS 和 GraphQL 格式化/检查功能，支持 .editorconfig](https://biomejs.dev/blog/biome-v1-9/)

---

## 🤭 轻松一刻 {#fun}

[![alt](/emails/issues/201/meme.jpg)](https://x.com/sophiebits/status/1836272297801585041)

[![alt](/emails/issues/201/meme2.jpg)](https://x.com/thymikee/status/1831602712577733035)

[![alt](/emails/issues/201/meme3.jpg)](https://x.com/sebastienlorber/status/1833145461328244774)

下次见！👋